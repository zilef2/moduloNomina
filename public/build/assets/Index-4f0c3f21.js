import{l as D,J as U,m as A,O as T,f as y,a as l,u as i,w as p,F as C,p as L,o as c,X as F,g as S,b as e,q as d,s as u,d as h,t as n,h as w,A as $,c as b,x as M,y as R}from"./app-661e5535.js";import{_ as q}from"./AuthenticatedLayout-efff60e3.js";import{_ as H}from"./Breadcrumb-7072a251.js";import{_ as J}from"./TextInput-390d4b7c.js";import{_ as k}from"./PrimaryButton-732eaf88.js";import{_ as O}from"./InfoButton-abdb80e2.js";import{_ as X}from"./SelectInput-1969f2c5.js";import{_ as I}from"./DangerButton-1ce7351f.js";import{_ as z}from"./Pagination-d3dcf0ed.js";import{S as G,T as j,C as f,E as K,P as Q,L as W}from"./index-bd20b1fe.js";import{n as Y}from"./global-dc9854cd.js";import Z from"./Create-07952a10.js";import ee from"./Edit-b33b52d0.js";import se from"./EdiCentro-b24078b0.js";import te from"./Delete-0fa07746.js";import re from"./DeleteBulk-ab0bf1dc.js";import{_ as oe}from"./Checkbox-3f0b1e77.js";import"./app-57141eb6.js";import"./InputError-04606408.js";import"./InputLabel-cc17dad0.js";import"./SecondaryButton-178d34be.js";const le={key:0,class:"text-lg mt-2 mb-5 text-red-600"},ae={class:"space-y-4"},ne={class:"px-4 sm:px-0"},ie={class:"rounded-lg overflow-hidden w-fit gap-8"},de={class:"rounded-lg overflow-hidden w-fit gap-8 my-2"},pe={class:"mx-4 pt-1 pb-3 inline-flex"},ce=e("label",{for:"onlySupervis",class:"mx-2"},"Mostrar solo supervisores",-1),ue={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},me={class:"flex justify-between p-2"},fe={class:"flex space-x-2"},ge={class:"overflow-x-auto scrollbar-table"},ye={class:"w-full"},he={class:"uppercase text-sm border-t border-gray-200 dark:border-gray-700"},be={class:"dark:bg-gray-900/50 text-left"},_e={class:"px-2 py-4 text-center"},ve=e("th",{class:"px-2 py-4 text-center"},"#",-1),we={class:"flex justify-between items-center"},ke={class:"flex justify-between items-center"},xe=e("span",null," Identificacion ",-1),Ce={class:"flex justify-between items-center"},Se={class:"px-2 py-4"},$e={class:"flex justify-between items-center"},Oe={class:"flex justify-between items-center"},Ie={class:"flex justify-between items-center"},je={class:"flex justify-between items-center"},Ne={class:"flex justify-between items-center"},Ve={class:"px-2 py-4 cursor-not-allowed"},Be={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},Ee=["value"],Pe={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},De={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ue={class:"flex justify-start items-center"},Ae={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Te={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Le={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Fe={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Me={key:0},Re={class:"whitespace-nowrap py-4 px-2 sm:py-3"},qe={class:"whitespace-nowrap py-4 px-2 sm:py-3"},He={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Je={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Xe={class:"whitespace-nowrap p-4 sm:p-3"},ze={class:"flex justify-center"},Ge={class:"rounded-md overflow-hidden"},Ke={class:"flex justify-between items-center p-2 border-t border-gray-200 dark:border-gray-700"},hs={__name:"Index",props:{title:String,filters:Object,users:Object,roles:Object,cargos:Object,centros:Object,breadcrumbs:Object,perPage:Number,sexoSelect:Object,onlySupervis:Number,superviNullCentro:Number},setup(_){const a=_,{_:N,debounce:V,pickBy:B}=L,s=D({params:{search:a.filters.search,field:a.filters.field,order:a.filters.order,perPage:a.perPage,onlySupervis:a.onlySupervis},selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,EdiCentroOpen:!1,deleteOpen:!1,deleteBulkOpen:!1,user:null,dataSet:U().props.app.perpage}),m=o=>{s.params.field=o,s.params.order=s.params.order==="asc"?"desc":"asc",console.log(s.params.order),console.log(s.params.field)};A(()=>N.cloneDeep(s.params),V(()=>{let o=B(s.params);console.log("ðŸ§ˆ debu params:",o),T.get(route("user.index"),o,{replace:!0,preserveState:!0,preserveScroll:!0})},15));const E=o=>{var r;o.target.checked===!1?s.selectedId=[]:(r=a.users)==null||r.data.forEach(g=>{s.selectedId.push(g.id)})},P=()=>{var o;((o=a.users)==null?void 0:o.data.length)==s.selectedId.length?s.multipleSelect=!0:s.multipleSelect=!1};return s.params.onlySupervis=s.params.onlySupervis===null?!1:s.params.onlySupervis,(o,r)=>{const g=R("tooltip");return c(),y(C,null,[l(i(F),{title:a.title},null,8,["title"]),l(q,null,{default:p(()=>[l(H,{title:_.title,breadcrumbs:_.breadcrumbs},null,8,["title","breadcrumbs"]),a.superviNullCentro?S("",!0):(c(),y("p",le," Hay supervisores sin centro")),e("div",ae,[e("div",ne,[e("div",ie,[d(l(k,{class:"rounded-md mx-2",onClick:r[0]||(r[0]=t=>s.createOpen=!0)},{default:p(()=>[h(n(o.lang().button.add),1)]),_:1},512),[[u,o.can(["create user"])]]),d(l(i(w),{href:o.route("IndexTrashed"),class:"mx-1 bg-gray-700/40 dark:bg-gray-800/40 text-white rounded-lg hover:bg-primary dark:hover:bg-primary"},{default:p(()=>[d(l(k,{class:"flex items-center px-4"},{default:p(()=>[h(" Desvinculados ")]),_:1},512),[[u,o.can(["create user"])]])]),_:1},8,["href"]),[[u,o.can(["update user"])]]),d(l(i(w),{href:o.route("user.uploadexcel"),class:"mx-2 bg-gray-700/40 dark:bg-gray-800/40 text-white rounded-lg hover:bg-primary dark:hover:bg-primary"},{default:p(()=>[d(l(k,{class:"flex items-center px-4"},{default:p(()=>[h(" Exportar e Importar "),l(i(G),{class:"w-3 h-3 ml-2 mb-1"})]),_:1},512),[[u,o.can(["update user"])&&a.superviNullCentro]])]),_:1},8,["href"]),[[u,o.can(["update user"])]]),l(Z,{show:s.createOpen,onClose:r[1]||(r[1]=t=>s.createOpen=!1),roles:a.roles,cargos:a.cargos,centros:a.centros,sexoSelect:a.sexoSelect,title:a.title},null,8,["show","roles","cargos","centros","sexoSelect","title"]),l(ee,{show:s.editOpen,onClose:r[2]||(r[2]=t=>s.editOpen=!1),user:s.user,roles:a.roles,cargos:a.cargos,centros:a.centros,sexoSelect:a.sexoSelect,title:a.title},null,8,["show","user","roles","cargos","centros","sexoSelect","title"]),l(se,{show:s.EdiCentroOpen,onClose:r[3]||(r[3]=t=>s.EdiCentroOpen=!1),user:s.user,centros:a.centros,title:a.title},null,8,["show","user","centros","title"]),l(te,{show:s.deleteOpen,onClose:r[4]||(r[4]=t=>s.deleteOpen=!1),user:s.user,title:a.title},null,8,["show","user","title"]),l(re,{show:s.deleteBulkOpen,onClose:r[5]||(r[5]=t=>(s.deleteBulkOpen=!1,s.multipleSelect=!1,s.selectedId=[])),selectedId:s.selectedId,title:a.title},null,8,["show","selectedId","title"])]),e("div",de,[e("div",pe,[h("â€Ž "),d(e("input",{id:"onlySupervis",type:"checkbox","onUpdate:modelValue":r[6]||(r[6]=t=>s.params.onlySupervis=t),class:"inline-flex items-center p-3 border-2 border-sky-500 rounded-md font-semibold hover:bg-primary/80 dark:hover:bg-primary/90 focus:bg-primary/80 dark:focus:bg-primary/80 active:bg-primary dark:active:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-primary transition ease-in-out duration-150 disabled:bg-primary/80"},null,512),[[$,s.params.onlySupervis]]),ce])])]),e("div",ue,[e("div",me,[e("div",fe,[l(X,{modelValue:s.params.perPage,"onUpdate:modelValue":r[7]||(r[7]=t=>s.params.perPage=t),dataSet:s.dataSet},null,8,["modelValue","dataSet"]),d((c(),b(I,{onClick:r[8]||(r[8]=t=>s.deleteBulkOpen=!0),class:"px-3 py-1.5"},{default:p(()=>[l(i(j),{class:"w-5 h-5"})]),_:1})),[[u,s.selectedId.length!=0&&o.can(["delete user"])],[g,o.lang().tooltip.delete_selected]])]),l(J,{modelValue:s.params.search,"onUpdate:modelValue":r[9]||(r[9]=t=>s.params.search=t),type:"text",class:"block w-3/6 md:w-2/6 lg:w-1/6 rounded-lg",placeholder:"Buscar por nombre o correo"},null,8,["modelValue"])]),e("div",ge,[e("table",ye,[e("thead",he,[e("tr",be,[e("th",_e,[l(oe,{checked:s.multipleSelect,"onUpdate:checked":r[10]||(r[10]=t=>s.multipleSelect=t),onChange:E},null,8,["checked"])]),ve,e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[11]||(r[11]=t=>m("name"))},[e("div",we,[e("span",null,n(o.lang().label.name),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[12]||(r[12]=t=>m("cedula"))},[e("div",ke,[xe,l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[13]||(r[13]=t=>m("cargo_id"))},[e("div",Ce,[e("span",null,n(o.lang().label.cargo),1),l(i(f),{class:"w-4 h-4"})])]),e("th",Se,n(o.lang().label.role),1),e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[14]||(r[14]=t=>m("celular"))},[e("div",$e,[e("span",null,n(o.lang().label.celular),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[15]||(r[15]=t=>m("fecha_de_ingreso"))},[e("div",Oe,[e("span",null,n(o.lang().label.fecha_de_ingreso),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[16]||(r[16]=t=>m("centro_costo_id"))},[e("div",Ie,[e("span",null,n(o.lang().label.centro_costo),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[17]||(r[17]=t=>m("salario"))},[e("div",je,[e("span",null,n(o.lang().label.salario),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[18]||(r[18]=t=>m("updated_at"))},[e("div",Ne,[e("span",null,n(o.lang().label.updated),1),l(i(f),{class:"w-4 h-4"})])]),e("th",Ve,n(o.lang().label.Action),1)])]),e("tbody",null,[(c(!0),y(C,null,M(_.users.data,(t,x)=>(c(),y("tr",{key:x,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[e("td",Be,[d(e("input",{class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:P,value:t.id,"onUpdate:modelValue":r[19]||(r[19]=v=>s.selectedId=v)},null,40,Ee),[[$,s.selectedId]])]),e("td",Pe,n(++x),1),e("td",De,[e("span",Ue,n(t.name),1),e("small",null,n(t.email),1)]),e("td",Ae,n(t.cedula),1),e("td",Te,n(t.cargo.length===0?"No tiene cargo":t.cargo.nombre),1),e("td",Le,n(t.roles.length===0?"No tiene rol":t.roles[0].name),1),e("td",Fe,[h(n(t.celular)+" ",1),t.telefono&&t.telefono!==t.celular?(c(),y("span",Me," / "+n(t.telefono),1)):S("",!0)]),e("td",Re,n(t.fecha_de_ingreso),1),e("td",qe,n(t.cc),1),e("td",He,n(i(Y)(t.salario,0,1)),1),e("td",Je,n(t.updated_at),1),e("td",Xe,[e("div",ze,[d((c(),b(i(w),{href:o.route("user.showReporte",t.id),type:"button",class:"inline-flex items-center p-1.5 bg-gray-600 border border-transparent rounded-l-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-500 active:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-250"},{default:p(()=>[l(i(K),{class:"w-4 h-4"})]),_:2},1032,["href"])),[[u,o.can(["update centroCostos"])],[g,o.lang().tooltip.seeReport]]),e("div",Ge,[d((c(),b(O,{type:"button",onClick:v=>(s.editOpen=!0,s.user=t),class:"px-2 py-1.5 rounded-sm mx-0.5"},{default:p(()=>[l(i(Q),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[u,o.can(["update user"])],[g,o.lang().tooltip.edit]]),d((c(),b(O,{type:"button",onClick:v=>(s.EdiCentroOpen=!0,s.user=t),class:"px-2 py-1.5 rounded-sm mx-0.5"},{default:p(()=>[l(i(W),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[u,o.can(["update user"])&&t.roles[0].name==="supervisor"],[g,"Asignar"]]),d((c(),b(I,{type:"button",onClick:v=>(s.deleteOpen=!0,s.user=t),class:"px-2 py-1.5 rounded-none"},{default:p(()=>[l(i(j),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[u,o.can(["delete user"])],[g,o.lang().tooltip.delete]])])])])]))),128))])])]),e("div",Ke,[l(z,{links:a.users,filters:s.params},null,8,["links","filters"])])])])]),_:1})],64)}}};export{hs as default};
