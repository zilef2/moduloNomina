import{l as P,J as U,m as D,O as E,f as _,a as r,u as i,w as u,F as x,p as A,o as m,X as T,b as e,q as p,s as f,d as w,t as a,h as k,A as S,c as h,x as F,y as M}from"./app-1163a5a6.js";import{_ as R}from"./AuthenticatedLayout-0be2cef1.js";import{_ as q}from"./Breadcrumb-db0acd6b.js";import{a as J}from"./TextInput-e3d3e8ef.js";import{_ as C}from"./PrimaryButton-4edf888a.js";import{_ as L}from"./InfoButton-90a373ae.js";import{_ as X}from"./SelectInput-80e572af.js";import{_ as $}from"./DangerButton-954a992c.js";import{_ as z}from"./Pagination-7d80b58e.js";import{S as G,T as O,C as c,E as H,P as K}from"./index-9a2dc383.js";import{n as Q}from"./global-4f731bd7.js";import W from"./Create-d166dc9d.js";import Y from"./Edit-2d09e1c3.js";import Z from"./Delete-9b7de75f.js";import ee from"./DeleteBulk-2266f8ef.js";import{_ as se}from"./Checkbox-9680a516.js";import"./InputError-a6fa3c9e.js";import"./SecondaryButton-1c05a758.js";const te={class:"space-y-4"},le={class:"px-4 sm:px-0"},oe={class:"rounded-lg overflow-hidden w-fit gap-8"},re={class:"mx-4 pt-1 pb-3 inline-flex"},ae={for:"onlySupervis",class:"mx-2"},ne={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},ie={class:"flex justify-between p-2"},de={class:"flex space-x-2"},pe={class:"overflow-x-auto scrollbar-table"},ce={class:"w-full"},ue={class:"uppercase text-sm border-t border-gray-200 dark:border-gray-700"},me={class:"dark:bg-gray-900/50 text-left"},fe={class:"px-2 py-4 text-center"},ye=e("th",{class:"px-2 py-4 text-center"},"#",-1),ge={class:"flex justify-between items-center"},he={class:"flex justify-between items-center"},be=e("span",null," Identificacion ",-1),_e={class:"flex justify-between items-center"},we={class:"px-2 py-4"},ve={class:"flex justify-between items-center"},xe={class:"flex justify-between items-center"},ke={class:"flex justify-between items-center"},Se={class:"flex justify-between items-center"},Ce={class:"flex justify-between items-center"},$e={class:"flex justify-between items-center"},Oe={class:"px-2 py-4 cursor-not-allowed"},je={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},Ie=["value"],Ne={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},Ve={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Be={class:"flex justify-start items-center"},Pe={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ue={class:"whitespace-nowrap py-4 px-2 sm:py-3"},De={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ee={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ae={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Te={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Fe={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Me={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Re={class:"whitespace-nowrap py-4 px-2 sm:py-3"},qe={class:"whitespace-nowrap p-4 sm:p-3"},Je={class:"flex justify-center"},Le={class:"rounded-md overflow-hidden"},Xe={class:"flex justify-between items-center p-2 border-t border-gray-200 dark:border-gray-700"},ps={__name:"Index",props:{title:String,filters:Object,users:Object,roles:Object,cargos:Object,centros:Object,breadcrumbs:Object,perPage:Number,sexoSelect:Object,onlySupervis:Number,superviNullCentro:Number},setup(g){const n=g,{_:j,debounce:I,pickBy:N}=A,s=P({params:{search:n.filters.search,field:n.filters.field,order:n.filters.order,perPage:n.perPage,onlySupervis:n.onlySupervis},selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,deleteOpen:!1,deleteBulkOpen:!1,user:null,dataSet:U().props.app.perpage}),d=o=>{s.params.field=o,s.params.order=s.params.order==="asc"?"desc":"asc",console.log(s.params.order),console.log(s.params.field)};D(()=>j.cloneDeep(s.params),I(()=>{let o=N(s.params);console.log("ðŸ§ˆ debu params:",o),E.get(route("user.index"),o,{replace:!0,preserveState:!0,preserveScroll:!0})},15));const V=o=>{var t;o.target.checked===!1?s.selectedId=[]:(t=n.users)==null||t.data.forEach(y=>{s.selectedId.push(y.id)})},B=()=>{var o;((o=n.users)==null?void 0:o.data.length)==s.selectedId.length?s.multipleSelect=!0:s.multipleSelect=!1};return s.params.onlySupervis=s.params.onlySupervis===null?!1:s.params.onlySupervis,(o,t)=>{const y=M("tooltip");return m(),_(x,null,[r(i(T),{title:n.title},null,8,["title"]),r(R,null,{default:u(()=>[r(q,{title:g.title,breadcrumbs:g.breadcrumbs},null,8,["title","breadcrumbs"]),e("div",te,[e("div",le,[e("div",oe,[p(r(C,{class:"rounded-md mx-2",onClick:t[0]||(t[0]=l=>s.createOpen=!0)},{default:u(()=>[w(a(o.lang().button.add),1)]),_:1},512),[[f,o.can(["create user"])]]),p(r(i(k),{href:o.route("user.uploadexcel"),class:"bg-gray-700/40 dark:bg-gray-800/40 text-white rounded-lg hover:bg-primary dark:hover:bg-primary"},{default:u(()=>[p(r(C,{class:"flex items-center px-4"},{default:u(()=>[w(" Exportar e Importar "),r(i(G),{class:"w-3 h-3 ml-2 mb-1"})]),_:1},512),[[f,o.can(["update user"])&&n.superviNullCentro==0]])]),_:1},8,["href"]),[[f,o.can(["update user"])]]),e("div",re,[w("â€Ž "),p(e("input",{id:"onlySupervis",type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=l=>s.params.onlySupervis=l),class:"inline-flex items-center p-3 border-2 border-sky-500 rounded-md font-semibold hover:bg-primary/80 dark:hover:bg-primary/90 focus:bg-primary/80 dark:focus:bg-primary/80 active:bg-primary dark:active:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-primary transition ease-in-out duration-150 disabled:bg-primary/80"},null,512),[[S,s.params.onlySupervis]]),e("label",ae,"Mostrar solo supervisores ("+a(n.superviNullCentro)+")",1)]),r(W,{show:s.createOpen,onClose:t[2]||(t[2]=l=>s.createOpen=!1),roles:n.roles,cargos:n.cargos,centros:n.centros,sexoSelect:n.sexoSelect,title:n.title},null,8,["show","roles","cargos","centros","sexoSelect","title"]),r(Y,{show:s.editOpen,onClose:t[3]||(t[3]=l=>s.editOpen=!1),user:s.user,roles:n.roles,cargos:n.cargos,centros:n.centros,sexoSelect:n.sexoSelect,title:n.title},null,8,["show","user","roles","cargos","centros","sexoSelect","title"]),r(Z,{show:s.deleteOpen,onClose:t[4]||(t[4]=l=>s.deleteOpen=!1),user:s.user,title:n.title},null,8,["show","user","title"]),r(ee,{show:s.deleteBulkOpen,onClose:t[5]||(t[5]=l=>(s.deleteBulkOpen=!1,s.multipleSelect=!1,s.selectedId=[])),selectedId:s.selectedId,title:n.title},null,8,["show","selectedId","title"])])]),e("div",ne,[e("div",ie,[e("div",de,[r(X,{modelValue:s.params.perPage,"onUpdate:modelValue":t[6]||(t[6]=l=>s.params.perPage=l),dataSet:s.dataSet},null,8,["modelValue","dataSet"]),p((m(),h($,{onClick:t[7]||(t[7]=l=>s.deleteBulkOpen=!0),class:"px-3 py-1.5"},{default:u(()=>[r(i(O),{class:"w-5 h-5"})]),_:1})),[[f,s.selectedId.length!=0&&o.can(["delete user"])],[y,o.lang().tooltip.delete_selected]])]),r(J,{modelValue:s.params.search,"onUpdate:modelValue":t[8]||(t[8]=l=>s.params.search=l),type:"text",class:"block w-3/6 md:w-2/6 lg:w-1/6 rounded-lg",placeholder:"Buscar por nombre o correo"},null,8,["modelValue"])]),e("div",pe,[e("table",ce,[e("thead",ue,[e("tr",me,[e("th",fe,[r(se,{checked:s.multipleSelect,"onUpdate:checked":t[9]||(t[9]=l=>s.multipleSelect=l),onChange:V},null,8,["checked"])]),ye,e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[10]||(t[10]=l=>d("name"))},[e("div",ge,[e("span",null,a(o.lang().label.name),1),r(i(c),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[11]||(t[11]=l=>d("cedula"))},[e("div",he,[be,r(i(c),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[12]||(t[12]=l=>d("cargo_id"))},[e("div",_e,[e("span",null,a(o.lang().label.cargo),1),r(i(c),{class:"w-4 h-4"})])]),e("th",we,a(o.lang().label.role),1),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[13]||(t[13]=l=>d("celular"))},[e("div",ve,[e("span",null,a(o.lang().label.celular),1),r(i(c),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[14]||(t[14]=l=>d("telefono"))},[e("div",xe,[e("span",null,a(o.lang().label.telefono),1),r(i(c),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[15]||(t[15]=l=>d("fecha_de_ingreso"))},[e("div",ke,[e("span",null,a(o.lang().label.fecha_de_ingreso),1),r(i(c),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[16]||(t[16]=l=>d("centro_costo_id"))},[e("div",Se,[e("span",null,a(o.lang().label.centro_costo),1),r(i(c),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[17]||(t[17]=l=>d("salario"))},[e("div",Ce,[e("span",null,a(o.lang().label.salario),1),r(i(c),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[18]||(t[18]=l=>d("updated_at"))},[e("div",$e,[e("span",null,a(o.lang().label.updated),1),r(i(c),{class:"w-4 h-4"})])]),e("th",Oe,a(o.lang().label.Action),1)])]),e("tbody",null,[(m(!0),_(x,null,F(g.users.data,(l,v)=>(m(),_("tr",{key:v,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[e("td",je,[p(e("input",{class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:B,value:l.id,"onUpdate:modelValue":t[19]||(t[19]=b=>s.selectedId=b)},null,40,Ie),[[S,s.selectedId]])]),e("td",Ne,a(++v),1),e("td",Ve,[e("span",Be,a(l.name),1),e("small",null,a(l.email),1)]),e("td",Pe,a(l.cedula),1),e("td",Ue,a(l.cargo.length==0?"No tiene cargo":l.cargo.nombre),1),e("td",De,a(l.roles.length==0?"No tiene rol":l.roles[0].name),1),e("td",Ee,a(l.celular),1),e("td",Ae,a(l.telefono),1),e("td",Te,a(l.fecha_de_ingreso),1),e("td",Fe,a(l.cc),1),e("td",Me,a(i(Q)(l.salario,0,1)),1),e("td",Re,a(l.updated_at),1),e("td",qe,[e("div",Je,[p((m(),h(i(k),{href:o.route("user.showReporte",l.id),type:"button",class:"inline-flex items-center p-1.5 bg-gray-600 border border-transparent rounded-l-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-500 active:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150"},{default:u(()=>[r(i(H),{class:"w-4 h-4"})]),_:2},1032,["href"])),[[f,o.can(["update centroCostos"])],[y,o.lang().tooltip.seeReport]]),e("div",Le,[p((m(),h(L,{type:"button",onClick:b=>(s.editOpen=!0,s.user=l),class:"px-2 py-1.5 rounded-sm mx-0.5"},{default:u(()=>[r(i(K),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[f,o.can(["update user"])],[y,o.lang().tooltip.edit]]),p((m(),h($,{type:"button",onClick:b=>(s.deleteOpen=!0,s.user=l),class:"px-2 py-1.5 rounded-none"},{default:u(()=>[r(i(O),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[f,o.can(["delete user"])],[y,o.lang().tooltip.delete]])])])])]))),128))])])]),e("div",Xe,[r(z,{links:n.users,filters:s.params},null,8,["links","filters"])])])])]),_:1})],64)}}};export{ps as default};
