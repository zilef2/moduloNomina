import{o as u,f as y,b as e,p as U,Q as A,q as F,F as M,s as Z,a as l,u as i,w as c,v as O,x as R,Z as T,g as v,y as d,z as p,d as b,t as n,i as x,B as j,c as _,A as q}from"./app-c790f4bd.js";import{_ as z,b as H}from"./AuthenticatedLayout-4d34cfbe.js";import{_ as L}from"./Breadcrumb-45a0c68e.js";import{_ as Q}from"./TextInput-987096fc.js";import{_ as k}from"./PrimaryButton-f3c0a7f8.js";import{_ as V,r as G}from"./InfoButton-17984b3a.js";import{_ as J}from"./SelectInput-f37c7ff6.js";import{_ as I}from"./DangerButton-de0bcc20.js";import{_ as K}from"./Pagination-7eab9633.js";import{n as W}from"./global-683f42af.js";import X from"./Create-558a5920.js";import Y from"./Edit-a4438242.js";import ee from"./EdiCentro-1bcc2d98.js";import se from"./Delete-3d1c6fd8.js";import te from"./DeleteBulk-b1efc8df.js";import{_ as re}from"./Checkbox-f0ab4c20.js";import{r as N}from"./TrashIcon-ff7a07f6.js";import{r as f}from"./ChevronUpDownIcon-2d2ae1c0.js";import{r as oe}from"./EyeIcon-0e327855.js";import"./index-6634cd3b.js";import"./app-57141eb6.js";import"./InputError-ac81a49a.js";import"./InputLabel-2a5bfa3f.js";import"./SecondaryButton-2843ee84.js";function le(h,$){return u(),y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M19.902 4.098a3.75 3.75 0 0 0-5.304 0l-4.5 4.5a3.75 3.75 0 0 0 1.035 6.037.75.75 0 0 1-.646 1.353 5.25 5.25 0 0 1-1.449-8.45l4.5-4.5a5.25 5.25 0 1 1 7.424 7.424l-1.757 1.757a.75.75 0 1 1-1.06-1.06l1.757-1.757a3.75 3.75 0 0 0 0-5.304Zm-7.389 4.267a.75.75 0 0 1 1-.353 5.25 5.25 0 0 1 1.449 8.45l-4.5 4.5a5.25 5.25 0 1 1-7.424-7.424l1.757-1.757a.75.75 0 1 1 1.06 1.06l-1.757 1.757a3.75 3.75 0 1 0 5.304 5.304l4.5-4.5a3.75 3.75 0 0 0-1.035-6.037.75.75 0 0 1-.354-1Z","clip-rule":"evenodd"})])}const ae={key:0,class:"text-lg mt-2 mb-5 text-red-600"},ne={class:"space-y-4"},ie={class:"px-4 sm:px-0"},de={class:"rounded-lg overflow-hidden w-fit gap-8"},pe={class:"rounded-lg overflow-hidden w-fit gap-8 my-2"},ce={class:"mx-4 pt-1 pb-3 inline-flex"},ue=e("label",{for:"onlySupervis",class:"mx-2"},"Mostrar solo supervisores",-1),me={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},fe={class:"flex justify-between p-2"},ge={class:"flex space-x-2"},ye={class:"overflow-x-auto scrollbar-table"},he={class:"w-full"},be={class:"uppercase text-sm border-t border-gray-200 dark:border-gray-700"},_e={class:"dark:bg-gray-900/50 text-left"},we={class:"px-2 py-4 text-center"},ve={class:"px-2 py-4 text-center"},xe={class:"flex justify-between items-center"},ke={class:"flex justify-between items-center"},$e=e("span",null," Identificacion ",-1),Ce={class:"flex justify-between items-center"},Se=e("span",null," Numero de contrato ",-1),Oe={class:"flex justify-between items-center"},je={class:"px-2 py-4"},Ve={class:"flex justify-between items-center"},Ie={class:"flex justify-between items-center"},Ne={class:"flex w-20 justify-between items-center"},Be={class:"flex justify-between items-center"},Ee={class:"flex justify-between items-center"},De={class:"px-2 py-4 cursor-not-allowed"},Pe={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},Ue=["value"],Ae={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Fe={class:"flex justify-start items-center"},Me={class:"text-sm"},Ze={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Re={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Te={class:"whitespace-nowrap py-4 px-2 sm:py-3 font-bold"},qe={class:"whitespace-nowrap py-4 px-2 sm:py-3"},ze={class:"whitespace-nowrap py-4 px-2 sm:py-3"},He={key:0},Le={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Qe={class:"w-2 py-4 px-2 sm:py-3 truncate"},Ge={class:"min-w-[20px] max-w-[300px] py-4 px-2 sm:py-3 truncate"},Je={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ke={class:"whitespace-nowrap py-4 px-2 sm:py-3"},We={class:"whitespace-nowrap p-4 sm:p-3"},Xe={class:"flex justify-center"},Ye={class:"rounded-md overflow-hidden"},es={class:"flex justify-between items-center p-2 border-t border-gray-200 dark:border-gray-700"},Cs={__name:"Index",props:{title:String,filters:Object,users:Object,roles:Object,cargos:Object,centros:Object,breadcrumbs:Object,perPage:Number,sexoSelect:Object,onlySupervis:Number,superviNullCentro:Number},setup(h){const{_:$,debounce:B,pickBy:E}=R,a=h,s=U({params:{search:a.filters.search,field:a.filters.field,order:a.filters.order,perPage:a.perPage,onlySupervis:a.onlySupervis},selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,EdiCentroOpen:!1,deleteOpen:!1,deleteBulkOpen:!1,user:null,dataSet:A().props.app.perpage,columsVisible:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0,14:!0,15:!0}}),m=o=>{s.params.field=o,s.params.order=s.params.order==="asc"?"desc":"asc",console.log(s.params.order),console.log(s.params.field)};F(()=>$.cloneDeep(s.params),B(()=>{let o=E(s.params);console.log("ðŸ§ˆ debu params:",o),M.get(route("user.index"),o,{replace:!0,preserveState:!0,preserveScroll:!0})},15));const D=o=>{var r;o.target.checked===!1?s.selectedId=[]:(r=a.users)==null||r.data.forEach(g=>{s.selectedId.push(g.id)})},P=()=>{var o;((o=a.users)==null?void 0:o.data.length)==s.selectedId.length?s.multipleSelect=!0:s.multipleSelect=!1};return s.params.onlySupervis=s.params.onlySupervis===null?!1:s.params.onlySupervis,(o,r)=>{const g=Z("tooltip");return u(),y(O,null,[l(i(T),{title:a.title},null,8,["title"]),l(z,null,{default:c(()=>[l(L,{title:h.title,breadcrumbs:h.breadcrumbs},null,8,["title","breadcrumbs"]),a.superviNullCentro?v("",!0):(u(),y("p",ae," Hay supervisores sin centro")),e("div",ne,[e("div",ie,[e("div",de,[d(l(k,{class:"rounded-md mx-2",onClick:r[0]||(r[0]=t=>s.createOpen=!0)},{default:c(()=>[b(n(o.lang().button.add),1)]),_:1},512),[[p,o.can(["create user"])]]),d(l(i(x),{href:o.route("IndexTrashed"),class:"mx-1 bg-gray-700/40 dark:bg-gray-800/40 text-white rounded-lg hover:bg-primary dark:hover:bg-primary"},{default:c(()=>[d(l(k,{class:"flex items-center px-4"},{default:c(()=>[b(" Desvinculados ")]),_:1},512),[[p,o.can(["create user"])]])]),_:1},8,["href"]),[[p,o.can(["update user"])]]),d(l(i(x),{href:o.route("user.uploadexcel"),class:"mx-2 bg-gray-700/40 dark:bg-gray-800/40 text-white rounded-lg hover:bg-primary dark:hover:bg-primary"},{default:c(()=>[d(l(k,{class:"flex items-center px-4"},{default:c(()=>[b(" Exportar e Importar "),l(i(H),{class:"w-3 h-3 ml-2 mb-1"})]),_:1},512),[[p,o.can(["update user"])&&a.superviNullCentro]])]),_:1},8,["href"]),[[p,o.can(["update user"])]]),l(X,{show:s.createOpen,onClose:r[1]||(r[1]=t=>s.createOpen=!1),roles:a.roles,cargos:a.cargos,centros:a.centros,sexoSelect:a.sexoSelect,title:a.title},null,8,["show","roles","cargos","centros","sexoSelect","title"]),l(Y,{show:s.editOpen,onClose:r[2]||(r[2]=t=>s.editOpen=!1),user:s.user,roles:a.roles,cargos:a.cargos,centros:a.centros,sexoSelect:a.sexoSelect,title:a.title},null,8,["show","user","roles","cargos","centros","sexoSelect","title"]),l(ee,{show:s.EdiCentroOpen,onClose:r[3]||(r[3]=t=>s.EdiCentroOpen=!1),user:s.user,centros:a.centros,title:a.title},null,8,["show","user","centros","title"]),l(se,{show:s.deleteOpen,onClose:r[4]||(r[4]=t=>s.deleteOpen=!1),user:s.user,title:a.title},null,8,["show","user","title"]),l(te,{show:s.deleteBulkOpen,onClose:r[5]||(r[5]=t=>(s.deleteBulkOpen=!1,s.multipleSelect=!1,s.selectedId=[])),selectedId:s.selectedId,title:a.title},null,8,["show","selectedId","title"])]),e("div",pe,[e("div",ce,[b("â€Ž "),d(e("input",{id:"onlySupervis",type:"checkbox","onUpdate:modelValue":r[6]||(r[6]=t=>s.params.onlySupervis=t),class:"inline-flex items-center p-3 border-2 border-sky-500 rounded-md font-semibold hover:bg-primary/80 dark:hover:bg-primary/90 focus:bg-primary/80 dark:focus:bg-primary/80 active:bg-primary dark:active:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-primary transition ease-in-out duration-150 disabled:bg-primary/80"},null,512),[[j,s.params.onlySupervis]]),ue])])]),e("div",me,[e("div",fe,[e("div",ge,[l(J,{modelValue:s.params.perPage,"onUpdate:modelValue":r[7]||(r[7]=t=>s.params.perPage=t),dataSet:s.dataSet},null,8,["modelValue","dataSet"]),d((u(),_(I,{onClick:r[8]||(r[8]=t=>s.deleteBulkOpen=!0),class:"px-3 py-1.5"},{default:c(()=>[l(i(N),{class:"w-5 h-5"})]),_:1})),[[p,s.selectedId.length!=0&&o.can(["delete user"])],[g,o.lang().tooltip.delete_selected]])]),l(Q,{modelValue:s.params.search,"onUpdate:modelValue":r[9]||(r[9]=t=>s.params.search=t),type:"text",class:"block w-3/6 md:w-2/6 lg:w-1/6 rounded-lg",placeholder:"Buscar por nombre o correo"},null,8,["modelValue"])]),e("div",ye,[e("table",he,[e("thead",be,[e("tr",_e,[e("th",we,[l(re,{checked:s.multipleSelect,"onUpdate:checked":r[10]||(r[10]=t=>s.multipleSelect=t),onChange:D},null,8,["checked"])]),d(e("th",ve,"#",512),[[p,s.columsVisible[0]]]),d(e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[11]||(r[11]=t=>m("name"))},[e("div",xe,[e("span",null,n(o.lang().label.name),1),l(i(f),{class:"w-4 h-4"})])],512),[[p,s.columsVisible[1]]]),d(e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[12]||(r[12]=t=>m("cedula"))},[e("div",ke,[$e,l(i(f),{class:"w-4 h-4"})])],512),[[p,s.columsVisible[2]]]),d(e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[13]||(r[13]=t=>m("numero_contrato"))},[e("div",Ce,[Se,l(i(f),{class:"w-4 h-4"})])],512),[[p,s.columsVisible[3]]]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[14]||(r[14]=t=>m("cargo_id"))},[e("div",Oe,[e("span",null,n(o.lang().label.cargo),1),l(i(f),{class:"w-4 h-4"})])]),e("th",je,n(o.lang().label.role),1),e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[15]||(r[15]=t=>m("celular"))},[e("div",Ve,[e("span",null,n(o.lang().label.celular),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[16]||(r[16]=t=>m("fecha_de_ingreso"))},[e("div",Ie,[e("span",null,n(o.lang().label.fecha_de_ingreso),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 w-20 cursor-pointer",onClick:r[17]||(r[17]=t=>m("centro_costo_id"))},[e("div",Ne,[e("span",null,n(o.lang().label.centro_costo),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[18]||(r[18]=t=>m("salario"))},[e("div",Be,[e("span",null,n(o.lang().label.salario),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[19]||(r[19]=t=>m("updated_at"))},[e("div",Ee,[e("span",null,n(o.lang().label.updated),1),l(i(f),{class:"w-4 h-4"})])]),e("th",De,n(o.lang().label.Action),1)])]),e("tbody",null,[(u(!0),y(O,null,q(h.users.data,(t,C)=>{var S;return u(),y("tr",{key:C,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[e("td",Pe,[d(e("input",{class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:P,value:t.id,"onUpdate:modelValue":r[20]||(r[20]=w=>s.selectedId=w)},null,40,Ue),[[j,s.selectedId]])]),d(e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},n(++C),513),[[p,s.columsVisible[0]]]),d(e("td",Ae,[e("span",Fe,n(t.name),1),e("small",Me,n(t.email),1)],512),[[p,s.columsVisible[1]]]),e("td",Ze,n(t.cedula),1),e("td",Re,n(t.numero_contrato),1),e("td",Te,n(t.cargo.length===0?"No tiene cargo":t.cargo.nombre),1),e("td",qe,n(t.roles.length===0?"No tiene rol":t.roles[0].name),1),e("td",ze,[b(n(t.celular)+" ",1),t.telefono&&t.telefono!==t.celular?(u(),y("span",He," / "+n(t.telefono),1)):v("",!0)]),e("td",Le,n(t.fecha_de_ingreso),1),e("td",Qe,[e("div",Ge,n(t.cc),1)]),e("td",Je,n(i(W)(t.salario,0,1)),1),e("td",Ke,n(t.updated_at),1),e("td",We,[e("div",Xe,[d((u(),_(i(x),{href:o.route("user.showReporte",t.id),type:"button",class:"inline-flex items-center p-1.5 bg-gray-600 border border-transparent rounded-l-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-500 active:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-250"},{default:c(()=>[l(i(oe),{class:"w-4 h-4"})]),_:2},1032,["href"])),[[p,o.can(["update centroCostos"])],[g,o.lang().tooltip.seeReport]]),e("div",Ye,[d((u(),_(V,{type:"button",onClick:w=>(s.editOpen=!0,s.user=t),class:"px-2 py-1.5 rounded-sm mx-0.5"},{default:c(()=>[l(i(G),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[p,o.can(["update user"])],[g,o.lang().tooltip.edit]]),t.roles[0]?d((u(),_(V,{key:0,type:"button",onClick:w=>(s.EdiCentroOpen=!0,s.user=t),class:"px-2 py-1.5 rounded-sm mx-0.5"},{default:c(()=>[l(i(le),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[p,o.can(["update user"])&&((S=t.roles[0])==null?void 0:S.name)==="supervisor"],[g,"Asignar"]]):v("",!0),d((u(),_(I,{type:"button",onClick:w=>(s.deleteOpen=!0,s.user=t),class:"px-2 py-1.5 rounded-none"},{default:c(()=>[l(i(N),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[p,o.can(["delete user"])],[g,o.lang().tooltip.delete]])])])])])}),128))])])]),e("div",es,[l(K,{links:a.users,filters:s.params},null,8,["links","filters"])])])])]),_:1})],64)}}};export{Cs as default};
