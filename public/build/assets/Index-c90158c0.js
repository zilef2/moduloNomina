import{o as n,f as l,r as te,p as ae,J as oe,q as ne,O as le,v as ie,k as de,a as d,u as p,w as f,F as g,s as ce,X as pe,b as r,c as y,d as k,t as c,g as u,x as m,y as b,z as x,A as me,n as N,B as ue,e as he}from"./app-7d8a88a1.js";import{_ as be}from"./AuthenticatedLayout-e41c245c.js";import{_ as ye}from"./Breadcrumb-a945073b.js";import{_ as S}from"./TextInput-dde56339.js";import{_ as H}from"./PrimaryButton-5eb18248.js";import{_ as F}from"./SelectInput-9858eaa9.js";import{_ as T}from"./DangerButton-a9be7388.js";import{_ as fe}from"./Pagination-d051add1.js";import{T as B,C as _e,P as we,a as E,m as ve,X as ge}from"./index-af807553.js";import{_ as ke}from"./Checkbox-87104343.js";import{_ as Q}from"./InfoButton-baf869ec.js";import xe from"./Create-54d96883.js";import Se from"./CreateMassive-bb8be288.js";import L from"./Edit-6276c151.js";import De from"./Delete-2805f54a.js";import Ce from"./DeleteBulk-f7dae049.js";import{a as q,n as z}from"./global-683f42af.js";import{C as Oe,p as $e,a as Ie,b as Ue,B as Ae,c as Me,L as Pe,d as Ve}from"./index-49eac188.js";import{_ as je}from"./InputLabel-5c98cac6.js";import{_ as Re}from"./FilterButtons-0a0b1dc8.js";import Ne from"./Reporte_Super_Edit-a5dd6bd9.js";import"./SecondaryButton-5abc3bad.js";import"./InputError-2b936d61.js";import"./main-16884005.js";import"./app-57141eb6.js";const He=["type"],Fe={__name:"SuccessButton",props:{type:{type:String,default:"submit"}},setup(h){return(e,D)=>(n(),l("button",{type:h.type,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 active:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150"},[te(e.$slots,"default")],8,He))}},Te={class:"space-y-1"},Be={class:"px-4 sm:px-0"},Ee={class:"rounded-lg overflow-hidden w-fit"},Qe={class:"mt-2 inline-flex"},Le={key:2,class:"mx-4 -mt-3"},qe={key:3,class:"mx-4"},ze=r("p",{class:"pt-1 mt-6 font-extrabold"},"Sin reportes",-1),Je=[ze],Xe={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},Ge={class:"flex justify-between p-2"},Ke={class:"flex space-x-2"},We=r("span",{class:"my-auto hidden xl:block"},"Registros por página",-1),Ye=r("span",{class:"my-auto hidden md:block lg:block xl:hidden"},"Reg/página",-1),Ze=r("span",{class:"my-auto md:hidden"},"R/pag",-1),es={class:"flex gap-3"},ss={class:"overflow-x-auto scrollbar-table"},rs={class:"w-full"},ts={class:"uppercase sticky text-sm border-t border-gray-200 dark:border-gray-700"},as={class:"dark:bg-gray-900 text-left"},os={class:"px-2 py-4 text-center"},ns=["onClick"],ls={class:"flex justify-between items-center"},is={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},ds=["value"],cs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},ps={class:"flex justify-start items-center"},ms={class:"flex rounded-md overflow-hidden"},us=["onSubmit"],hs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},bs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},ys={key:0},fs={key:1},_s={key:2},ws={key:3},vs={key:0},gs={key:1},ks={key:2},xs={key:4},Ss={key:0},Ds={key:1},Cs={key:2},Os={key:5},$s={key:6},Is={class:"my-2 py-4 border-t border-gray-200 dark:border-gray-900 hover:bg-sky-200 hover:dark:bg-gray-900/20"},Us=r("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),As={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ms=r("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),Ps={key:0,class:"whitespace-nowrap py-4 px-2 sm:py-3"},Vs=r("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),js=r("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),Rs=r("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),Ns=r("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"}," Total Mes ",-1),Hs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Fs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ts={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Bs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Es={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Qs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ls={class:"whitespace-nowrap py-4 px-2 sm:py-3"},qs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},zs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Js=r("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),Xs=r("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),Gs={class:"flex justify-betwween items-center p-2 border-t border-gray-200 dark:border-gray-700"},Ks={key:0,class:"text-gray-600 body-font overflow-hidden"},Ws={class:"container px-5 py-4 mx-auto"},Ys={class:"flex flex-wrap m-2"},Zs={class:"p-1 md:w-1/2 flex flex-col items-start"},er=r("span",{class:"inline-block py-1 px-2 rounded bg-indigo-50 text-indigo-500 text-xs font-medium tracking-widest"}," Este mes ",-1),sr={key:0,class:"sm:text-3xl text-2xl title-font font-medium text-gray-900 mt-4 mb-4"},rr={class:"m-1 p-1 w-full"},$r={__name:"Index",props:{title:String,filters:Object,fromController:Object,breadcrumbs:Object,perPage:Number,nombresTabla:Array,valoresSelect:Object,showSelect:Object,showUsers:Object,userFiltro:Object,IntegerDefectoSelect:Number,horasemana:Number,startDateMostrar:String,endDateMostrar:String,sumhoras_trabajadas:Number,quincena:Object,nombrePersona:String,numberPermissions:Number,ArrayOrdinarias:Array,sumdiurnas:Number,sumnocturnas:Number,sumextra_diurnas:Number,sumextra_nocturnas:Number,sumdominical_diurno:Number,sumdominical_nocturno:Number,sumdominical_extra_diurno:Number,sumdominical_extra_nocturno:Number,horasTrabajadasHoy:Array,HorasDeCadaSemana:Array,ArrayHorasSemanales:Array},setup(h){var O,$,I,U,A,M,P,V,j,R;const e=h;Oe.register($e,Ie,Ue,Ae,Me,Pe);const{_:D,debounce:J,pickBy:X}=ce,G={responsive:!0,maintainAspectRatio:!0,color:"#000",darkcolor:"#fff"},K={name:"Numero de reportes",datasets:[{label:"Numero de Reportes",data:e.quincena,backgroundColor:"#f87979"}]},s=ae({params:{searchQuincena:(O=e.filters)==null?void 0:O.searchQuincena,searchIncongruencias:($=e.filters)==null?void 0:$.searchIncongruencias,searchHorasD:(I=e.filters)==null?void 0:I.searchHorasD,soloValidos:(U=e.filters)==null?void 0:U.soloValidos,soloQuincena:(A=e.filters)==null?void 0:A.soloQuincena,FiltroUser:(M=e.filters)==null?void 0:M.FiltroUser,search:(P=e.filters)==null?void 0:P.search,searchDDay:(V=e.filters)==null?void 0:V.searchDDay,field:(j=e.filters)==null?void 0:j.field,order:(R=e.filters)==null?void 0:R.order,perPage:e.perPage},selectedId:[],multipleSelect:!1,createOpen:!1,createMassOpen:!1,editOpen:!1,editCorregirOpen:!1,deleteOpen:!1,deleteBulkOpen:!1,generico:null,nope:null,dataSet:oe().props.app.perpage,DiasDeLaSemana:[{value:1,label:"Enero"},{label:"Febrero",value:2},{label:"Marzo",value:3},{label:"Abril",value:4},{label:"Mayo",value:5},{label:"Junio",value:6},{label:"Julio",value:7},{label:"Agosto",value:8},{label:"Septiembre",value:9},{label:"Octubre",value:10},{label:"Noviembre",value:11},{label:"Diciembre",value:12}],Reporte_Super_EditOpen:!1}),W=t=>{t!=null&&e.userFiltro?(t=t.substr(2),s.params.field=t.replace(/ /g,"_"),s.params.order=s.params.order==="asc"?"desc":"asc"):alert("No esta permitido organizar la tabla en esta vista")};ne(()=>D.cloneDeep(s.params),J(()=>{let t=X(s.params);le.get(route("Reportes.index"),t,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const Y=t=>{var o;t.target.checked===!1?s.selectedId=[]:(o=e.fromController)==null||o.data.forEach(_=>{s.selectedId.push(_.id)})},Z=()=>{var t;((t=e.fromController)==null?void 0:t.data.length)==s.selectedId.length?s.multipleSelect=!0:s.multipleSelect=!1},v=ie({valido:!1}),C=t=>{var o;v.valido=t,v.put(route("Reportes.update",(o=s.generico)==null?void 0:o.id),{preserveScroll:!0,onSuccess:()=>{v.reset()},onError:()=>null,onFinish:()=>null})},ee=de([]),se=t=>{ee.value=t,s.params.soloValidos=t[0],s.params.soloQuincena=t[1],s.params.searchIncongruencias=t[2],s.params.searchQuincena=t[3]};return(t,o)=>{const _=me("tooltip");return n(),l(g,null,[d(p(pe),{title:e.title},null,8,["title"]),d(be,null,{default:f(()=>[d(ye,{title:h.title,breadcrumbs:h.breadcrumbs},null,8,["title","breadcrumbs"]),r("div",Te,[r("div",Be,[r("div",Ee,[r("div",Qe,[t.can(["create reporte"])?(n(),y(H,{key:0,class:"rounded-md mx-2 h-8 mt-2",onClick:o[0]||(o[0]=a=>s.createOpen=!0)},{default:f(()=>[k(c(t.lang().button.add),1)]),_:1})):u("",!0),t.can(["isAdmin"])?(n(),y(H,{key:1,class:"rounded-md mx-2 h-8 mt-2",onClick:o[1]||(o[1]=a=>s.createMassOpen=!0)},{default:f(()=>[k(c(t.lang().button.add)+" Masivamente ",1)]),_:1})):u("",!0),e.userFiltro&&e.userFiltro.length>0?m((n(),l("div",Le,[d(je,{for:"centro_costo_id",value:"Filtrar por trabajador"}),d(F,{modelValue:s.params.FiltroUser,"onUpdate:modelValue":o[2]||(o[2]=a=>s.params.FiltroUser=a),dataSet:e.userFiltro,class:"mt-1 block w-full"},null,8,["modelValue","dataSet"])],512)),[[b,t.can(["isingeniero","isadmin","isadministrativo","issupervisor"])&&e.userFiltro]]):m((n(),l("div",qe,Je,512)),[[b,t.can(["isingeniero","isadmin","isadministrativo","issupervisor"])&&e.userFiltro]])]),d(xe,{show:s.createOpen,onClose:o[3]||(o[3]=a=>s.createOpen=!1),title:e.title,valoresSelect:e.valoresSelect,IntegerDefectoSelect:e.IntegerDefectoSelect,horasemana:e.horasemana,startDateMostrar:e.startDateMostrar,endDateMostrar:e.endDateMostrar,numberPermissions:e.numberPermissions,ArrayOrdinarias:e.ArrayOrdinarias,horasTrabajadasHoy:e.horasTrabajadasHoy,HorasDeCadaSemana:e.HorasDeCadaSemana,ArrayHorasSemanales:e.ArrayHorasSemanales},null,8,["show","title","valoresSelect","IntegerDefectoSelect","horasemana","startDateMostrar","endDateMostrar","numberPermissions","ArrayOrdinarias","horasTrabajadasHoy","HorasDeCadaSemana","ArrayHorasSemanales"]),d(Se,{show:s.createMassOpen,onClose:o[4]||(o[4]=a=>s.createMassOpen=!1),title:e.title,valoresSelect:e.valoresSelect,IntegerDefectoSelect:e.IntegerDefectoSelect,horasemana:e.horasemana,startDateMostrar:e.startDateMostrar,endDateMostrar:e.endDateMostrar,numberPermissions:e.numberPermissions,ArrayOrdinarias:e.ArrayOrdinarias},null,8,["show","title","valoresSelect","IntegerDefectoSelect","horasemana","startDateMostrar","endDateMostrar","numberPermissions","ArrayOrdinarias"]),d(L,{show:s.editOpen,onClose:o[5]||(o[5]=a=>s.editOpen=!1),Reporte:s.generico,title:e.title,valoresSelect:e.valoresSelect,showUsers:e.showUsers,correccionUsuario:!1},null,8,["show","Reporte","title","valoresSelect","showUsers"]),d(L,{show:s.editCorregirOpen,onClose:o[6]||(o[6]=a=>s.editCorregirOpen=!1),Reporte:s.generico,title:e.title,valoresSelect:e.valoresSelect,showUsers:e.showUsers,correccionUsuario:!0},null,8,["show","Reporte","title","valoresSelect","showUsers"]),d(Ne,{show:s.Reporte_Super_EditOpen,onClose:o[7]||(o[7]=a=>s.Reporte_Super_EditOpen=!1),Reporte:s.generico,title:e.title,valoresSelect:e.valoresSelect,showUsers:e.showUsers,correccionUsuario:!1},null,8,["show","Reporte","title","valoresSelect","showUsers"]),m(d(De,{show:s.deleteOpen,onClose:o[8]||(o[8]=a=>s.deleteOpen=!1),Reporte:s.generico,title:e.title},null,8,["show","Reporte","title"]),[[b,t.can(["delete reporte"])]]),t.can(["delete reporte"])&&t.can(["updateCorregido reporte"])?(n(),y(Ce,{key:0,show:s.deleteBulkOpen,onClose:o[9]||(o[9]=a=>(s.deleteBulkOpen=!1,s.multipleSelect=!1,s.selectedId=[])),selectedId:s.selectedId,title:e.title},null,8,["show","selectedId","title"])):u("",!0)])]),r("div",Xe,[r("div",Ge,[r("div",Ke,[We,Ye,Ze,h.filters!==null?(n(),y(F,{key:0,modelValue:s.params.perPage,"onUpdate:modelValue":o[10]||(o[10]=a=>s.params.perPage=a),dataSet:s.dataSet},null,8,["modelValue","dataSet"])):u("",!0),m((n(),y(T,{onClick:o[11]||(o[11]=a=>s.deleteBulkOpen=!0),class:"px-3 py-1.5"},{default:f(()=>[d(p(B),{class:"w-5 h-5"})]),_:1})),[[b,s.selectedId.length!=0&&t.can(["delete reporte"])],[_,t.lang().tooltip.delete_selected]])]),r("div",es,[m(d(S,{modelValue:s.params.searchHorasD,"onUpdate:modelValue":o[12]||(o[12]=a=>s.params.searchHorasD=a),type:"number",min:"0",class:"block w-2/3 md:w-full rounded-lg",placeholder:t.lang().placeholder.searchHorasD},null,8,["modelValue","placeholder"]),[[b,e.numberPermissions>1]]),m(d(S,{modelValue:s.params.search,"onUpdate:modelValue":o[13]||(o[13]=a=>s.params.search=a),type:"number",min:"0",max:"12",class:"block w-2/3 md:w-full rounded-lg",placeholder:t.lang().placeholder.searchDates},null,8,["modelValue","placeholder"]),[[b,e.numberPermissions>1]]),m(d(S,{modelValue:s.params.searchDDay,"onUpdate:modelValue":o[14]||(o[14]=a=>s.params.searchDDay=a),type:"number",min:"0",max:"31",class:"block w-2/3 md:w-full rounded-lg",placeholder:t.lang().placeholder.searchDDay},null,8,["modelValue","placeholder"]),[[b,e.numberPermissions>1]]),d(Re,{"onUpdate:checked":se,numberPermissions:e.numberPermissions},null,8,["numberPermissions"])])]),r("div",ss,[r("table",rs,[r("thead",ts,[r("tr",as,[r("th",os,[d(ke,{checked:s.multipleSelect,"onUpdate:checked":o[15]||(o[15]=a=>s.multipleSelect=a),onChange:Y},null,8,["checked"])]),(n(!0),l(g,null,x(h.nombresTabla[0],(a,w)=>(n(),l("th",{key:w,onClick:i=>W(h.nombresTabla[2][w]),class:"px-2 py-4 cursor-pointer hover:bg-sky-50 dark:hover:bg-sky-800"},[r("div",ls,[r("span",null,c(a),1),h.nombresTabla[2][w]!==null?(n(),y(p(_e),{key:0,class:"w-4 h-4"})):u("",!0)])],8,ns))),128))])]),r("tbody",null,[(n(!0),l(g,null,x(h.fromController.data,(a,w)=>(n(),l("tr",{key:w,class:N(["border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20",{"bg-gray-200/75 dark:bg-sky-600":w%2===0}])},[r("td",is,[m(r("input",{type:"checkbox",onChange:Z,value:a.id,"onUpdate:modelValue":o[16]||(o[16]=i=>s.selectedId=i),class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary"},null,40,ds),[[ue,s.selectedId]])]),r("td",cs,[r("div",ps,[r("div",ms,[r("form",{onSubmit:he(C,["prevent"])},[t.can(["update reporte"])?m((n(),y(Q,{key:0,type:"button",onClick:i=>(s.editOpen=!0,s.generico=a),class:"px-2 py-1.5 rounded-sm"},{default:f(()=>[d(p(we),{class:"w-6 h-6"})]),_:2},1032,["onClick"])),[[_,t.lang().tooltip.edit]]):u("",!0),t.can(["update reporte"])?m((n(),y(Fe,{key:1,type:"button",class:N(["mx-1 w-12 h-10 rounded-lg-r",{"opacity-25":p(v).processing}]),disabled:p(v).processing,onClick:i=>(s.generico=a,C(!0))},{default:f(()=>[d(p(E),{class:"w-6 h-6"})]),_:2},1032,["class","disabled","onClick"])),[[_,"Aprobar"]]):u("",!0)],40,us),t.can(["isSuper"])?m((n(),y(Q,{key:0,type:"button",onClick:i=>(s.Reporte_Super_EditOpen=!0,s.generico=a),class:"px-2 py-1.5 rounded-sm"},{default:f(()=>[d(p(ve),{class:"w-5 h-5"})]),_:2},1032,["onClick"])),[[_,"Edit super"]]):u("",!0),t.can(["delete reporte"])?m((n(),y(T,{key:1,type:"button",onClick:i=>(s.deleteOpen=!0,s.generico=a),class:"px-2 py-1.5 rounded-sm"},{default:f(()=>[d(p(B),{class:"w-6 h-6"})]),_:2},1032,["onClick"])),[[_,t.lang().tooltip.delete]]):u("",!0)])])]),r("td",hs,c(w+1),1),r("td",bs,c(h.showSelect[a.centro_costo_id]),1),m(r("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},c(h.showUsers[a.user_id]),513),[[b,t.can(["updateCorregido reporte"])]]),(n(!0),l(g,null,x(h.nombresTabla[1],(i,re)=>(n(),l("td",{key:re,class:"whitespace-nowrap py-4 px-2 sm:py-3"},[i.substr(0,1)==="s"?(n(),l("div",ys,c(a[i.substr(2)]),1)):i.substr(0,1)==="d"?(n(),l("div",fs,c(p(q)(a[i.substr(2)])),1)):i.substr(0,1)==="t"?(n(),l("div",_s,c(p(q)(a[i.substr(2)],"conLaHora")),1)):i.substr(0,1)==="v"?(n(),l("div",ws,[a[i.substr(2)]===0?(n(),l("div",vs)):a[i.substr(2)]===1?(n(),l("div",gs," Si ")):a[i.substr(2)]===2?(n(),l("div",ks," 2 ")):u("",!0)])):i.substr(0,1)==="b"?(n(),l("div",xs,[a[i.substr(2)]===0?(n(),l("div",Ss," Aun no validada")):a[i.substr(2)]===1?(n(),l("div",Ds,[d(p(E),{class:"w-8 h-8 text-green-600"})])):a[i.substr(2)]===2?(n(),l("div",Cs,[d(p(ge),{class:"w-8 h-8 text-red-600"})])):u("",!0)])):i.substr(0,1)=="i"?(n(),l("div",Os,c(p(z)(a[i.substr(2)])),1)):i.substr(0,1)=="m"?(n(),l("div",$s,c(p(z)(a[i.substr(2)],0,1)),1)):u("",!0)]))),128))],2))),128)),m(r("tr",Is,[Us,m(r("td",As,null,512),[[b,t.can(["updateCorregido reporte"])]]),Ms,h.numberPermissions>1?(n(),l("td",Ps)):u("",!0),Vs,js,Rs,Ns,r("td",Hs," Trabajadas: "+c(e.sumhoras_trabajadas),1),r("td",Fs,c(e.sumdiurnas?"Diurnas: "+e.sumdiurnas:""),1),r("td",Ts,c(e.sumnocturnas?"Nocturnas: "+e.sumnocturnas:""),1),r("td",Bs,c(e.sumextra_diurnas?"Extra diurnas: "+e.sumextra_diurnas:""),1),r("td",Es,c(e.sumextra_nocturnas?"Extra nocturnas: "+e.sumextra_nocturnas:""),1),r("td",Qs,c(e.sumdominical_diurno?"Dominical diurno: "+e.sumdominical_diurno:""),1),r("td",Ls,c(e.sumdominical_nocturno?"Dominical nocturno: "+e.sumdominical_nocturno:""),1),r("td",qs,c(e.sumdominical_extra_diurno?"Dominical extra diurno: "+e.sumdominical_extra_diurno:""),1),r("td",zs,c(e.sumdominical_extra_nocturno?"Dominical extra nocturno: "+e.sumdominical_extra_nocturno:""),1),Js,Xs],512),[[b,e.sumhoras_trabajadas!=0]])])])]),r("div",Gs,[d(fe,{links:e.fromController,filters:s.params},null,8,["links","filters"])])]),e.quincena!=null?m((n(),l("section",Ks,[r("div",Ws,[r("div",Ys,[r("div",Zs,[er,e.nombrePersona?(n(),l("h2",sr,[k(" Reportes de este mes: "),r("b",null,c(e.nombrePersona),1)])):u("",!0),r("div",rr,[d(p(Ve),{id:"my-chart-id",options:G,data:K})])])])])],512)),[[b,t.can(["updateCorregido reporte"])||t.can(["isAdmin"])||t.can(["isadministrativo"])]]):u("",!0)])]),_:1})],64)}}};export{$r as default};
