import{l as A,J as T,m as L,O as F,f as b,a as l,u as i,w as c,F as O,p as M,o as u,X as R,g as _,b as e,q as p,s as d,d as x,t as n,h as k,A as I,c as h,x as q,y as H}from"./app-6fbc732d.js";import{_ as J}from"./AuthenticatedLayout-f5704d6b.js";import{_ as X}from"./Breadcrumb-aac9f5fe.js";import{_ as z}from"./TextInput-07881a74.js";import{_ as C}from"./PrimaryButton-455bd2d2.js";import{_ as V}from"./InfoButton-4d7f7079.js";import{_ as G}from"./SelectInput-c8c23cff.js";import{_ as j}from"./DangerButton-43c2fdad.js";import{_ as K}from"./Pagination-12929a4e.js";import{S as Q,T as N,C as y,E as W,P as Y,L as Z}from"./index-a6a18085.js";import{n as ee}from"./global-2ca809e7.js";import te from"./Create-d5b498a2.js";import se from"./Edit-70625d9b.js";import re from"./EdiCentro-2ccc294e.js";import oe from"./Delete-a9cb616f.js";import le from"./DeleteBulk-9e820e01.js";import{_ as ae}from"./Checkbox-815a35c0.js";import"./app-57141eb6.js";import"./InputError-8feb755d.js";import"./InputLabel-5d3dea27.js";import"./SecondaryButton-9a9dd625.js";const ne={key:0,class:"text-lg mt-2 mb-5 text-red-600"},ie={class:"space-y-4"},pe={class:"px-4 sm:px-0"},de={class:"rounded-lg overflow-hidden w-fit gap-8"},ce={class:"rounded-lg overflow-hidden w-fit gap-8 my-2"},ue={class:"mx-4 pt-1 pb-3 inline-flex"},me=e("label",{for:"onlySupervis",class:"mx-2"},"Mostrar solo supervisores",-1),fe={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},ye={class:"flex justify-between p-2"},ge={class:"flex space-x-2"},be={class:"overflow-x-auto scrollbar-table"},xe={class:"w-full"},he={class:"uppercase text-xs border-t border-gray-300 dark:border-gray-50"},ve={class:"dark:bg-gray-900/50 text-left"},we=e("th",{class:"px-2 py-4 text-center cursor-pointer"}," - ",-1),_e={class:"uppercase text-sm border-t border-gray-200 dark:border-gray-700"},ke={class:"dark:bg-gray-900/50 text-left"},Ce={class:"px-2 py-4 text-center"},$e={class:"px-2 py-4 text-center"},Se={class:"flex justify-between items-center"},Oe={class:"flex justify-between items-center"},Ie=e("span",null," Identificacion ",-1),Ve={class:"flex justify-between items-center"},je=e("span",null," Numero de contrato ",-1),Ne={class:"flex justify-between items-center"},Be={class:"px-2 py-4"},Ee={class:"flex justify-between items-center"},Pe={class:"flex justify-between items-center"},De={class:"flex justify-between items-center"},Ue={class:"flex justify-between items-center"},Ae={class:"flex justify-between items-center"},Te={class:"px-2 py-4 cursor-not-allowed"},Le={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},Fe=["value"],Me={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Re={class:"flex justify-start items-center"},qe={class:"text-sm"},He={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Je={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Xe={class:"whitespace-nowrap py-4 px-2 sm:py-3"},ze={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ge={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ke={key:0},Qe={class:"whitespace-nowrap py-4 px-2 sm:py-3"},We={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ye={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ze={class:"whitespace-nowrap py-4 px-2 sm:py-3"},et={class:"whitespace-nowrap p-4 sm:p-3"},tt={class:"flex justify-center"},st={class:"rounded-md overflow-hidden"},rt={class:"flex justify-between items-center p-2 border-t border-gray-200 dark:border-gray-700"},$t={__name:"Index",props:{title:String,filters:Object,users:Object,roles:Object,cargos:Object,centros:Object,breadcrumbs:Object,perPage:Number,sexoSelect:Object,onlySupervis:Number,superviNullCentro:Number},setup(v){const a=v,{_:B,debounce:E,pickBy:P}=M,s=A({params:{search:a.filters.search,field:a.filters.field,order:a.filters.order,perPage:a.perPage,onlySupervis:a.onlySupervis},selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,EdiCentroOpen:!1,deleteOpen:!1,deleteBulkOpen:!1,user:null,dataSet:T().props.app.perpage,columsVisible:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0,14:!0,15:!0}}),m=o=>s.columsVisible[o]=!s.columsVisible[o],f=o=>{s.params.field=o,s.params.order=s.params.order==="asc"?"desc":"asc",console.log(s.params.order),console.log(s.params.field)};L(()=>B.cloneDeep(s.params),E(()=>{let o=P(s.params);console.log("ðŸ§ˆ debu params:",o),F.get(route("user.index"),o,{replace:!0,preserveState:!0,preserveScroll:!0})},15));const D=o=>{var t;o.target.checked===!1?s.selectedId=[]:(t=a.users)==null||t.data.forEach(g=>{s.selectedId.push(g.id)})},U=()=>{var o;((o=a.users)==null?void 0:o.data.length)==s.selectedId.length?s.multipleSelect=!0:s.multipleSelect=!1};return s.params.onlySupervis=s.params.onlySupervis===null?!1:s.params.onlySupervis,(o,t)=>{const g=H("tooltip");return u(),b(O,null,[l(i(R),{title:a.title},null,8,["title"]),l(J,null,{default:c(()=>[l(X,{title:v.title,breadcrumbs:v.breadcrumbs},null,8,["title","breadcrumbs"]),a.superviNullCentro?_("",!0):(u(),b("p",ne," Hay supervisores sin centro")),e("div",ie,[e("div",pe,[e("div",de,[p(l(C,{class:"rounded-md mx-2",onClick:t[0]||(t[0]=r=>s.createOpen=!0)},{default:c(()=>[x(n(o.lang().button.add),1)]),_:1},512),[[d,o.can(["create user"])]]),p(l(i(k),{href:o.route("IndexTrashed"),class:"mx-1 bg-gray-700/40 dark:bg-gray-800/40 text-white rounded-lg hover:bg-primary dark:hover:bg-primary"},{default:c(()=>[p(l(C,{class:"flex items-center px-4"},{default:c(()=>[x(" Desvinculados ")]),_:1},512),[[d,o.can(["create user"])]])]),_:1},8,["href"]),[[d,o.can(["update user"])]]),p(l(i(k),{href:o.route("user.uploadexcel"),class:"mx-2 bg-gray-700/40 dark:bg-gray-800/40 text-white rounded-lg hover:bg-primary dark:hover:bg-primary"},{default:c(()=>[p(l(C,{class:"flex items-center px-4"},{default:c(()=>[x(" Exportar e Importar "),l(i(Q),{class:"w-3 h-3 ml-2 mb-1"})]),_:1},512),[[d,o.can(["update user"])&&a.superviNullCentro]])]),_:1},8,["href"]),[[d,o.can(["update user"])]]),l(te,{show:s.createOpen,onClose:t[1]||(t[1]=r=>s.createOpen=!1),roles:a.roles,cargos:a.cargos,centros:a.centros,sexoSelect:a.sexoSelect,title:a.title},null,8,["show","roles","cargos","centros","sexoSelect","title"]),l(se,{show:s.editOpen,onClose:t[2]||(t[2]=r=>s.editOpen=!1),user:s.user,roles:a.roles,cargos:a.cargos,centros:a.centros,sexoSelect:a.sexoSelect,title:a.title},null,8,["show","user","roles","cargos","centros","sexoSelect","title"]),l(re,{show:s.EdiCentroOpen,onClose:t[3]||(t[3]=r=>s.EdiCentroOpen=!1),user:s.user,centros:a.centros,title:a.title},null,8,["show","user","centros","title"]),l(oe,{show:s.deleteOpen,onClose:t[4]||(t[4]=r=>s.deleteOpen=!1),user:s.user,title:a.title},null,8,["show","user","title"]),l(le,{show:s.deleteBulkOpen,onClose:t[5]||(t[5]=r=>(s.deleteBulkOpen=!1,s.multipleSelect=!1,s.selectedId=[])),selectedId:s.selectedId,title:a.title},null,8,["show","selectedId","title"])]),e("div",ce,[e("div",ue,[x("â€Ž "),p(e("input",{id:"onlySupervis",type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=r=>s.params.onlySupervis=r),class:"inline-flex items-center p-3 border-2 border-sky-500 rounded-md font-semibold hover:bg-primary/80 dark:hover:bg-primary/90 focus:bg-primary/80 dark:focus:bg-primary/80 active:bg-primary dark:active:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-primary transition ease-in-out duration-150 disabled:bg-primary/80"},null,512),[[I,s.params.onlySupervis]]),me])])]),e("div",fe,[e("div",ye,[e("div",ge,[l(G,{modelValue:s.params.perPage,"onUpdate:modelValue":t[7]||(t[7]=r=>s.params.perPage=r),dataSet:s.dataSet},null,8,["modelValue","dataSet"]),p((u(),h(j,{onClick:t[8]||(t[8]=r=>s.deleteBulkOpen=!0),class:"px-3 py-1.5"},{default:c(()=>[l(i(N),{class:"w-5 h-5"})]),_:1})),[[d,s.selectedId.length!=0&&o.can(["delete user"])],[g,o.lang().tooltip.delete_selected]])]),l(z,{modelValue:s.params.search,"onUpdate:modelValue":t[9]||(t[9]=r=>s.params.search=r),type:"text",class:"block w-3/6 md:w-2/6 lg:w-1/6 rounded-lg",placeholder:"Buscar por nombre o correo"},null,8,["modelValue"])]),e("div",be,[e("table",xe,[e("thead",he,[e("tr",ve,[we,e("th",{onClick:t[10]||(t[10]=r=>m(0)),class:"px-2 py-4 text-center text-xs text-gray-300 cursor-pointer"},"#"),e("th",{onClick:t[11]||(t[11]=r=>m(1)),class:"px-2 py-4 text-center text-xs text-gray-300 cursor-pointer"},"Nombre"),e("th",{onClick:t[12]||(t[12]=r=>m(2)),class:"px-2 py-4 text-center text-xs text-gray-300 cursor-pointer"},"Identificacion"),e("th",{onClick:t[13]||(t[13]=r=>m(3)),class:"px-2 py-4 text-center text-xs text-gray-300 cursor-pointer"},"Numero de contrato"),e("th",{onClick:t[14]||(t[14]=r=>m(4)),class:"px-2 py-4 text-center text-xs text-gray-300 cursor-pointer"},"ocultar"),e("th",{onClick:t[15]||(t[15]=r=>m(5)),class:"px-2 py-4 text-center text-xs text-gray-300 cursor-pointer"},"ocultar"),e("th",{onClick:t[16]||(t[16]=r=>m(6)),class:"px-2 py-4 text-center text-xs text-gray-300 cursor-pointer"},"ocultar"),e("th",{onClick:t[17]||(t[17]=r=>m(6)),class:"px-2 py-4 text-center text-xs text-gray-300 cursor-pointer"},"ocultar"),e("th",{onClick:t[18]||(t[18]=r=>m(6)),class:"px-2 py-4 text-center text-xs text-gray-300 cursor-pointer"},"ocultar")])]),e("thead",_e,[e("tr",ke,[e("th",Ce,[l(ae,{checked:s.multipleSelect,"onUpdate:checked":t[19]||(t[19]=r=>s.multipleSelect=r),onChange:D},null,8,["checked"])]),p(e("th",$e,"#",512),[[d,s.columsVisible[0]]]),p(e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[20]||(t[20]=r=>f("name"))},[e("div",Se,[e("span",null,n(o.lang().label.name),1),l(i(y),{class:"w-4 h-4"})])],512),[[d,s.columsVisible[1]]]),p(e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[21]||(t[21]=r=>f("cedula"))},[e("div",Oe,[Ie,l(i(y),{class:"w-4 h-4"})])],512),[[d,s.columsVisible[2]]]),p(e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[22]||(t[22]=r=>f("numero_contrato"))},[e("div",Ve,[je,l(i(y),{class:"w-4 h-4"})])],512),[[d,s.columsVisible[3]]]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[23]||(t[23]=r=>f("cargo_id"))},[e("div",Ne,[e("span",null,n(o.lang().label.cargo),1),l(i(y),{class:"w-4 h-4"})])]),e("th",Be,n(o.lang().label.role),1),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[24]||(t[24]=r=>f("celular"))},[e("div",Ee,[e("span",null,n(o.lang().label.celular),1),l(i(y),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[25]||(t[25]=r=>f("fecha_de_ingreso"))},[e("div",Pe,[e("span",null,n(o.lang().label.fecha_de_ingreso),1),l(i(y),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[26]||(t[26]=r=>f("centro_costo_id"))},[e("div",De,[e("span",null,n(o.lang().label.centro_costo),1),l(i(y),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[27]||(t[27]=r=>f("salario"))},[e("div",Ue,[e("span",null,n(o.lang().label.salario),1),l(i(y),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[28]||(t[28]=r=>f("updated_at"))},[e("div",Ae,[e("span",null,n(o.lang().label.updated),1),l(i(y),{class:"w-4 h-4"})])]),e("th",Te,n(o.lang().label.Action),1)])]),e("tbody",null,[(u(!0),b(O,null,q(v.users.data,(r,$)=>{var S;return u(),b("tr",{key:$,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[e("td",Le,[p(e("input",{class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:U,value:r.id,"onUpdate:modelValue":t[29]||(t[29]=w=>s.selectedId=w)},null,40,Fe),[[I,s.selectedId]])]),p(e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},n(++$),513),[[d,s.columsVisible[0]]]),p(e("td",Me,[e("span",Re,n(r.name),1),e("small",qe,n(r.email),1)],512),[[d,s.columsVisible[1]]]),e("td",He,n(r.cedula),1),e("td",Je,n(r.numero_contrato),1),e("td",Xe,n(r.cargo.length===0?"No tiene cargo":r.cargo.nombre),1),e("td",ze,n(r.roles.length===0?"No tiene rol":r.roles[0].name),1),e("td",Ge,[x(n(r.celular)+" ",1),r.telefono&&r.telefono!==r.celular?(u(),b("span",Ke," / "+n(r.telefono),1)):_("",!0)]),e("td",Qe,n(r.fecha_de_ingreso),1),e("td",We,n(r.cc),1),e("td",Ye,n(i(ee)(r.salario,0,1)),1),e("td",Ze,n(r.updated_at),1),e("td",et,[e("div",tt,[p((u(),h(i(k),{href:o.route("user.showReporte",r.id),type:"button",class:"inline-flex items-center p-1.5 bg-gray-600 border border-transparent rounded-l-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-500 active:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-250"},{default:c(()=>[l(i(W),{class:"w-4 h-4"})]),_:2},1032,["href"])),[[d,o.can(["update centroCostos"])],[g,o.lang().tooltip.seeReport]]),e("div",st,[p((u(),h(V,{type:"button",onClick:w=>(s.editOpen=!0,s.user=r),class:"px-2 py-1.5 rounded-sm mx-0.5"},{default:c(()=>[l(i(Y),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[d,o.can(["update user"])],[g,o.lang().tooltip.edit]]),r.roles[0]?p((u(),h(V,{key:0,type:"button",onClick:w=>(s.EdiCentroOpen=!0,s.user=r),class:"px-2 py-1.5 rounded-sm mx-0.5"},{default:c(()=>[l(i(Z),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[d,o.can(["update user"])&&((S=r.roles[0])==null?void 0:S.name)==="supervisor"],[g,"Asignar"]]):_("",!0),p((u(),h(j,{type:"button",onClick:w=>(s.deleteOpen=!0,s.user=r),class:"px-2 py-1.5 rounded-none"},{default:c(()=>[l(i(N),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[d,o.can(["delete user"])],[g,o.lang().tooltip.delete]])])])])])}),128))])])]),e("div",rt,[l(K,{links:a.users,filters:s.params},null,8,["links","filters"])])])])]),_:1})],64)}}};export{$t as default};
