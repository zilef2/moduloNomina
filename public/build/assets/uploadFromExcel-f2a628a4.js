import{l as Q,z as Y,m as Z,O as P,v as y,k as T,f as m,a as l,u as t,w as x,F as k,p as X,o as n,X as G,b as e,t as u,g as _,e as q,q as V,s as E,d as f,x as I,c as U}from"./app-46106272.js";import{_ as J}from"./AuthenticatedLayout-e2b78f72.js";import{_ as K}from"./Breadcrumb-af75185f.js";import{_ as S}from"./PrimaryButton-1e750976.js";import{_ as R}from"./SelectInput-26885325.js";import{m as W,n as ee,o as te}from"./index-eda91085.js";import{Z as j}from"./main-7f7b3c02.js";import{a as oe}from"./app-57141eb6.js";const se={class:"space-y-4"},ae={key:0,class:"px-4 sm:px-0"},ie={class:"rounded-lg overflow-hidden w-fit"},le={class:"flex max-w-screen-xl shadow-lg rounded-lg"},ne=e("div",{class:"bg-yellow-600 py-4 px-6 rounded-l-lg flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",class:"fill-current text-white",width:"20",height:"20"},[e("path",{"fill-rule":"evenodd",d:"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"})])],-1),re={class:"px-8 py-6 bg-white rounded-r-lg flex justify-between items-center w-full border border-l-transparent border-gray-200"},ce={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},de={class:"text-gray-600 body-font"},ue={class:"container px-5 py-12 mx-auto"},me={key:0,class:"flex flex-wrap -m-4"},_e={class:"p-4 w-full sm:w-1/3"},fe={class:"h-full border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden"},he={class:"p-6"},pe=e("h2",{class:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1"}," Formato xlsx",-1),ge=e("h3",{class:"title-font text-lg font-medium text-gray-900 mb-3"},"Subir empleados",-1),xe=e("p",{class:"leading-relaxed mb-3"}," Este formulario solo permite cargar empleados o administrativos",-1),ve=["onSubmit"],be=["value"],we={class:"w-full"},ye={class:"flex items-center flex-wrap my-6"},ke={class:"text-indigo-500 inline-flex items-center md:mb-2 lg:mb-0"},qe={class:"text-gray-600 body-font"},Se={class:"container p-5 mx-auto"},De=e("div",{class:"text-center mb-1"},[e("h1",{class:"text-xl font-medium text-center title-font text-gray-900 mb-4"}," Formato del excel "),e("p",{class:"text-base leading-relaxed w-full mx-auto"}," Solo la primera fila debe ser la misma ")],-1),Ne={class:"flex flex-wrap sm:mx-auto sm:mb-2 -mx-2"},Fe={class:"px-2 w-full"},Ve={class:"bg-gray-50 rounded flex p-1 h-full items-center"},Ee=e("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",class:"text-indigo-500 w-6 h-6 flex-shrink-0 mr-4",viewBox:"0 0 24 24"},[e("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),f(),e("path",{d:"M22 4L12 14.01l-3-3"})],-1),Ie={class:"title-font font-medium"},Ue={class:"p-4 w-full md:w-1/2 xl:w-1/3"},Re={class:"h-full border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden"},je={class:"p-6"},Be=["onSubmit"],He=e("h2",{class:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1"}," Formato xlsx",-1),Me=e("h3",{class:"title-font text-lg font-medium text-gray-900 mb-3"},"Descargar reporte ",-1),Le=e("p",{class:"leading-relaxed mb-3"}," Este formulario permite descargar el reporte de la quincena",-1),Oe={class:""},Ce={class:""},ze={class:"col-span-1 lg:col-span-2"},Ae={class:"text-gray-600 body-font"},$e={class:"container p-5 mx-auto"},Qe={class:"text-center mb-1"},Ye=e("h1",{class:"text-xl font-medium text-center title-font text-gray-900 mb-4"}," Recuerde ",-1),Ze=e("p",{class:"text-base leading-relaxed w-full mx-auto"}," Solo se descargarÃ¡n, Los reportes que sean validos. ",-1),Pe={key:0,class:"text-xl leading-relaxed w-full mx-auto"},Te={key:1,class:"text-base leading-relaxed w-full mx-auto"},Xe={class:"p-4 w-full md:w-1/2 xl:w-1/3"},Ge={class:"h-full border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden"},Je={class:"p-6"},Ke=["onSubmit"],We=e("h2",{class:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1"}," Seleccione quincena",-1),et=e("h3",{class:"title-font text-lg font-medium text-gray-900 mb-3"},"Descargar siigo ",-1),tt=e("p",{class:"leading-relaxed mb-3"}," Este formulario permite descargar el reporte de la quincena para siigo",-1),ot={class:"flex"},st={class:"text-gray-600 body-font"},at={class:"container p-5 mx-auto"},it={class:"text-center mb-1"},lt=e("h1",{class:"text-xl font-medium text-center title-font text-gray-900 mb-4"}," Este formato incluye ",-1),nt=e("p",{class:"text-base leading-relaxed w-full mx-auto"},null,-1),rt={class:"text-base leading-relaxed w-full mx-auto"},gt={__name:"uploadFromExcel",props:{title:String,breadcrumbs:Object,NumUsers:Number,NumReportes:Number,ini:Date,fin:Date,flash:String},setup(v){const r=v,{_:B,debounce:H,pickBy:M}=X;new Date().getFullYear();const c=Q({respuesta:"",params:{fecha_ini:"",quincena:""},warnn:"",tiposSiigo:[]});Y(()=>{}),Z(()=>B.cloneDeep(c.params),H(()=>{let d=M(c.params);P.get(route("user.uploadexcel"),d,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const h=y({archivo1:null}),o=y({archivo1:null,fecha_ini:"",quincena:1,NumeroDiasFestivos:0}),s=y({archivosigo:null,quincena_sigo:1,fecha_ini_sigo:"",NumeroDiasFestivos:0});T(()=>{console.log("ðŸ§ˆ debu form2.quincena_sigo:",s.quincena_sigo),r.flash.warning&&(c.warnn=r.flash.warning),c.params.fecha_ini=o.fecha_ini,c.params.quincena=o.quincena,s.fecha_ini_sigo&&(s.NumeroDiasFestivos=D(s.quincena_sigo,s.fecha_ini_sigo.month,s.fecha_ini_sigo.year)),o.fecha_ini&&(o.NumeroDiasFestivos=D(o.quincena,o.fecha_ini.month,o.fecha_ini.year))});function D(d,i,a){let A=oe.getHolidaysByYear(a),p,g,F,b=0,w=d==1?14:31;return A.forEach($=>{if(g=$.date.split("/"),p=new Date(g[2],g[1]-1,g[0]),F=p.getMonth(),F==i)w==14?w>p.getDate()&&b++:p.getDate()>14&&w>p.getDate()&&b++;else return}),b}function L(){h.post(route("user.uploadexcelpost"),{preserveScroll:!0,onSuccess:()=>{},onError:()=>null,onFinish:()=>null})}const O=()=>{window.open("users/export/"+o.NumeroDiasFestivos+"/"+o.quincena+"/"+o.fecha_ini.month+"/"+o.fecha_ini.year,"_blank")},C=()=>{window.open("users/downloadsigo/"+s.NumeroDiasFestivos+"/"+s.quincena_sigo+"/"+s.fecha_ini_sigo.month+"/"+s.fecha_ini_sigo.year,"_blank")},N=[{value:null,label:"seleccione una quincena"},{value:1,label:1},{value:2,label:2}],z=[{value:"nombre",rule:"Obligatorio"},{value:"correo",rule:"Debe ser unico"},{value:"cedula",rule:"Debe ser un nÃºmero"},{value:"telefono",rule:"Obligatorio"},{value:"celular",rule:"Obligatorio"},{value:"rol",rule:"empleado o administrativo "},{value:"cargo",rule:"Verificar que el rol exista"},{value:"fecha ingreso",rule:"fecha ingreso a la empresa"},{value:"sexo",rule:"Masculino o Femenino"},{value:"salario",rule:"Sin puntos ni comas"}];return c.tiposSiigo=["10- Horas extras diurnas 125%- Ingreso","11- Horas extras nocturnas 175%- Ingreso","08- Hora extra recargo dominical o festivo- Ingreso","06- Hora dominical o festiva nocturna- Ingreso","07- Hora extra diurna dominical o festiva- Ingreso","12- Horas extras nocturnas dominical o festiva- Ingreso","26- Recargo nocturno- Ingreso"],(d,i)=>(n(),m(k,null,[l(t(G),{title:r.title},null,8,["title"]),l(J,null,{default:x(()=>[l(K,{title:v.title,breadcrumbs:v.breadcrumbs},null,8,["title","breadcrumbs"]),e("div",se,[c.warnn?(n(),m("div",ae,[e("div",ie,[e("div",le,[ne,e("div",re,[e("div",null,u(c.warnn?c.warnn:""),1)])])])])):_("",!0),e("div",ce,[e("section",de,[e("div",ue,[d.can(["update user"])?(n(),m("div",me,[e("div",_e,[e("div",fe,[l(t(W),{class:"h-24 lg:h-48 md:h-36 w-full object-cover object-center"}),e("div",he,[pe,ge,xe,e("form",{onSubmit:q(L,["prevent"]),id:"upload"},[e("input",{type:"file",onInput:i[0]||(i[0]=a=>t(h).archivo1=a.target.files[0]),accept:"application/vnd.openxmlformUpats-officedocument.spreadsheetml.sheet"},null,32),t(h).progress?(n(),m("progress",{key:0,value:t(h).progress.percentage,max:"100"},u(t(h).progress.percentage)+"% ",9,be)):_("",!0),e("div",we,[V(l(S,{disabled:t(h).archivo1==null,class:"rounded-none my-4"},{default:x(()=>[f(u(d.lang().button.subir),1)]),_:1},8,["disabled"]),[[E,d.can(["create user"])]])])],40,ve),e("div",ye,[e("a",ke," Numero de Usuarios: "+u(r.NumUsers),1),e("section",qe,[e("div",Se,[De,e("div",Ne,[(n(),m(k,null,I(z,a=>e("div",Fe,[e("div",Ve,[Ee,e("span",Ie,u(a.value)+" : "+u(a.rule),1)])])),64))])])])])])])]),e("div",Ue,[e("div",Re,[l(t(ee),{class:"h-24 lg:h-48 md:h-36 w-full object-cover object-center"}),e("div",je,[e("form",{onSubmit:q(O,["prevent"]),id:"downloadReporte",class:"text-center"},[He,Me,Le,e("div",Oe,[e("div",Ce,[l(R,{modelValue:t(o).quincena,"onUpdate:modelValue":i[1]||(i[1]=a=>t(o).quincena=a),dataSet:N,class:"my-2 py-3 block w-full"},null,8,["modelValue"])]),e("div",ze,[l(t(j),{"month-picker":"","auto-apply":"",teleport:!0,id:"fecha_ini",type:"date",class:"mt-1 block w-full",modelValue:t(o).fecha_ini,"onUpdate:modelValue":i[2]||(i[2]=a=>t(o).fecha_ini=a),required:"",placeholder:d.lang().placeholder.fecha_ini,error:t(o).errors.fecha_ini},null,8,["modelValue","placeholder","error"])])]),t(o).fecha_ini&&r.NumReportes>0?V((n(),U(S,{key:0,disabled:t(o).fecha_ini==null,class:"rounded-none my-4"},{default:x(()=>[f(" Exportar Quincena ")]),_:1},8,["disabled"])),[[E,d.can(["create user"])]]):_("",!0)],40,Be)]),e("section",Ae,[e("div",$e,[e("div",Qe,[Ye,Ze,r.NumReportes!=0?(n(),m("p",Pe,[f(" Para esta fecha, hay "),e("b",null,u(r.NumReportes),1),f(" reportes. ")])):_("",!0),r.NumReportes!=0?(n(),m("p",Te,[e("small",null,u(r.ini),1),f(" - "),e("small",null,u(r.fin),1)])):_("",!0)])])])])]),e("div",Xe,[e("div",Ge,[l(t(te),{class:"h-24 lg:h-48 md:h-36 w-full object-cover object-center"}),e("div",Je,[e("form",{onSubmit:q(C,["prevent"]),id:"downloadReporte",class:"text-center"},[We,et,tt,e("div",ot,[l(R,{modelValue:t(s).quincena_sigo,"onUpdate:modelValue":i[3]||(i[3]=a=>t(s).quincena_sigo=a),id:"quincena_si",dataSet:N,class:"mt-1 block w-1/3 mx-1"},null,8,["modelValue"]),l(t(j),{"month-picker":"","auto-apply":"",teleport:!0,id:"fecha_ini_sigo",type:"date",modelValue:t(s).fecha_ini_sigo,"onUpdate:modelValue":i[4]||(i[4]=a=>t(s).fecha_ini_sigo=a),required:"",placeholder:d.lang().placeholder.fecha_ini_sigo,error:t(s).errors.fecha_ini_sigo,class:"mt-1 w-1/3"},null,8,["modelValue","placeholder","error"])]),t(s).fecha_ini_sigo.year?(n(),U(S,{key:0,disabled:t(s).fecha_ini_sigo==null,class:"rounded-none my-4"},{default:x(()=>[f(" Descargar formato siigo ")]),_:1},8,["disabled"])):_("",!0)],40,Ke)]),e("section",st,[e("div",at,[e("div",it,[lt,nt,(n(!0),m(k,null,I(c.tiposSiigo,a=>(n(),m("p",rt,[e("p",null,u(a),1)]))),256))])])])])])])):_("",!0)])])])])]),_:1})],64))}};export{gt as default};
