import{p as $,T as E,m as B,q as j,f,a as i,w as v,o as g,b as n,t as d,u as r,v as x,A as T,y,B as S,d as b,n as N,e as O,k as I}from"./app-c790f4bd.js";import{_ as D}from"./InputError-ac81a49a.js";import{_ as u}from"./InputLabel-2a5bfa3f.js";import{_ as F,a as M}from"./SecondaryButton-2843ee84.js";import{_ as q}from"./PrimaryButton-f3c0a7f8.js";import{_ as C}from"./TextInput-987096fc.js";const z={class:"space-y-6"},A={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},J={class:"my-6 grid grid-cols-2 gap-6"},L={class:"col-span-2 w-full"},G=["for"],H=["id","value","onUpdate:modelValue","checked"],K={class:"inline-flex col-span-2 mt-6"},P={class:"flex justify-end"},ee={__name:"Edit",props:{show:Boolean,title:String,CentroCosto:Object,listaSupervisores:Object},emits:["close"],setup(k,{emit:w}){const a=k,c=$({multipleSelect:!1,SelecSupervisores:[]}),m=w,e=E({nombre:"",descripcion:"",clasificacion:"",activo:!0,selectedUsers:[],listaSupervisores:[]});function V(s){for(const[o,l]of Object.entries(a.CentroCosto.todos))if(l==s)return o;return null}const U=()=>{var o,l;c.SelecSupervisores=(o=a.listaSupervisores)==null?void 0:o.map(t=>({label:t.name,value:t.id}));let s;(l=a.CentroCosto)!=null&&l.cuantoshijos&&c.SelecSupervisores&&(console.log("=>(todos",a.CentroCosto.todos),c.SelecSupervisores.forEach(t=>{console.log("=>(Edit.vue:58) idsupervisor",t),s=V(t.value),console.log("=>(Edit.vue:59) indexTrue",s),s&&(e.selectedUsers[s]=!0)}))};B(()=>{var s,o,l,t,p;a.show&&(e.errors={},e.nombre=(s=a.CentroCosto)==null?void 0:s.nombre,e.descripcion=(o=a.CentroCosto)==null?void 0:o.descripcion,e.clasificacion=(l=a.CentroCosto)==null?void 0:l.clasificacion,e.activo=(t=a.CentroCosto)==null?void 0:t.activo,e.activo=I(!!((p=a.CentroCosto)!=null&&p.activo)))}),j(()=>a.show,(s,o)=>{s&&!o&&(e.selectedUsers=c.SelecSupervisores.map(()=>!1),setTimeout(()=>U(),30))},{deep:!0});function _(s,o){if(e.selectedUsers&&e.selectedUsers.length)return e.selectedUsers.includes(o)}const h=()=>{var s;e.listaSupervisores=a.listaSupervisores,e.put(route("CentroCostos.update",(s=a.CentroCosto)==null?void 0:s.id),{preserveScroll:!0,onSuccess:()=>{m("close"),e.reset(),c.multipleSelect=!1},onError:()=>alert(JSON.stringify(e.errors,null,4)),onFinish:()=>null})};return(s,o)=>(g(),f("section",z,[i(F,{show:a.show,onClose:o[6]||(o[6]=l=>m("close"))},{default:v(()=>[n("form",{class:"p-6",onSubmit:O(h,["prevent"])},[n("h2",A,d(s.lang().label.edit)+" "+d(a.title),1),n("div",J,[n("div",null,[i(u,{ref:"nombre",for:"nombre",value:s.lang().label.name},null,8,["value"]),i(C,{id:"nombre",type:"text",class:"bg-gray-100 dark:bg-gray-700 mt-1 w-full",modelValue:r(e).nombre,"onUpdate:modelValue":o[0]||(o[0]=l=>r(e).nombre=l),placeholder:s.lang().placeholder.diurnas,error:r(e).errors.diurnas},null,8,["modelValue","placeholder","error"])]),n("div",null,[i(u,{ref:"descripcion",for:"descripcion",value:s.lang().label.descripcion},null,8,["value"]),i(C,{id:"descripcion",type:"text",class:"bg-gray-100 dark:bg-gray-700 mt-1 w-full",modelValue:r(e).descripcion,"onUpdate:modelValue":o[1]||(o[1]=l=>r(e).descripcion=l),placeholder:s.lang().placeholder.diurnas,error:r(e).errors.diurnas},null,8,["modelValue","placeholder","error"])]),n("div",null,[i(u,{ref:"clasificacion",for:"clasificacion",value:s.lang().label.clasificacion},null,8,["value"]),i(C,{id:"clasificacion",type:"text",class:"bg-gray-100 dark:bg-gray-700 mt-1 w-full",modelValue:r(e).clasificacion,"onUpdate:modelValue":o[2]||(o[2]=l=>r(e).clasificacion=l),placeholder:s.lang().placeholder.diurnas,error:r(e).errors.diurnas},null,8,["modelValue","placeholder","error"])]),n("div",L,[i(u,{for:"users",value:s.lang().label.supervisores},null,8,["value"]),(g(!0),f(x,null,T(c.SelecSupervisores,(l,t)=>(g(),f("div",{key:t,class:"mt-1 block w-full"},[n("label",{for:"user"+t},[y(n("input",{type:"checkbox",id:"user"+t,value:l.value,"onUpdate:modelValue":p=>r(e).selectedUsers[t]=p,checked:_(l.id,t)},null,8,H),[[S,r(e).selectedUsers[t]]]),b(" "+d(l.label),1)],8,G)]))),128)),i(D,{class:"mt-2",message:r(e).errors.users},null,8,["message"])]),n("div",K,[y(n("input",{onClick:o[3]||(o[3]=(...l)=>s.toggleCheckbox&&s.toggleCheckbox(...l)),"onUpdate:modelValue":o[4]||(o[4]=l=>r(e).activo=l),type:"checkbox",id:"activo",class:"bg-gray-50 dark:bg-gray-600 mt-1 w-7 h-7 p-2 my-auto rounded-xl"},null,512),[[S,r(e).activo]]),i(u,{ref:"activo",for:"activo",value:s.lang().label.activo,class:"mx-3 my-auto"},null,8,["value"])])]),n("div",P,[i(M,{disabled:r(e).processing,onClick:o[5]||(o[5]=l=>m("close"))},{default:v(()=>[b(d(s.lang().button.close),1)]),_:1},8,["disabled"]),i(q,{class:N(["ml-3",{"opacity-25":r(e).processing}]),disabled:r(e).processing,onClick:h},{default:v(()=>[b(d(r(e).processing?s.lang().button.save+"...":s.lang().button.save),1)]),_:1},8,["class","disabled"])])],32)]),_:1},8,["show"])]))}};export{ee as default};
