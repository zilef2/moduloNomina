import{o as n,f as l,r as Q,l as W,J as Y,m as Z,O as ee,v as se,a as i,u as p,w as b,F as v,p as te,X as re,b as s,c as y,d as k,t as d,g as u,q as h,s as f,A as N,x,y as ae,e as oe,n as ne}from"./app-6fbc732d.js";import{_ as le}from"./AuthenticatedLayout-f5704d6b.js";import{_ as ie}from"./Breadcrumb-aac9f5fe.js";import{_ as S}from"./TextInput-07881a74.js";import{_ as U}from"./PrimaryButton-455bd2d2.js";import{_ as H}from"./SelectInput-c8c23cff.js";import{_ as P}from"./DangerButton-43c2fdad.js";import{_ as de}from"./Pagination-12929a4e.js";import{T as F,C as ce,P as pe,a as T,X as me}from"./index-a6a18085.js";import{_ as ue}from"./Checkbox-815a35c0.js";import{_ as he}from"./InfoButton-4d7f7079.js";import ye from"./Create-f0ab90ee.js";import fe from"./CreateMassive-2ae84353.js";import be from"./Edit-54b3691c.js";import _e from"./Delete-89b1a884.js";import we from"./DeleteBulk-8d005845.js";import{f as B,n as R}from"./global-2ca809e7.js";import{C as ge,p as ve,a as ke,b as xe,B as Se,c as De,L as Ce,d as Oe}from"./index-29620127.js";import{_ as $e}from"./InputLabel-5d3dea27.js";import"./SecondaryButton-9a9dd625.js";import"./InputError-8feb755d.js";import"./main-1ba251fd.js";import"./app-57141eb6.js";const Ve=["type"],Ie={__name:"SuccessButton",props:{type:{type:String,default:"submit"}},setup(m){return(e,D)=>(n(),l("button",{type:m.type,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 active:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150"},[Q(e.$slots,"default")],8,Ve))}},Ae={class:"space-y-4"},je={class:"px-4 sm:px-0"},Me={class:"rounded-lg overflow-hidden w-fit"},Ne={class:"mt-4 inline-flex"},Ue={key:2,class:"mx-4"},He={key:3,class:"mx-4"},Pe=s("p",{class:"pt-1 mt-6 font-extrabold"},"Sin reportes",-1),Fe=[Pe],Te={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},Be={class:"flex justify-between p-2"},Re={class:"flex space-x-2"},Ee=s("span",{class:"my-auto"},"Registros/pagina",-1),qe={class:"flex gap-3"},Le=s("label",{for:"soloval",class:"mx-3"},"Solo validos",-1),Xe={class:"overflow-x-auto scrollbar-table"},ze={class:"w-full"},Je={class:"uppercase text-sm border-t border-gray-200 dark:border-gray-700"},Ge={class:"dark:bg-gray-900 text-left"},Ke={class:"px-2 py-4 text-center"},Qe=["onClick"],We={class:"flex justify-between items-center"},Ye={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},Ze=["value"],es={class:"whitespace-nowrap py-4 px-2 sm:py-3"},ss={class:"flex justify-start items-center"},ts={class:"flex rounded-md overflow-hidden"},rs=["onSubmit"],as={class:"whitespace-nowrap py-4 px-2 sm:py-3"},os={class:"whitespace-nowrap py-4 px-2 sm:py-3"},ns={key:0},ls={key:1},is={key:2},ds={key:3},cs={key:0},ps={key:1},ms={key:2},us={key:4},hs={key:5},ys={class:"my-2 py-4 border-t border-gray-200 dark:border-gray-900 hover:bg-sky-200 hover:dark:bg-gray-900/20"},fs=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),bs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},_s=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"}," Totales ",-1),ws=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),gs={key:0,class:"whitespace-nowrap py-4 px-2 sm:py-3"},vs=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),ks=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),xs=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),Ss={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ds={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Cs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Os={class:"whitespace-nowrap py-4 px-2 sm:py-3"},$s={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Vs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Is={class:"whitespace-nowrap py-4 px-2 sm:py-3"},As={class:"whitespace-nowrap py-4 px-2 sm:py-3"},js={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ms=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),Ns=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),Us={class:"flex justify-betwween items-center p-2 border-t border-gray-200 dark:border-gray-700"},Hs={key:0,class:"text-gray-600 body-font overflow-hidden"},Ps={class:"container px-5 py-4 mx-auto"},Fs={class:"flex flex-wrap m-2"},Ts={class:"p-1 md:w-1/2 flex flex-col items-start"},Bs=s("span",{class:"inline-block py-1 px-2 rounded bg-indigo-50 text-indigo-500 text-xs font-medium tracking-widest"}," Este mes ",-1),Rs={key:0,class:"sm:text-3xl text-2xl title-font font-medium text-gray-900 mt-4 mb-4"},Es={class:"m-1 p-1 w-full"},mt={__name:"Index",props:{title:String,filters:Object,fromController:Object,breadcrumbs:Object,perPage:Number,nombresTabla:Array,valoresSelect:Object,showSelect:Object,showUsers:Object,userFiltro:Object,IntegerDefectoSelect:Number,horasemana:Number,startDateMostrar:String,endDateMostrar:String,sumhoras_trabajadas:Number,quincena:Object,nombrePersona:String,numberPermissions:Number,ArrayOrdinarias:Array,sumdiurnas:Number,sumnocturnas:Number,sumextra_diurnas:Number,sumextra_nocturnas:Number,sumdominical_diurno:Number,sumdominical_nocturno:Number,sumdominical_extra_diurno:Number,sumdominical_extra_nocturno:Number,horasTrabajadasHoy:Array,HorasDeCadaSemana:Array,ArrayHorasSemanales:Array},setup(m){var O,$,V,I,A,j,M;const e=m;ge.register(ve,ke,xe,Se,De,Ce);const{_:D,debounce:E,pickBy:q}=te,L={responsive:!0,maintainAspectRatio:!0,color:"#000",darkcolor:"#fff"},X={name:"Numero de reportes",datasets:[{label:"Numero de Reportes",data:e.quincena,backgroundColor:"#f87979"}]},t=W({params:{searchHorasD:(O=e.filters)==null?void 0:O.searchHorasD,soloValidos:($=e.filters)==null?void 0:$.soloValidos,FiltroUser:(V=e.filters)==null?void 0:V.FiltroUser,search:(I=e.filters)==null?void 0:I.search,searchDDay:(A=e.filters)==null?void 0:A.searchDDay,field:(j=e.filters)==null?void 0:j.field,order:(M=e.filters)==null?void 0:M.order,perPage:e.perPage},selectedId:[],multipleSelect:!1,createOpen:!1,createMassOpen:!1,editOpen:!1,editCorregirOpen:!1,deleteOpen:!1,deleteBulkOpen:!1,generico:null,nope:null,dataSet:Y().props.app.perpage}),z=r=>{r!=null&&e.userFiltro?(r=r.substr(2),t.params.field=r.replace(/ /g,"_"),t.params.order=t.params.order==="asc"?"desc":"asc"):alert("No esta permitido organizar la tabla en esta vista")};Z(()=>D.cloneDeep(t.params),E(()=>{let r=q(t.params);ee.get(route("Reportes.index"),r,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const J=r=>{var a;r.target.checked===!1?t.selectedId=[]:(a=e.fromController)==null||a.data.forEach(_=>{t.selectedId.push(_.id)})},G=()=>{var r;((r=e.fromController)==null?void 0:r.data.length)==t.selectedId.length?t.multipleSelect=!0:t.multipleSelect=!1},g=se({valido:!1}),C=r=>{var a;g.valido=r,g.put(route("Reportes.update",(a=t.generico)==null?void 0:a.id),{preserveScroll:!0,onSuccess:()=>{g.reset()},onError:()=>null,onFinish:()=>null})};return(r,a)=>{const _=ae("tooltip");return n(),l(v,null,[i(p(re),{title:e.title},null,8,["title"]),i(le,null,{default:b(()=>[i(ie,{title:m.title,breadcrumbs:m.breadcrumbs},null,8,["title","breadcrumbs"]),s("div",Ae,[s("div",je,[s("div",Me,[s("div",Ne,[r.can(["create reporte"])?(n(),y(U,{key:0,class:"rounded-md mx-2 h-10 mt-6",onClick:a[0]||(a[0]=o=>t.createOpen=!0)},{default:b(()=>[k(d(r.lang().button.add),1)]),_:1})):u("",!0),r.can(["isAdmin"])?(n(),y(U,{key:1,class:"rounded-md mx-2 h-10 mt-6",onClick:a[1]||(a[1]=o=>t.createMassOpen=!0)},{default:b(()=>[k(d(r.lang().button.add)+" Masivamente ",1)]),_:1})):u("",!0),e.userFiltro&&e.userFiltro.length>0?h((n(),l("div",Ue,[i($e,{for:"centro_costo_id",value:"Filtrar por trabajador"}),i(H,{modelValue:t.params.FiltroUser,"onUpdate:modelValue":a[2]||(a[2]=o=>t.params.FiltroUser=o),dataSet:e.userFiltro,class:"mt-1 block w-full"},null,8,["modelValue","dataSet"])],512)),[[f,r.can(["isingeniero","isadmin","isadministrativo","issupervisor"])&&e.userFiltro]]):h((n(),l("div",He,Fe,512)),[[f,r.can(["isingeniero","isadmin","isadministrativo","issupervisor"])&&e.userFiltro]])]),i(ye,{show:t.createOpen,onClose:a[3]||(a[3]=o=>t.createOpen=!1),title:e.title,valoresSelect:e.valoresSelect,IntegerDefectoSelect:e.IntegerDefectoSelect,horasemana:e.horasemana,startDateMostrar:e.startDateMostrar,endDateMostrar:e.endDateMostrar,numberPermissions:e.numberPermissions,ArrayOrdinarias:e.ArrayOrdinarias,horasTrabajadasHoy:e.horasTrabajadasHoy,HorasDeCadaSemana:e.HorasDeCadaSemana,ArrayHorasSemanales:e.ArrayHorasSemanales},null,8,["show","title","valoresSelect","IntegerDefectoSelect","horasemana","startDateMostrar","endDateMostrar","numberPermissions","ArrayOrdinarias","horasTrabajadasHoy","HorasDeCadaSemana","ArrayHorasSemanales"]),i(fe,{show:t.createMassOpen,onClose:a[4]||(a[4]=o=>t.createMassOpen=!1),title:e.title,valoresSelect:e.valoresSelect,IntegerDefectoSelect:e.IntegerDefectoSelect,horasemana:e.horasemana,startDateMostrar:e.startDateMostrar,endDateMostrar:e.endDateMostrar,numberPermissions:e.numberPermissions,ArrayOrdinarias:e.ArrayOrdinarias},null,8,["show","title","valoresSelect","IntegerDefectoSelect","horasemana","startDateMostrar","endDateMostrar","numberPermissions","ArrayOrdinarias"]),i(be,{show:t.editOpen,onClose:a[5]||(a[5]=o=>t.editOpen=!1),Reporte:t.generico,title:e.title,valoresSelect:e.valoresSelect,showUsers:e.showUsers,correccionUsuario:!1},null,8,["show","Reporte","title","valoresSelect","showUsers"]),h(i(_e,{show:t.deleteOpen,onClose:a[6]||(a[6]=o=>t.deleteOpen=!1),Reporte:t.generico,title:e.title},null,8,["show","Reporte","title"]),[[f,r.can(["delete reporte"])]]),r.can(["delete reporte"])&&r.can(["updateCorregido reporte"])?(n(),y(we,{key:0,show:t.deleteBulkOpen,onClose:a[7]||(a[7]=o=>(t.deleteBulkOpen=!1,t.multipleSelect=!1,t.selectedId=[])),selectedId:t.selectedId,title:e.title},null,8,["show","selectedId","title"])):u("",!0)])]),s("div",Te,[s("div",Be,[s("div",Re,[Ee,m.filters!==null?(n(),y(H,{key:0,modelValue:t.params.perPage,"onUpdate:modelValue":a[8]||(a[8]=o=>t.params.perPage=o),dataSet:t.dataSet},null,8,["modelValue","dataSet"])):u("",!0),h((n(),y(P,{onClick:a[9]||(a[9]=o=>t.deleteBulkOpen=!0),class:"px-3 py-1.5"},{default:b(()=>[i(p(F),{class:"w-5 h-5"})]),_:1})),[[f,t.selectedId.length!=0&&r.can(["delete reporte"])],[_,r.lang().tooltip.delete_selected]])]),s("div",qe,[i(S,{modelValue:t.params.searchHorasD,"onUpdate:modelValue":a[10]||(a[10]=o=>t.params.searchHorasD=o),type:"number",min:"0",class:"block w-full rounded-lg",placeholder:r.lang().placeholder.searchHorasD},null,8,["modelValue","placeholder"]),i(S,{modelValue:t.params.search,"onUpdate:modelValue":a[11]||(a[11]=o=>t.params.search=o),type:"number",min:"0",max:"12",class:"block w-full rounded-lg",placeholder:r.lang().placeholder.searchDates},null,8,["modelValue","placeholder"]),i(S,{modelValue:t.params.searchDDay,"onUpdate:modelValue":a[12]||(a[12]=o=>t.params.searchDDay=o),type:"number",min:"0",max:"31",class:"block w-full rounded-lg",placeholder:r.lang().placeholder.searchDDay},null,8,["modelValue","placeholder"]),Le,h(s("input",{"onUpdate:modelValue":a[13]||(a[13]=o=>t.params.soloValidos=o),id:"soloval",type:"checkbox",class:"bg-gray-100 h-7 w-7 mt-2 ml-5"},null,512),[[N,t.params.soloValidos]])])]),s("div",Xe,[s("table",ze,[s("thead",Je,[s("tr",Ge,[s("th",Ke,[i(ue,{checked:t.multipleSelect,"onUpdate:checked":a[14]||(a[14]=o=>t.multipleSelect=o),onChange:J},null,8,["checked"])]),(n(!0),l(v,null,x(m.nombresTabla[0],(o,w)=>(n(),l("th",{key:w,onClick:c=>z(m.nombresTabla[2][w]),class:"px-2 py-4 cursor-pointer hover:bg-sky-50 dark:hover:bg-sky-800"},[s("div",We,[s("span",null,d(o),1),m.nombresTabla[2][w]!==null?(n(),y(p(ce),{key:0,class:"w-4 h-4"})):u("",!0)])],8,Qe))),128))])]),s("tbody",null,[(n(!0),l(v,null,x(m.fromController.data,(o,w)=>(n(),l("tr",{key:w,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[s("td",Ye,[h(s("input",{type:"checkbox",onChange:G,value:o.id,"onUpdate:modelValue":a[15]||(a[15]=c=>t.selectedId=c),class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary"},null,40,Ze),[[N,t.selectedId]])]),s("td",es,[s("div",ss,[s("div",ts,[s("form",{onSubmit:oe(C,["prevent"])},[r.can(["update reporte"])?h((n(),y(he,{key:0,type:"button",onClick:c=>(t.editOpen=!0,t.generico=o),class:"px-2 py-1.5 rounded-sm"},{default:b(()=>[i(p(pe),{class:"w-6 h-6"})]),_:2},1032,["onClick"])),[[_,r.lang().tooltip.edit]]):u("",!0),r.can(["update reporte"])?h((n(),y(Ie,{key:1,type:"button",class:ne(["mx-1 w-12 h-10",{"opacity-25":p(g).processing}]),disabled:p(g).processing,onClick:c=>(t.generico=o,C(!0))},{default:b(()=>[i(p(T),{class:"w-6 h-6"})]),_:2},1032,["class","disabled","onClick"])),[[_,"Aprobar"]]):u("",!0)],40,rs),r.can(["delete reporte"])?h((n(),y(P,{key:0,type:"button",onClick:c=>(t.deleteOpen=!0,t.generico=o),class:"px-2 py-1.5 rounded-sm"},{default:b(()=>[i(p(F),{class:"w-6 h-6"})]),_:2},1032,["onClick"])),[[_,r.lang().tooltip.delete]]):u("",!0)])])]),s("td",as,d(w+1),1),s("td",os,d(m.showSelect[o.centro_costo_id]),1),h(s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},d(m.showUsers[o.user_id]),513),[[f,r.can(["updateCorregido reporte"])]]),(n(!0),l(v,null,x(m.nombresTabla[1],(c,K)=>(n(),l("td",{key:K,class:"whitespace-nowrap py-4 px-2 sm:py-3"},[c.substr(0,1)==="s"?(n(),l("div",ns,d(o[c.substr(2)]),1)):c.substr(0,1)==="d"?(n(),l("div",ls,d(p(B)(o[c.substr(2)])),1)):c.substr(0,1)==="t"?(n(),l("div",is,d(p(B)(o[c.substr(2)],"conLaHora")),1)):c.substr(0,1)==="b"?(n(),l("div",ds,[o[c.substr(2)]===0?(n(),l("div",cs," Aun no validada")):o[c.substr(2)]===1?(n(),l("div",ps,[i(p(T),{class:"w-8 h-8 text-green-600"})])):o[c.substr(2)]===2?(n(),l("div",ms,[i(p(me),{class:"w-8 h-8 text-red-600"})])):u("",!0)])):c.substr(0,1)=="i"?(n(),l("div",us,d(p(R)(o[c.substr(2)])),1)):c.substr(0,1)=="m"?(n(),l("div",hs,d(p(R)(o[c.substr(2)],0,1)),1)):u("",!0)]))),128))]))),128)),h(s("tr",ys,[fs,h(s("td",bs,null,512),[[f,r.can(["updateCorregido reporte"])]]),_s,ws,m.numberPermissions>1?(n(),l("td",gs)):u("",!0),vs,ks,xs,s("td",Ss," Trabajadas: "+d(e.sumhoras_trabajadas),1),s("td",Ds,d(e.sumdiurnas?"Diurnas: "+e.sumdiurnas:""),1),s("td",Cs,d(e.sumnocturnas?"Nocturnas: "+e.sumnocturnas:""),1),s("td",Os,d(e.sumextra_diurnas?"Extra diurnas: "+e.sumextra_diurnas:""),1),s("td",$s,d(e.sumextra_nocturnas?"Extra nocturnas: "+e.sumextra_nocturnas:""),1),s("td",Vs,d(e.sumdominical_diurno?"Dominical diurno: "+e.sumdominical_diurno:""),1),s("td",Is,d(e.sumdominical_nocturno?"Dominical nocturno: "+e.sumdominical_nocturno:""),1),s("td",As,d(e.sumdominical_extra_diurno?"Dominical extra diurno: "+e.sumdominical_extra_diurno:""),1),s("td",js,d(e.sumdominical_extra_nocturno?"Dominical extra nocturno: "+e.sumdominical_extra_nocturno:""),1),Ms,Ns],512),[[f,e.sumhoras_trabajadas!=0]])])])]),s("div",Us,[i(de,{links:e.fromController,filters:t.params},null,8,["links","filters"])])]),e.quincena!=null?h((n(),l("section",Hs,[s("div",Ps,[s("div",Fs,[s("div",Ts,[Bs,e.nombrePersona?(n(),l("h2",Rs,[k(" Reportes de este mes: "),s("b",null,d(e.nombrePersona),1)])):u("",!0),s("div",Es,[i(p(Oe),{id:"my-chart-id",options:L,data:X})])])])])],512)),[[f,r.can(["updateCorregido reporte"])||r.can(["isAdmin"])||r.can(["isadministrativo"])]]):u("",!0)])]),_:1})],64)}}};export{mt as default};
