import{p as M,l as L,q as f,F as q,T as v,m as $,f as d,a as u,u as s,w as g,v as b,x as C,o as r,Z as O,b as e,t as l,g as p,e as y,y as F,z as V,c as D,d as _,A as E}from"./app-de7a70b3.js";import{_ as A}from"./AuthenticatedLayout-dec277af.js";import{_ as Q}from"./Breadcrumb-5dd26edf.js";import{_ as w}from"./PrimaryButton-a4148a76.js";import{_ as j}from"./SelectInput-4641c978.js";import{X as I}from"./main-75f60039.js";import"./app-57141eb6.js";import{C as T}from"./global-683f42af.js";import{r as X,a as P,b as Z}from"./BookOpenIcon-34590d27.js";import"./index-25162522.js";const G={class:"space-y-4"},J={key:0,class:"px-4 sm:px-0"},K={class:"rounded-lg overflow-hidden w-fit"},W={class:"flex max-w-screen-xl shadow-lg rounded-lg"},Y=e("div",{class:"bg-yellow-600 py-4 px-6 rounded-l-lg flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",class:"fill-current text-white",width:"20",height:"20"},[e("path",{"fill-rule":"evenodd",d:"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"})])],-1),ee={class:"px-8 py-6 bg-white rounded-r-lg flex justify-between items-center w-full border border-l-transparent border-gray-200"},se={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},te={class:"text-gray-600 body-font"},oe={class:"container px-5 py-12 mx-auto"},ae={key:0,class:"flex flex-wrap -m-4"},re={class:"p-4 w-full sm:w-1/2"},ie={class:"h-full border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden"},le={class:"p-6"},ne=e("h2",{class:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1"}," Formato xlsx",-1),ce=e("h3",{class:"title-font text-lg font-medium text-gray-900 mb-3"},"Descargar reporte ",-1),de=e("p",{class:"leading-relaxed mb-3"}," Este formulario permite descargar el reporte de la quincena",-1),ue={class:""},me={class:""},pe={class:"col-span-1 lg:col-span-2"},_e={key:0,class:"text-gray-600 body-font"},he={class:"container p-5 mx-auto"},fe={class:"text-center mb-1"},ge=e("h1",{class:"text-xl font-medium text-center title-font text-gray-900 mb-4"}," Recuerde",-1),xe=e("p",{class:"text-base leading-relaxed w-full mx-auto"}," Solo se descargarán, Los reportes que sean validos.",-1),ve={key:0,class:"text-xl leading-relaxed w-full mx-auto"},be={key:1,class:"text-base leading-relaxed w-full mx-auto"},ye={key:2,class:"text-xl leading-relaxed w-full mx-auto"},we={key:1,class:"text-gray-600 body-font"},Se=e("div",{class:"container p-5 mx-auto"},[e("div",{class:"text-center mb-1"},[e("h1",{class:"text-xl font-medium text-center title-font text-gray-900 mb-4"}," Hay empleados con salario en cero")])],-1),Ne=[Se],ke={class:"p-4 w-full sm:w-1/2"},Re={class:"h-full border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden"},qe={class:"p-6"},Fe=e("h2",{class:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1"}," Seleccione quincena",-1),Ve=e("h3",{class:"title-font text-lg font-medium text-gray-900 mb-3"},"Descargar siigo ",-1),De=e("p",{class:"leading-relaxed mb-3"}," Este formulario permite descargar el reporte de la quincena para siigo",-1),Ee={class:"flex"},je={class:"text-gray-600 body-font"},Ie={class:"container p-5 mx-auto"},Ue={key:0,class:"text-center mb-1"},He={key:0,class:"text-xl font-medium text-center title-font text-gray-900 mb-4"},ze=e("p",{class:"text-base leading-relaxed w-full mx-auto"},null,-1),Be={class:"text-base leading-relaxed w-full mx-auto"},Me={class:"p-4 w-full sm:w-1/2"},Le={class:"h-full border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden"},$e={class:"p-6"},Ce=e("h3",{class:"mx-auto text-center title-font text-xl font-medium text-gray-900 mb-2"},"Subir empleados",-1),Oe=e("h2",{class:"mb-4 tracking-widest text-center text-sm title-font font-medium text-gray-400 dark:text-gray-100"}," Formato xlsx",-1),Ae=e("p",{class:"leading-relaxed mb-3"}," Este formulario solo permite cargar empleados o administrativos",-1),Qe=["value"],Te={class:"w-full"},Xe={class:"flex items-center flex-wrap my-6"},Pe={class:"text-indigo-500 inline-flex items-center md:mb-2 lg:mb-0"},Ze={class:"text-gray-600 body-font"},Ge={class:"container p-5 mx-auto"},Je=e("div",{class:"text-center mb-1"},[e("h1",{class:"text-xl font-medium text-center title-font text-gray-900 mb-4"}," Formato del excel "),e("p",{class:"text-base leading-relaxed w-full mx-auto"}," Solo la primera fila debe ser la misma ")],-1),Ke={class:"flex flex-wrap sm:mx-auto sm:mb-2 -mx-2"},We={class:"px-2 w-full"},Ye={class:"bg-gray-50 rounded flex p-1 h-full items-center"},es=e("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",class:"text-indigo-500 w-6 h-6 flex-shrink-0 mr-4",viewBox:"0 0 24 24"},[e("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),_(),e("path",{d:"M22 4L12 14.01l-3-3"})],-1),ss={class:"title-font font-medium"},ms={__name:"uploadFromExcel",props:{title:String,breadcrumbs:Object,NumUsers:Number,NumReportes:Number,ini:Date,fin:Date,flash:String,NumReportesRecha:Number,NumReportesSinval:Number,haySinsalario:Number,NumReportesSigo:Number,NumReportesRechaSigo:Number,NumReportesSinvalSigo:Number},setup(x){const{_:S,debounce:N,pickBy:k}=C,t=x,o=M({respuesta:"",params:{fecha_ini:"",quincena:"",arrayFestivos:""},paramsSigo:{fecha_ini:"",quincena:"",arrayFestivos:"",year:"",month:""},warnn:"",tiposSiigo:[]});L(()=>{}),f(()=>S.cloneDeep(o.params),N(()=>{let n=k(o.params);q.get(route("user.uploadexcel"),n,{replace:!0,preserveState:!0,preserveScroll:!0})},30)),f(()=>S.cloneDeep(o.paramsSigo),N(()=>{let n=k(o.paramsSigo);q.get(route("user.uploadexceSigo"),n,{replace:!0,preserveState:!0,preserveScroll:!0})},30));const h=v({archivo1:null}),i=v({archivo1:null,fecha_ini:"",quincena:1,NumeroDiasFestivos:0}),a=v({archivosigo:null,quincena_sigo:1,fecha_ini_sigo:"",NumeroDiasFestivos:0});f(()=>i.fecha_ini,n=>{o.params.fecha_ini=i.fecha_ini,o.params.quincena=i.quincena,o.params.arrayFestivos=T(o.params.quincena,n.month,n.year),i.NumeroDiasFestivos=o.params.arrayFestivos.length,console.log("festivos:",o.params.arrayFestivos)}),f(()=>a.fecha_ini_sigo,n=>{o.paramsSigo.year=a.fecha_ini_sigo.year,o.paramsSigo.month=a.fecha_ini_sigo.month,o.paramsSigo.quincena=a.quincena_sigo,o.paramsSigo.arrayFestivos=-1}),$(()=>{t.flash.warning&&(o.warnn=t.flash.warning),a.fecha_ini_sigo});function U(){h.post(route("user.uploadexcelpost"),{preserveScroll:!0,onSuccess:()=>{},onError:()=>null,onFinish:()=>null})}const H=()=>{window.open("users/export/"+i.NumeroDiasFestivos+"/"+i.quincena+"/"+i.fecha_ini.month+"/"+i.fecha_ini.year,"_blank")},z=()=>{window.open("users/downloadsigo/"+a.NumeroDiasFestivos+"/"+a.quincena_sigo+"/"+a.fecha_ini_sigo.month+"/"+a.fecha_ini_sigo.year,"_blank")},R=[{value:null,label:"seleccione una quincena"},{value:1,label:1},{value:2,label:2}],B=[{value:"nombre",rule:"Obligatorio"},{value:"correo",rule:"Debe ser unico"},{value:"cedula",rule:"Debe ser un número"},{value:"telefono",rule:"Obligatorio"},{value:"celular",rule:"Obligatorio"},{value:"rol",rule:"empleado o administrativo "},{value:"cargo",rule:"Verificar que el rol exista"},{value:"fecha ingreso",rule:"fecha ingreso a la empresa"},{value:"sexo",rule:"Masculino o Femenino"},{value:"salario",rule:"Sin puntos ni comas"}];return o.tiposSiigo=["10- Horas extras diurnas 125%- Ingreso","11- Horas extras nocturnas 175%- Ingreso","08- Hora extra recargo dominical o festivo- Ingreso","06- Hora dominical o festiva nocturna- Ingreso","07- Hora extra diurna dominical o festiva- Ingreso","12- Horas extras nocturnas dominical o festiva- Ingreso","26- Recargo nocturno- Ingreso"],(n,m)=>(r(),d(b,null,[u(s(O),{title:t.title},null,8,["title"]),u(A,null,{default:g(()=>[u(Q,{title:x.title,breadcrumbs:x.breadcrumbs},null,8,["title","breadcrumbs"]),e("div",G,[o.warnn?(r(),d("div",J,[e("div",K,[e("div",W,[Y,e("div",ee,[e("div",null,l(o.warnn?o.warnn:""),1)])])])])):p("",!0),e("div",se,[e("section",te,[e("div",oe,[n.can(["update user"])?(r(),d("div",ae,[e("div",re,[e("div",ie,[u(s(X),{class:"h-24 lg:h-48 md:h-36 w-full object-cover object-center"}),e("div",le,[e("form",{onSubmit:y(H,["prevent"]),id:"downloadReporte",class:"text-center"},[ne,ce,de,e("div",ue,[e("div",me,[u(j,{modelValue:s(i).quincena,"onUpdate:modelValue":m[0]||(m[0]=c=>s(i).quincena=c),dataSet:R,class:"my-2 py-3 block w-full"},null,8,["modelValue"])]),e("div",pe,[u(s(I),{"month-picker":"","auto-apply":"",teleport:!0,id:"fecha_ini",type:"date",class:"mt-1 block w-full",modelValue:s(i).fecha_ini,"onUpdate:modelValue":m[1]||(m[1]=c=>s(i).fecha_ini=c),required:"",placeholder:n.lang().placeholder.fecha_ini,error:s(i).errors.fecha_ini},null,8,["modelValue","placeholder","error"])])]),s(i).fecha_ini&&t.NumReportes>0&&t.haySinsalario==!1?F((r(),D(w,{key:0,disabled:s(i).fecha_ini==null,class:"rounded-none my-4"},{default:g(()=>[_(" Exportar Quincena ")]),_:1},8,["disabled"])),[[V,n.can(["create user"])]]):p("",!0)],32)]),t.haySinsalario===0?(r(),d("section",_e,[e("div",he,[e("div",fe,[ge,xe,t.NumReportes!=0?(r(),d("p",ve,[_(" Para esta fecha, hay "),e("b",null,l(t.NumReportes),1),_(" reportes.")])):p("",!0),t.NumReportes!=0?(r(),d("p",be,[e("small",null,l(t.ini),1),_(" - "),e("small",null,l(t.fin),1)])):p("",!0),t.NumReportes!=0?(r(),d("p",ye,[_(" Existen "),e("b",null,l(t.NumReportesRecha),1),_(" rechazados y "),e("b",null,l(t.NumReportesSinval),1),_(" sin aprobar.")])):p("",!0)])])])):(r(),d("section",we,Ne))])]),e("div",ke,[e("div",Re,[u(s(P),{class:"h-24 lg:h-48 md:h-36 w-full object-cover object-center"}),e("div",qe,[e("form",{onSubmit:y(z,["prevent"]),id:"downloadReporte",class:"text-center"},[Fe,Ve,De,e("div",Ee,[u(j,{modelValue:s(a).quincena_sigo,"onUpdate:modelValue":m[2]||(m[2]=c=>s(a).quincena_sigo=c),id:"quincena_si",dataSet:R,class:"mt-1 block w-1/3 mx-1"},null,8,["modelValue"]),u(s(I),{"month-picker":"","auto-apply":"",teleport:!0,id:"fecha_ini_sigo",type:"date",modelValue:s(a).fecha_ini_sigo,"onUpdate:modelValue":m[3]||(m[3]=c=>s(a).fecha_ini_sigo=c),required:"",placeholder:n.lang().placeholder.fecha_ini_sigo,error:s(a).errors.fecha_ini_sigo,class:"mt-1 w-1/3"},null,8,["modelValue","placeholder","error"])]),s(a).fecha_ini_sigo.year?(r(),D(w,{key:0,disabled:s(a).fecha_ini_sigo==null,class:"rounded-none my-4"},{default:g(()=>[_(" Descargar formato siigo ")]),_:1},8,["disabled"])):p("",!0)],32)]),e("section",je,[e("div",Ie,[t.NumReportesSigo||t.NumReportesRechaSigo||t.NumReportesSinvalSigo?(r(),d("div",Ue,[e("p",null,"# Reportes validos: "+l(t.NumReportesSigo),1),e("p",null,"# Reportes rechazados: "+l(t.NumReportesRechaSigo),1),e("p",null,"# Reportes sin validar: "+l(t.NumReportesSinvalSigo),1),t.NumReportesSigo?p("",!0):(r(),d("h1",He," Este formato incluye ")),ze,(r(!0),d(b,null,E(o.tiposSiigo,c=>(r(),d("p",Be,[e("p",null,l(c),1)]))),256))])):p("",!0)])])])]),e("div",Me,[e("div",Le,[u(s(Z),{class:"h-24 lg:h-48 md:h-36 w-full object-cover object-center"}),e("div",$e,[Ce,Oe,Ae,e("form",{onSubmit:y(U,["prevent"]),id:"upload"},[e("input",{type:"file",onInput:m[4]||(m[4]=c=>s(h).archivo1=c.target.files[0]),accept:"application/vnd.openxmlformUpats-officedocument.spreadsheetml.sheet"},null,32),s(h).progress?(r(),d("progress",{key:0,value:s(h).progress.percentage,max:"100"},l(s(h).progress.percentage)+"% ",9,Qe)):p("",!0),e("div",Te,[F(u(w,{disabled:s(h).archivo1==null,class:"rounded-none my-4"},{default:g(()=>[_(l(n.lang().button.subir),1)]),_:1},8,["disabled"]),[[V,n.can(["create user"])]])])],32),e("div",Xe,[e("a",Pe," Numero de Empleados: "+l(t.NumUsers),1),e("section",Ze,[e("div",Ge,[Je,e("div",Ke,[(r(),d(b,null,E(B,c=>e("div",We,[e("div",Ye,[es,e("span",ss,l(c.value)+" : "+l(c.rule),1)])])),64))])])])])])])])])):p("",!0)])])])])]),_:1})],64))}};export{ms as default};
