import{o as n,f as l,r as K,l as Q,J as W,m as Y,O as Z,v as ee,a as c,u as p,w as b,F as v,p as se,X as te,b as s,c as y,d as k,t as i,g as u,q as h,s as f,A as j,x,y as re,e as ae,n as oe}from"./app-0fac790c.js";import{_ as ne}from"./AuthenticatedLayout-a2a45f88.js";import{_ as le}from"./Breadcrumb-a4b78636.js";import{_ as M}from"./TextInput-d3a71cab.js";import{_ as N}from"./PrimaryButton-a5d595f0.js";import{_ as P}from"./SelectInput-8a67e281.js";import{_ as U}from"./DangerButton-d2dc2ecc.js";import{_ as ie}from"./Pagination-c8ed60fa.js";import{T as F,C as de,P as ce,a as T,X as pe}from"./index-de866989.js";import{_ as me}from"./Checkbox-1cb86dc3.js";import{_ as ue}from"./InfoButton-a38b490c.js";import he from"./Create-ab499bbe.js";import ye from"./CreateMassive-be41be75.js";import fe from"./Edit-de451022.js";import be from"./Delete-f4d510a9.js";import _e from"./DeleteBulk-09e7013f.js";import{f as B,n as H}from"./global-2ca809e7.js";import{C as we,p as ge,a as ve,b as ke,B as xe,c as Se,L as De,d as Ce}from"./index-8d2d0774.js";import{_ as Oe}from"./InputLabel-d6f8fe6d.js";import"./SecondaryButton-5e0a7b0c.js";import"./InputError-8dfb9e91.js";import"./main-a2329f17.js";import"./app-57141eb6.js";const $e=["type"],Ie={__name:"SuccessButton",props:{type:{type:String,default:"submit"}},setup(m){return(e,S)=>(n(),l("button",{type:m.type,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 active:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150"},[K(e.$slots,"default")],8,$e))}},Ae={class:"space-y-4"},Ve={class:"px-4 sm:px-0"},je={class:"rounded-lg overflow-hidden w-fit"},Me={class:"mt-4 inline-flex"},Ne={key:2,class:"mx-4"},Pe={key:3,class:"mx-4"},Ue=s("p",{class:"pt-1 mt-6 font-extrabold"},"Sin reportes",-1),Fe=[Ue],Te={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},Be={class:"flex justify-between p-2"},He={class:"flex space-x-2"},Re={class:"flex"},Ee=s("label",{for:"soloval",class:"mx-3"},"Solo validos",-1),qe={class:"overflow-x-auto scrollbar-table"},Le={class:"w-full"},Xe={class:"uppercase text-sm border-t border-gray-200 dark:border-gray-700"},ze={class:"dark:bg-gray-900 text-left"},Je={class:"px-2 py-4 text-center"},Ge=["onClick"],Ke={class:"flex justify-between items-center"},Qe={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},We=["value"],Ye={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ze={class:"flex justify-start items-center"},es={class:"flex rounded-md overflow-hidden"},ss=["onSubmit"],ts={class:"whitespace-nowrap py-4 px-2 sm:py-3"},rs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},as={key:0},os={key:1},ns={key:2},ls={key:3},is={key:0},ds={key:1},cs={key:2},ps={key:4},ms={key:5},us={class:"my-2 py-4 border-t border-gray-200 dark:border-gray-900 hover:bg-sky-200 hover:dark:bg-gray-900/20"},hs=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),ys={class:"whitespace-nowrap py-4 px-2 sm:py-3"},fs=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"}," Totales ",-1),bs=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),_s={key:0,class:"whitespace-nowrap py-4 px-2 sm:py-3"},ws=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),gs=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),vs=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),ks={class:"whitespace-nowrap py-4 px-2 sm:py-3"},xs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ss={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ds={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Cs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Os={class:"whitespace-nowrap py-4 px-2 sm:py-3"},$s={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Is={class:"whitespace-nowrap py-4 px-2 sm:py-3"},As={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Vs=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),js=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),Ms={class:"flex justify-betwween items-center p-2 border-t border-gray-200 dark:border-gray-700"},Ns={key:0,class:"text-gray-600 body-font overflow-hidden"},Ps={class:"container px-5 py-4 mx-auto"},Us={class:"flex flex-wrap m-2"},Fs={class:"p-1 md:w-1/2 flex flex-col items-start"},Ts=s("span",{class:"inline-block py-1 px-2 rounded bg-indigo-50 text-indigo-500 text-xs font-medium tracking-widest"}," Este mes ",-1),Bs={key:0,class:"sm:text-3xl text-2xl title-font font-medium text-gray-900 mt-4 mb-4"},Hs={class:"m-1 p-1 w-full"},ct={__name:"Index",props:{title:String,filters:Object,fromController:Object,breadcrumbs:Object,perPage:Number,nombresTabla:Array,valoresSelect:Object,showSelect:Object,showUsers:Object,userFiltro:Object,IntegerDefectoSelect:Number,horasemana:Number,startDateMostrar:String,endDateMostrar:String,sumhoras_trabajadas:Number,quincena:Object,nombrePersona:String,numberPermissions:Number,ArrayOrdinarias:Array,sumdiurnas:Number,sumnocturnas:Number,sumextra_diurnas:Number,sumextra_nocturnas:Number,sumdominical_diurno:Number,sumdominical_nocturno:Number,sumdominical_extra_diurno:Number,sumdominical_extra_nocturno:Number,horasTrabajadasHoy:Array,HorasDeCadaSemana:Array,ArrayHorasSemanales:Array},setup(m){var C,O,$,I,A,V;const e=m;we.register(ge,ve,ke,xe,Se,De);const{_:S,debounce:R,pickBy:E}=se,q={responsive:!0,maintainAspectRatio:!0,color:"#000",darkcolor:"#fff"},L={name:"Numero de reportes",datasets:[{label:"Numero de Reportes",data:e.quincena,backgroundColor:"#f87979"}]},t=Q({params:{soloValidos:(C=e.filters)==null?void 0:C.soloValidos,FiltroUser:(O=e.filters)==null?void 0:O.FiltroUser,search:($=e.filters)==null?void 0:$.search,searchDDay:(I=e.filters)==null?void 0:I.searchDDay,field:(A=e.filters)==null?void 0:A.field,order:(V=e.filters)==null?void 0:V.order,perPage:e.perPage},selectedId:[],multipleSelect:!1,createOpen:!1,createMassOpen:!1,editOpen:!1,editCorregirOpen:!1,deleteOpen:!1,deleteBulkOpen:!1,generico:null,nope:null,dataSet:W().props.app.perpage}),X=r=>{r!=null&&e.userFiltro?(r=r.substr(2),t.params.field=r.replace(/ /g,"_"),t.params.order=t.params.order==="asc"?"desc":"asc"):alert("No esta permitido organizar la tabla en esta vista")};Y(()=>S.cloneDeep(t.params),R(()=>{let r=E(t.params);Z.get(route("Reportes.index"),r,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const z=r=>{var a;r.target.checked===!1?t.selectedId=[]:(a=e.fromController)==null||a.data.forEach(_=>{t.selectedId.push(_.id)})},J=()=>{var r;((r=e.fromController)==null?void 0:r.data.length)==t.selectedId.length?t.multipleSelect=!0:t.multipleSelect=!1},g=ee({valido:!1}),D=r=>{var a;g.valido=r,g.put(route("Reportes.update",(a=t.generico)==null?void 0:a.id),{preserveScroll:!0,onSuccess:()=>{g.reset()},onError:()=>null,onFinish:()=>null})};return(r,a)=>{const _=re("tooltip");return n(),l(v,null,[c(p(te),{title:e.title},null,8,["title"]),c(ne,null,{default:b(()=>[c(le,{title:m.title,breadcrumbs:m.breadcrumbs},null,8,["title","breadcrumbs"]),s("div",Ae,[s("div",Ve,[s("div",je,[s("div",Me,[r.can(["create reporte"])?(n(),y(N,{key:0,class:"rounded-md mx-2 h-10 mt-6",onClick:a[0]||(a[0]=o=>t.createOpen=!0)},{default:b(()=>[k(i(r.lang().button.add),1)]),_:1})):u("",!0),r.can(["isAdmin"])?(n(),y(N,{key:1,class:"rounded-md mx-2 h-10 mt-6",onClick:a[1]||(a[1]=o=>t.createMassOpen=!0)},{default:b(()=>[k(i(r.lang().button.add)+" Masivamente ",1)]),_:1})):u("",!0),e.userFiltro&&e.userFiltro.length>0?h((n(),l("div",Ne,[c(Oe,{for:"centro_costo_id",value:"Filtrar por trabajador"}),c(P,{modelValue:t.params.FiltroUser,"onUpdate:modelValue":a[2]||(a[2]=o=>t.params.FiltroUser=o),dataSet:e.userFiltro,class:"mt-1 block w-full"},null,8,["modelValue","dataSet"])],512)),[[f,r.can(["isingeniero","isadmin","isadministrativo","issupervisor"])&&e.userFiltro]]):h((n(),l("div",Pe,Fe,512)),[[f,r.can(["isingeniero","isadmin","isadministrativo","issupervisor"])&&e.userFiltro]])]),c(he,{show:t.createOpen,onClose:a[3]||(a[3]=o=>t.createOpen=!1),title:e.title,valoresSelect:e.valoresSelect,IntegerDefectoSelect:e.IntegerDefectoSelect,horasemana:e.horasemana,startDateMostrar:e.startDateMostrar,endDateMostrar:e.endDateMostrar,numberPermissions:e.numberPermissions,ArrayOrdinarias:e.ArrayOrdinarias,horasTrabajadasHoy:e.horasTrabajadasHoy,HorasDeCadaSemana:e.HorasDeCadaSemana,ArrayHorasSemanales:e.ArrayHorasSemanales},null,8,["show","title","valoresSelect","IntegerDefectoSelect","horasemana","startDateMostrar","endDateMostrar","numberPermissions","ArrayOrdinarias","horasTrabajadasHoy","HorasDeCadaSemana","ArrayHorasSemanales"]),c(ye,{show:t.createMassOpen,onClose:a[4]||(a[4]=o=>t.createMassOpen=!1),title:e.title,valoresSelect:e.valoresSelect,IntegerDefectoSelect:e.IntegerDefectoSelect,horasemana:e.horasemana,startDateMostrar:e.startDateMostrar,endDateMostrar:e.endDateMostrar,numberPermissions:e.numberPermissions,ArrayOrdinarias:e.ArrayOrdinarias},null,8,["show","title","valoresSelect","IntegerDefectoSelect","horasemana","startDateMostrar","endDateMostrar","numberPermissions","ArrayOrdinarias"]),c(fe,{show:t.editOpen,onClose:a[5]||(a[5]=o=>t.editOpen=!1),Reporte:t.generico,title:e.title,valoresSelect:e.valoresSelect,showUsers:e.showUsers,correccionUsuario:!1},null,8,["show","Reporte","title","valoresSelect","showUsers"]),h(c(be,{show:t.deleteOpen,onClose:a[6]||(a[6]=o=>t.deleteOpen=!1),Reporte:t.generico,title:e.title},null,8,["show","Reporte","title"]),[[f,r.can(["delete reporte"])]]),r.can(["delete reporte"])&&r.can(["updateCorregido reporte"])?(n(),y(_e,{key:0,show:t.deleteBulkOpen,onClose:a[7]||(a[7]=o=>(t.deleteBulkOpen=!1,t.multipleSelect=!1,t.selectedId=[])),selectedId:t.selectedId,title:e.title},null,8,["show","selectedId","title"])):u("",!0)])]),s("div",Te,[s("div",Be,[s("div",He,[m.filters!==null?(n(),y(P,{key:0,modelValue:t.params.perPage,"onUpdate:modelValue":a[8]||(a[8]=o=>t.params.perPage=o),dataSet:t.dataSet},null,8,["modelValue","dataSet"])):u("",!0),h((n(),y(U,{onClick:a[9]||(a[9]=o=>t.deleteBulkOpen=!0),class:"px-3 py-1.5"},{default:b(()=>[c(p(F),{class:"w-5 h-5"})]),_:1})),[[f,t.selectedId.length!=0&&r.can(["delete reporte"])],[_,r.lang().tooltip.delete_selected]])]),s("div",Re,[c(M,{modelValue:t.params.search,"onUpdate:modelValue":a[10]||(a[10]=o=>t.params.search=o),type:"number",min:"0",max:"12",class:"block w-full rounded-lg",placeholder:r.lang().placeholder.searchDates},null,8,["modelValue","placeholder"]),c(M,{modelValue:t.params.searchDDay,"onUpdate:modelValue":a[11]||(a[11]=o=>t.params.searchDDay=o),type:"number",min:"0",max:"31",class:"block w-full rounded-lg",placeholder:r.lang().placeholder.searchDDay},null,8,["modelValue","placeholder"]),Ee,h(s("input",{"onUpdate:modelValue":a[12]||(a[12]=o=>t.params.soloValidos=o),id:"soloval",type:"checkbox",class:"bg-gray-100 h-7 w-7 mt-2 ml-5"},null,512),[[j,t.params.soloValidos]])])]),s("div",qe,[s("table",Le,[s("thead",Xe,[s("tr",ze,[s("th",Je,[c(me,{checked:t.multipleSelect,"onUpdate:checked":a[13]||(a[13]=o=>t.multipleSelect=o),onChange:z},null,8,["checked"])]),(n(!0),l(v,null,x(m.nombresTabla[0],(o,w)=>(n(),l("th",{key:w,onClick:d=>X(m.nombresTabla[2][w]),class:"px-2 py-4 cursor-pointer hover:bg-sky-50 dark:hover:bg-sky-800"},[s("div",Ke,[s("span",null,i(o),1),m.nombresTabla[2][w]!==null?(n(),y(p(de),{key:0,class:"w-4 h-4"})):u("",!0)])],8,Ge))),128))])]),s("tbody",null,[(n(!0),l(v,null,x(m.fromController.data,(o,w)=>(n(),l("tr",{key:w,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[s("td",Qe,[h(s("input",{type:"checkbox",onChange:J,value:o.id,"onUpdate:modelValue":a[14]||(a[14]=d=>t.selectedId=d),class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary"},null,40,We),[[j,t.selectedId]])]),s("td",Ye,[s("div",Ze,[s("div",es,[s("form",{onSubmit:ae(D,["prevent"])},[r.can(["update reporte"])?h((n(),y(ue,{key:0,type:"button",onClick:d=>(t.editOpen=!0,t.generico=o),class:"px-2 py-1.5 rounded-sm"},{default:b(()=>[c(p(ce),{class:"w-6 h-6"})]),_:2},1032,["onClick"])),[[_,r.lang().tooltip.edit]]):u("",!0),r.can(["update reporte"])?h((n(),y(Ie,{key:1,type:"button",class:oe(["mx-1 w-12 h-10",{"opacity-25":p(g).processing}]),disabled:p(g).processing,onClick:d=>(t.generico=o,D(!0))},{default:b(()=>[c(p(T),{class:"w-6 h-6"})]),_:2},1032,["class","disabled","onClick"])),[[_,"Aprobar"]]):u("",!0)],40,ss),r.can(["delete reporte"])?h((n(),y(U,{key:0,type:"button",onClick:d=>(t.deleteOpen=!0,t.generico=o),class:"px-2 py-1.5 rounded-sm"},{default:b(()=>[c(p(F),{class:"w-6 h-6"})]),_:2},1032,["onClick"])),[[_,r.lang().tooltip.delete]]):u("",!0)])])]),s("td",ts,i(w+1),1),s("td",rs,i(m.showSelect[o.centro_costo_id]),1),h(s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},i(m.showUsers[o.user_id]),513),[[f,r.can(["updateCorregido reporte"])]]),(n(!0),l(v,null,x(m.nombresTabla[1],(d,G)=>(n(),l("td",{key:G,class:"whitespace-nowrap py-4 px-2 sm:py-3"},[d.substr(0,1)==="s"?(n(),l("div",as,i(o[d.substr(2)]),1)):d.substr(0,1)==="d"?(n(),l("div",os,i(p(B)(o[d.substr(2)])),1)):d.substr(0,1)==="t"?(n(),l("div",ns,i(p(B)(o[d.substr(2)],"conLaHora")),1)):d.substr(0,1)==="b"?(n(),l("div",ls,[o[d.substr(2)]===0?(n(),l("div",is," Aun no validada")):o[d.substr(2)]===1?(n(),l("div",ds,[c(p(T),{class:"w-8 h-8 text-green-600"})])):o[d.substr(2)]===2?(n(),l("div",cs,[c(p(pe),{class:"w-8 h-8 text-red-600"})])):u("",!0)])):d.substr(0,1)=="i"?(n(),l("div",ps,i(p(H)(o[d.substr(2)])),1)):d.substr(0,1)=="m"?(n(),l("div",ms,i(p(H)(o[d.substr(2)],0,1)),1)):u("",!0)]))),128))]))),128)),h(s("tr",us,[hs,h(s("td",ys,null,512),[[f,r.can(["updateCorregido reporte"])]]),fs,bs,m.numberPermissions>1?(n(),l("td",_s)):u("",!0),ws,gs,vs,s("td",ks," Trabajadas: "+i(e.sumhoras_trabajadas),1),s("td",xs,i(e.sumdiurnas?"Diurnas: "+e.sumdiurnas:""),1),s("td",Ss,i(e.sumnocturnas?"Nocturnas: "+e.sumnocturnas:""),1),s("td",Ds,i(e.sumextra_diurnas?"Extra diurnas: "+e.sumextra_diurnas:""),1),s("td",Cs,i(e.sumextra_nocturnas?"Extra nocturnas: "+e.sumextra_nocturnas:""),1),s("td",Os,i(e.sumdominical_diurno?"Dominical diurno: "+e.sumdominical_diurno:""),1),s("td",$s,i(e.sumdominical_nocturno?"Dominical nocturno: "+e.sumdominical_nocturno:""),1),s("td",Is,i(e.sumdominical_extra_diurno?"Dominical extra diurno: "+e.sumdominical_extra_diurno:""),1),s("td",As,i(e.sumdominical_extra_nocturno?"Dominical extra nocturno: "+e.sumdominical_extra_nocturno:""),1),Vs,js],512),[[f,e.sumhoras_trabajadas!=0]])])])]),s("div",Ms,[c(ie,{links:e.fromController,filters:t.params},null,8,["links","filters"])])]),e.quincena!=null?h((n(),l("section",Ns,[s("div",Ps,[s("div",Us,[s("div",Fs,[Ts,e.nombrePersona?(n(),l("h2",Bs,[k(" Reportes de este mes: "),s("b",null,i(e.nombrePersona),1)])):u("",!0),s("div",Hs,[c(p(Ce),{id:"my-chart-id",options:q,data:L})])])])])],512)),[[f,r.can(["updateCorregido reporte"])||r.can(["isAdmin"])||r.can(["isadministrativo"])]]):u("",!0)])]),_:1})],64)}}};export{ct as default};
