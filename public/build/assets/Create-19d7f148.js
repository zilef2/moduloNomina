import{v as S,k,f as B,a as o,w as g,o as $,b as t,t as m,u as l,d as w,n as F,e as M}from"./app-6ac411c7.js";import{_ as U,a as C}from"./SecondaryButton-6eb1d3d9.js";import{_ as p}from"./InputError-3cbdf420.js";import{_ as u,a as h}from"./TextInput-b199efac.js";import{_ as I}from"./PrimaryButton-8de5fca9.js";import{_ as N}from"./SelectInput-6bca3b72.js";import{Z as V}from"./main-b38c91a8.js";const T={class:"space-y-6"},H=["onSubmit"],E={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},L={class:"my-6 grid grid-cols-2 gap-6"},q={class:"grid grid-cols-3 gap-1"},Z={class:"flex justify-end"},Q={__name:"Create",props:{show:Boolean,title:String,valoresSelect:Object,IntegerDefectoSelect:Number},emits:["close"],setup(j,{emit:f}){const c=j,a=S({fecha_ini:"2023-03-22T13:00",fecha_fin:"2023-03-23T06:00",horas_trabajadas:"",centro_costo_id:c.IntegerDefectoSelect,observaciones:"",diurnas:"",nocturnas:"",almuerzo:"0"}),v=()=>{a.horas_trabajadas<=24?a.post(route("Reportes.store"),{preserveScroll:!0,onSuccess:()=>{f("close"),a.reset()},onError:()=>{},onFinish:()=>f("close")}):alert("Demasiadas horas")};k(()=>{if(c.show&&(a.errors={}),Date.parse(a.fecha_ini)&&Date.parse(a.fecha_fin)){let r=Date.parse(a.fecha_ini),s=Date.parse(a.fecha_fin);a.horas_trabajadas=""+parseInt((s-r)/(3600*1e3)),Date.parse(a.fecha_ini)>Date.parse(a.fecha_fin)?(a.errors.horas_trabajadas="La fecha inicial es mayor a la final",a.horas_trabajadas="0",a.diurnas="0",a.nocturnas="0",a.almuerzo="0"):a.horas_trabajadas>=24?(a.errors.horas_trabajadas="Las horas trabajadas son demasiadas",a.horas_trabajadas="0",a.diurnas="0",a.nocturnas="0",a.almuerzo="0"):(a.almuerzo=0,a.horas_trabajadas>=9&&(a.horas_trabajadas-=1,a.almuerzo=1),a.diurnas=Math.abs(y(a.fecha_ini,a.fecha_fin)),a.nocturnas=Math.abs(z(a.fecha_ini,a.fecha_fin)),a.diurnas>0?a.diurnas-=a.almuerzo:a.nocturnas>0&&(a.nocturnas-=a.almuerzo))}});function y(r,s){const e=new Date(r).getHours(),n=new Date(s).getHours(),_=new Date(r).getDate(),b=new Date(s).getDate(),i=e>=6?e:6;return _==b?(n>=21?21:n)-i:(n<=6?21:n)-i}function z(r,s){const e=new Date(r).getHours(),n=new Date(s).getHours(),_=new Date(r).getDate(),b=new Date(s).getDate();let i=0,d=0;return _==b?(e<6&&n<=6?i=n-e:e<6&&(i=6-e),e>=21&&n>=21?d=n-e:n>21&&(d=n-21)):(e<6&&n<=6?i=n-e:(e<6&&(i=6-e),n<=6&&(i+=n)),e>=21&&n>=21?d=n-e:(n>21&&(d+=n-21),e>21?d+=24-e:d+=24-21)),console.log("ðŸš€ Madrugada:",i),console.log("ðŸ§ˆ Tarde:",d),i+d}const D=["Lun","Mar","Mie","Jue","Vie","Sab","Dom"];return(r,s)=>($(),B("section",T,[o(U,{show:c.show,onClose:s[8]||(s[8]=e=>f("close"))},{default:g(()=>[t("form",{class:"p-6",onSubmit:M(v,["prevent"])},[t("h2",E,m(r.lang().label.add)+" "+m(c.title),1),t("div",L,[t("div",null,[o(u,{for:"fecha_ini",value:r.lang().label.fecha_ini},null,8,["value"]),o(l(V),{"is-24":!1,"day-names":D,"auto-apply":"",flow:["calendar","time"],"enable-time-picker":!0,teleport:!0,id:"fecha_ini",type:"date",class:"mt-1 block w-full",modelValue:l(a).fecha_ini,"onUpdate:modelValue":s[0]||(s[0]=e=>l(a).fecha_ini=e),required:"",placeholder:r.lang().placeholder.fecha_ini,error:l(a).errors.fecha_ini},null,8,["modelValue","placeholder","error"]),o(p,{class:"mt-2",message:l(a).errors.fecha_ini},null,8,["message"])]),t("div",null,[o(u,{for:"fecha_fin",value:r.lang().label.fecha_fin},null,8,["value"]),o(l(V),{"is-24":!1,"day-names":D,"auto-apply":"",flow:["calendar","time"],"enable-time-picker":!0,teleport:!0,id:"fecha_fin",type:"date",class:"mt-1 block w-full",modelValue:l(a).fecha_fin,"onUpdate:modelValue":s[1]||(s[1]=e=>l(a).fecha_fin=e),required:"",placeholder:r.lang().placeholder.fecha_fin,error:l(a).errors.fecha_fin},null,8,["modelValue","placeholder","error"]),o(p,{class:"mt-2",message:l(a).errors.fecha_fin},null,8,["message"])]),t("div",null,[o(u,{for:"horas_trabajadas",value:r.lang().label.horas_trabajadas},null,8,["value"]),o(h,{id:"horas_trabajadas",type:"number",class:"mt-1 block w-full",modelValue:l(a).horas_trabajadas,"onUpdate:modelValue":s[2]||(s[2]=e=>l(a).horas_trabajadas=e),disabled:"",placeholder:r.lang().placeholder.horas_trabajadas,error:l(a).errors.horas_trabajadas},null,8,["modelValue","placeholder","error"]),o(p,{class:"mt-2",message:l(a).errors.horas_trabajadas},null,8,["message"])]),t("div",q,[t("div",null,[o(u,{for:"diurnas",value:r.lang().label.diurnas},null,8,["value"]),o(h,{id:"diurnas",type:"number",class:"mt-1 w-full",modelValue:l(a).diurnas,"onUpdate:modelValue":s[3]||(s[3]=e=>l(a).diurnas=e),disabled:"",placeholder:r.lang().placeholder.diurnas,error:l(a).errors.diurnas},null,8,["modelValue","placeholder","error"])]),t("div",null,[o(u,{for:"nocturnas",value:r.lang().label.nocturnas},null,8,["value"]),o(h,{id:"nocturnas",type:"number",class:"mt-1 w-full",modelValue:l(a).nocturnas,"onUpdate:modelValue":s[4]||(s[4]=e=>l(a).nocturnas=e),disabled:"",placeholder:r.lang().placeholder.nocturnas,error:l(a).errors.nocturnas},null,8,["modelValue","placeholder","error"])]),t("div",null,[o(u,{for:"almuerzo",value:r.lang().label.almuerzo},null,8,["value"]),o(h,{id:"almuerzo",type:"number",class:"mt-1 w-full",modelValue:l(a).almuerzo,"onUpdate:modelValue":s[5]||(s[5]=e=>l(a).almuerzo=e),disabled:"",placeholder:r.lang().placeholder.almuerzo,error:l(a).errors.almuerzo},null,8,["modelValue","placeholder","error"])])]),t("div",null,[o(u,{for:"centro_costo_id",value:r.lang().label.centro_costo_id},null,8,["value"]),o(N,{modelValue:l(a).centro_costo_id,"onUpdate:modelValue":s[6]||(s[6]=e=>l(a).centro_costo_id=e),dataSet:c.valoresSelect,class:"mt-1 block w-full"},null,8,["modelValue","dataSet"]),o(p,{class:"mt-2",message:l(a).errors.centro_costo_id},null,8,["message"])])]),t("div",Z,[o(C,{disabled:l(a).processing,onClick:s[7]||(s[7]=e=>f("close"))},{default:g(()=>[w(m(r.lang().button.close),1)]),_:1},8,["disabled"]),o(I,{class:F(["ml-3",{"opacity-25":l(a).processing}]),disabled:l(a).processing,onClick:v},{default:g(()=>[w(m(l(a).processing?r.lang().button.add+"...":r.lang().button.add),1)]),_:1},8,["class","disabled"])])],40,H)]),_:1},8,["show"])]))}};export{Q as default};
