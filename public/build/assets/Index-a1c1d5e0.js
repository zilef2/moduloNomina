import{o as a,f as l,r as F,l as X,J as z,m as H,O as J,v as G,a as p,u as m,w,F as x,p as K,X as Q,b as e,c as y,d as W,t as d,g as u,q as h,s as b,A as N,x as k,y as Y,e as Z,n as ee}from"./app-46106272.js";import{_ as se}from"./AuthenticatedLayout-e2b78f72.js";import{_ as te}from"./Breadcrumb-af75185f.js";import{a as re}from"./TextInput-3fa3f2f5.js";import{_ as oe}from"./PrimaryButton-1e750976.js";import{_ as ae}from"./SelectInput-26885325.js";import{_ as I}from"./DangerButton-39adbda9.js";import{_ as ne}from"./Pagination-153a3b78.js";import{T as V,C as le,P as ie,a as j,X as de}from"./index-eda91085.js";import{_ as ce}from"./Checkbox-6e316493.js";import{_ as pe}from"./InfoButton-dd5798aa.js";import me from"./Create-1e9ed54b.js";import ue from"./Edit-9d88c8ef.js";import he from"./Delete-f3fd6685.js";import{f as P,n as R}from"./global-0469810b.js";import{C as ye,p as be,a as fe,b as _e,B as we,c as ge,L as xe,d as ke}from"./index-4372250e.js";import"./SecondaryButton-7d303cdf.js";import"./InputError-fbff4dad.js";import"./main-7f7b3c02.js";import"./app-57141eb6.js";const ve=["type"],Se={__name:"SuccessButton",props:{type:{type:String,default:"submit"}},setup(c){return(s,v)=>(a(),l("button",{type:c.type,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 active:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150"},[F(s.$slots,"default")],8,ve))}},Ce={class:"space-y-4"},De={class:"px-4 sm:px-0"},Oe={class:"rounded-lg overflow-hidden w-fit"},$e={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},Ne={class:"flex justify-between p-2"},Ie={class:"flex space-x-2"},Ve={key:1,class:"flex space-x-8"},je=e("label",{for:"soloval"},"Solo validos",-1),Pe={class:"overflow-x-auto scrollbar-table"},Re={class:"w-full"},Ue={class:"uppercase text-sm border-t border-gray-200 dark:border-gray-700"},Be={class:"dark:bg-gray-900 text-left"},Te={class:"px-2 py-4 text-center"},Me=["onClick"],Ae={class:"flex justify-between items-center"},Ee={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},qe=["value"],Le={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Fe={class:"flex justify-start items-center"},Xe={class:"flex rounded-md overflow-hidden"},ze=["onSubmit"],He={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Je={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ge={key:0},Ke={key:1},Qe={key:2},We={key:3},Ye={key:0},Ze={key:1},es={key:2},ss={key:4},ts={key:5},rs={class:"my-2 py-4 border-t border-gray-200 dark:border-gray-900 hover:bg-sky-200 hover:dark:bg-gray-900/20"},os=e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),as={class:"whitespace-nowrap py-4 px-2 sm:py-3"},ns=e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"}," Totales ",-1),ls=e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),is={key:0,class:"whitespace-nowrap py-4 px-2 sm:py-3"},ds=e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),cs=e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),ps=e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),ms={class:"whitespace-nowrap py-4 px-2 sm:py-3"},us={class:"whitespace-nowrap py-4 px-2 sm:py-3"},hs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},ys={class:"whitespace-nowrap py-4 px-2 sm:py-3"},bs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},fs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},_s={class:"whitespace-nowrap py-4 px-2 sm:py-3"},ws={class:"whitespace-nowrap py-4 px-2 sm:py-3"},gs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},xs=e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),ks=e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),vs={class:"flex justify-betwween items-center p-2 border-t border-gray-200 dark:border-gray-700"},Ss={key:0,class:"text-gray-600 body-font overflow-hidden"},Cs={class:"container px-5 py-4 mx-auto"},Ds={class:"flex flex-wrap m-2"},Os={class:"p-1 md:w-1/2 flex flex-col items-start"},$s=e("span",{class:"inline-block py-1 px-2 rounded bg-indigo-50 text-indigo-500 text-xs font-medium tracking-widest"}," Este mes",-1),Ns={class:"sm:text-3xl text-2xl title-font font-medium text-gray-900 mt-4 mb-4"},Is={class:"m-1 p-1 w-full"},Ws={__name:"Index",props:{title:String,filters:Object,fromController:Object,breadcrumbs:Object,perPage:Number,nombresTabla:Array,valoresSelect:Object,showSelect:Object,showUsers:Object,IntegerDefectoSelect:Number,horasemana:Number,startDateMostrar:String,endDateMostrar:String,sumhoras_trabajadas:Number,quincena:Object,nombrePersona:String,numberPermissions:Number,ultimoReporte:Number,sumdiurnas:Number,sumnocturnas:Number,sumextra_diurnas:Number,sumextra_nocturnas:Number,sumdominical_diurno:Number,sumdominical_nocturno:Number,sumdominical_extra_diurno:Number,sumdominical_extra_nocturno:Number},setup(c){var C,D,O,$;const s=c;ye.register(be,fe,_e,we,ge,xe);const{_:v,debounce:U,pickBy:B}=K;typeof s.ultimoReporte<"u";const T={responsive:!0,maintainAspectRatio:!1,color:"#000",darkcolor:"#fff"},M={name:"Numero de reportes",datasets:[{label:"Numero de Reportes",data:s.quincena,backgroundColor:"#f87979"}]},t=X({params:{soloValidos:(C=s.filters)==null?void 0:C.soloValidos,search:(D=s.filters)==null?void 0:D.search,field:(O=s.filters)==null?void 0:O.field,order:($=s.filters)==null?void 0:$.order,perPage:s.perPage},selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,editCorregirOpen:!1,deleteOpen:!1,deleteBulkOpen:!1,generico:null,nope:null,dataSet:z().props.app.perpage}),A=r=>{r!=null&&r!=null&&(r=r.substr(2),t.params.field=r.replace(/ /g,"_"),t.params.order=t.params.order==="asc"?"desc":"asc")};H(()=>v.cloneDeep(t.params),U(()=>{let r=B(t.params);J.get(route("Reportes.index"),r,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const E=r=>{var n;r.target.checked===!1?t.selectedId=[]:(n=s.fromController)==null||n.data.forEach(f=>{t.selectedId.push(f.id)})},q=()=>{var r;((r=s.fromController)==null?void 0:r.data.length)==t.selectedId.length?t.multipleSelect=!0:t.multipleSelect=!1},g=G({valido:!1}),S=r=>{var n;g.valido=r,g.put(route("Reportes.update",(n=t.generico)==null?void 0:n.id),{preserveScroll:!0,onSuccess:()=>{g.reset()},onError:()=>null,onFinish:()=>null})};return(r,n)=>{const f=Y("tooltip");return a(),l(x,null,[p(m(Q),{title:s.title},null,8,["title"]),p(se,null,{default:w(()=>[p(te,{title:c.title,breadcrumbs:c.breadcrumbs},null,8,["title","breadcrumbs"]),e("div",Ce,[e("div",De,[e("div",Oe,[r.can(["create reporte"])?(a(),y(oe,{key:0,class:"rounded-none",onClick:n[0]||(n[0]=o=>t.createOpen=!0)},{default:w(()=>[W(d(r.lang().button.add),1)]),_:1})):u("",!0),p(me,{show:t.createOpen,onClose:n[1]||(n[1]=o=>t.createOpen=!1),title:s.title,valoresSelect:s.valoresSelect,IntegerDefectoSelect:s.IntegerDefectoSelect,horasemana:s.horasemana,startDateMostrar:s.startDateMostrar,endDateMostrar:s.endDateMostrar,numberPermissions:s.numberPermissions,ultimoReporte:s.ultimoReporte},null,8,["show","title","valoresSelect","IntegerDefectoSelect","horasemana","startDateMostrar","endDateMostrar","numberPermissions","ultimoReporte"]),p(ue,{show:t.editOpen,onClose:n[2]||(n[2]=o=>t.editOpen=!1),Reporte:t.generico,title:s.title,valoresSelect:s.valoresSelect,showUsers:s.showUsers,correccionUsuario:!1},null,8,["show","Reporte","title","valoresSelect","showUsers"]),h(p(he,{show:t.deleteOpen,onClose:n[3]||(n[3]=o=>t.deleteOpen=!1),Reporte:t.generico,title:s.title},null,8,["show","Reporte","title"]),[[b,r.can(["delete reporte"])]])])]),e("div",$e,[e("div",Ne,[e("div",Ie,[c.filters!==null?(a(),y(ae,{key:0,modelValue:t.params.perPage,"onUpdate:modelValue":n[4]||(n[4]=o=>t.params.perPage=o),dataSet:t.dataSet},null,8,["modelValue","dataSet"])):u("",!0),h((a(),y(I,{onClick:n[5]||(n[5]=o=>t.deleteBulkOpen=!0),class:"px-3 py-1.5"},{default:w(()=>[p(m(V),{class:"w-5 h-5"})]),_:1})),[[b,t.selectedId.length!=0&&r.can(["delete reporte"])],[f,r.lang().tooltip.delete_selected]])]),c.filters!==null?h((a(),y(re,{key:0,modelValue:t.params.search,"onUpdate:modelValue":n[6]||(n[6]=o=>t.params.search=o),type:"text",class:"block w-3/6 md:w-2/6 lg:w-1/6 rounded-lg",placeholder:r.lang().placeholder.searchDates},null,8,["modelValue","placeholder"])),[[b,r.can(["update reporte"])]]):u("",!0),s.quincena===null?(a(),l("div",Ve,[je,c.filters!==null?h((a(),l("input",{key:0,"onUpdate:modelValue":n[7]||(n[7]=o=>t.params.soloValidos=o),id:"soloval",type:"checkbox",class:"bg-black h-7 w-7"},null,512)),[[N,t.params.soloValidos]]):u("",!0)])):u("",!0)]),e("div",Pe,[e("table",Re,[e("thead",Ue,[e("tr",Be,[e("th",Te,[p(ce,{checked:t.multipleSelect,"onUpdate:checked":n[8]||(n[8]=o=>t.multipleSelect=o),onChange:E},null,8,["checked"])]),(a(!0),l(x,null,k(c.nombresTabla[0],(o,_)=>(a(),l("th",{key:_,onClick:i=>A(c.nombresTabla[2][_]),class:"px-2 py-4 cursor-pointer hover:bg-sky-50 dark:hover:bg-sky-800"},[e("div",Ae,[e("span",null,d(o),1),c.nombresTabla[2][_]!==null?(a(),y(m(le),{key:0,class:"w-4 h-4"})):u("",!0)])],8,Me))),128))])]),e("tbody",null,[(a(!0),l(x,null,k(c.fromController.data,(o,_)=>(a(),l("tr",{key:_,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[e("td",Ee,[h(e("input",{type:"checkbox",onChange:q,value:o.id,"onUpdate:modelValue":n[9]||(n[9]=i=>t.selectedId=i),class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary"},null,40,qe),[[N,t.selectedId]])]),e("td",Le,[e("div",Fe,[e("div",Xe,[e("form",{onSubmit:Z(S,["prevent"])},[r.can(["update reporte"])?h((a(),y(pe,{key:0,type:"button",onClick:i=>(t.editOpen=!0,t.generico=o),class:"px-2 py-1.5 rounded-sm"},{default:w(()=>[p(m(ie),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[f,r.lang().tooltip.edit]]):u("",!0),r.can(["update reporte"])?h((a(),y(Se,{key:1,type:"button",class:ee(["mx-1 w-10 h-8 p-0 rounded-lg",{"opacity-25":m(g).processing}]),disabled:m(g).processing,onClick:i=>(t.generico=o,S(!0))},{default:w(()=>[p(m(j),{class:"w-4 h-4"})]),_:2},1032,["class","disabled","onClick"])),[[f,"Aprobar"]]):u("",!0)],40,ze),r.can(["delete reporte"])?h((a(),y(I,{key:0,type:"button",onClick:i=>(t.deleteOpen=!0,t.generico=o),class:"px-2 py-1.5 rounded-sm"},{default:w(()=>[p(m(V),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[f,r.lang().tooltip.delete]]):u("",!0)])])]),e("td",He,d(_+1),1),e("td",Je,d(c.showSelect[o.centro_costo_id]),1),h(e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},d(c.showUsers[o.user_id]),513),[[b,r.can(["updateCorregido reporte"])]]),(a(!0),l(x,null,k(c.nombresTabla[1],(i,L)=>(a(),l("td",{key:L,class:"whitespace-nowrap py-4 px-2 sm:py-3"},[i.substr(0,1)=="s"?(a(),l("div",Ge,d(o[i.substr(2)]),1)):i.substr(0,1)=="d"?(a(),l("div",Ke,d(m(P)(o[i.substr(2)])),1)):i.substr(0,1)=="t"?(a(),l("div",Qe,d(m(P)(o[i.substr(2)],"conLaHora")),1)):i.substr(0,1)=="b"?(a(),l("div",We,[o[i.substr(2)]===0?(a(),l("div",Ye," Aun no validada")):o[i.substr(2)]===1?(a(),l("div",Ze,[p(m(j),{class:"w-8 h-8 text-green-600"})])):o[i.substr(2)]===2?(a(),l("div",es,[p(m(de),{class:"w-8 h-8 text-red-600"})])):u("",!0)])):i.substr(0,1)=="i"?(a(),l("div",ss,d(m(R)(o[i.substr(2)])),1)):i.substr(0,1)=="m"?(a(),l("div",ts,d(m(R)(o[i.substr(2)],0,1)),1)):u("",!0)]))),128))]))),128)),h(e("tr",rs,[os,h(e("td",as,null,512),[[b,r.can(["updateCorregido reporte"])]]),ns,ls,c.numberPermissions>1?(a(),l("td",is)):u("",!0),ds,cs,ps,e("td",ms," Trabajadas: "+d(s.sumhoras_trabajadas),1),e("td",us,d(s.sumdiurnas?"Diurnas: "+s.sumdiurnas:""),1),e("td",hs,d(s.sumnocturnas?"Nocturnas: "+s.sumnocturnas:""),1),e("td",ys,d(s.sumextra_diurnas?"Extra diurnas: "+s.sumextra_diurnas:""),1),e("td",bs,d(s.sumextra_nocturnas?"Extra nocturnas: "+s.sumextra_nocturnas:""),1),e("td",fs,d(s.sumdominical_diurno?"Dominical diurno: "+s.sumdominical_diurno:""),1),e("td",_s,d(s.sumdominical_nocturno?"Dominical nocturno: "+s.sumdominical_nocturno:""),1),e("td",ws,d(s.sumdominical_extra_diurno?"Dominical extra diurno: "+s.sumdominical_extra_diurno:""),1),e("td",gs,d(s.sumdominical_extra_nocturno?"Dominical extra nocturno: "+s.sumdominical_extra_nocturno:""),1),xs,ks],512),[[b,s.sumhoras_trabajadas!=0]])])])]),e("div",vs,[p(ne,{links:s.fromController,filters:t.params},null,8,["links","filters"])])]),s.quincena!=null?h((a(),l("section",Ss,[e("div",Cs,[e("div",Ds,[e("div",Os,[$s,e("h2",Ns,"Numero de reportes de "+d(s.nombrePersona),1),e("div",Is,[p(m(ke),{id:"my-chart-id",options:T,data:M})])])])])],512)),[[b,r.can(["updateCorregido reporte"])||r.can(["isAdmin"])||r.can(["isadministrativo"])]]):u("",!0)])]),_:1})],64)}}};export{Ws as default};
