import{l as y,v as k,z as E,m as g,k as S,f as d,a,w as f,o as m,b as l,t as c,u as n,g as j,F as x,x as $,d as h,n as z,e as N}from"./app-0fac790c.js";import{_ as v}from"./InputLabel-d6f8fe6d.js";import{_ as B,a as F}from"./SecondaryButton-5e0a7b0c.js";import{_ as U}from"./PrimaryButton-a5d595f0.js";import{_ as q}from"./SelectInput-8a67e281.js";import{_ as I}from"./TextInput-d3a71cab.js";const M={class:"space-y-6"},O=["onSubmit"],X={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},D={key:0,class:"text-red-600 text-lg my-4"},H={class:"my-6 space-y-4"},L={class:"grid grid-cols-2 gap-6"},R={class:"flex justify-end"},Q={__name:"EdiCentro",props:{show:Boolean,title:String,user:Object,centros:Object},emits:["close"],setup(C,{emit:u}){var b;const i=C,e=y({numberCentro:1,primeraVez:!0,mensajeError:""}),o=k({centroids:[]});E(()=>{}),g(()=>e.numberCentro,r=>{e.numberCentro>i.centros.length&&(e.numberCentro=0);for(let s=0;s<e.centroids;s++)o.centroids[s]=0}),g(()=>o.centroids,r=>{}),S(()=>{i.show?(o.errors={},e.primeraVez&&(e.primeraVez=!1),o.errors={}):e.primeraVez=!0});const V=()=>{let r=!0;return e.numberCentro>0&&o.centroids.forEach(s=>{r=s!==null}),r=o.centroids.length-1===e.numberCentro,r},_=()=>{var s;o.centroids.map(t=>parseInt(t)),o.centroids.filter(t=>t!=null);let r=V();r=!0,r?(e.mensajeError="",o.put(route("user.update",(s=i.user)==null?void 0:s.id),{preserveScroll:!0,onSuccess:()=>{o.centroids=new Set([1]),u("close"),o.reset()},onError:()=>{alert("Hay campos incompletos o erroneos")},onFinish:()=>{e.primeraVez=!0}})):e.mensajeError="Falta informacion"},p=(b=i.centros)==null?void 0:b.map(r=>({label:r.nombre,value:r.id}));return(r,s)=>(m(),d("section",M,[a(B,{show:i.show,onClose:s[2]||(s[2]=t=>u("close"))},{default:f(()=>[l("form",{class:"p-6",onSubmit:N(_,["prevent"])},[l("h2",X," Centros de costos de "+c(i.user.name),1),l("p",null,"Recuerde que hay como maximo "+c(n(p).length)+" centros de costos",1),e.mensajeError!==""?(m(),d("p",D,c(e.mensajeError),1)):j("",!0),l("div",H,[l("div",L,[l("div",null,[a(v,{for:"role",value:"Número de centros"}),a(I,{autocomplete:"off",id:"cedula",type:"number",class:"mt-1 block w-full",modelValue:e.numberCentro,"onUpdate:modelValue":s[0]||(s[0]=t=>e.numberCentro=t),required:"",placeholder:"Número de centros",min:"1",max:n(p).length},null,8,["modelValue","max"])]),(m(!0),d(x,null,$(parseInt(e.numberCentro),t=>(m(),d("div",{key:t},[a(v,{for:"centro",value:r.lang().label.centro},null,8,["value"]),a(q,{id:"centro",class:"mt-1 block w-full",modelValue:n(o).centroids[t],"onUpdate:modelValue":w=>n(o).centroids[t]=w,dataSet:n(p)},null,8,["modelValue","onUpdate:modelValue","dataSet"])]))),128))])]),l("div",R,[a(F,{disabled:n(o).processing,onClick:s[1]||(s[1]=t=>u("close"))},{default:f(()=>[h(c(r.lang().button.close),1)]),_:1},8,["disabled"]),a(U,{class:z(["ml-3",{"opacity-25":n(o).processing}]),disabled:n(o).processing,onClick:_},{default:f(()=>[h(c(n(o).processing?r.lang().button.save+"...":r.lang().button.save),1)]),_:1},8,["class","disabled"])])],40,O)]),_:1},8,["show"])]))}};export{Q as default};
