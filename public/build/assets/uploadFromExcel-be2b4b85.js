import{p as C,l as M,q as f,O as q,v,m as O,f as d,a as u,u as o,w as g,F as b,s as L,o as r,X as A,b as e,t as l,g as p,e as y,x as F,y as V,c as D,d as _,z as E}from"./app-437dd817.js";import{_ as $}from"./AuthenticatedLayout-f475806a.js";import{_ as Q}from"./Breadcrumb-0c832bf7.js";import{_ as w}from"./PrimaryButton-5df207d0.js";import{_ as I}from"./SelectInput-efd26cf7.js";import{n as Z,o as P,p as T}from"./index-4b37ae43.js";import{Z as U}from"./main-21db5990.js";import"./app-57141eb6.js";import{C as X}from"./global-683f42af.js";const G={class:"space-y-4"},J={key:0,class:"px-4 sm:px-0"},K={class:"rounded-lg overflow-hidden w-fit"},W={class:"flex max-w-screen-xl shadow-lg rounded-lg"},Y=e("div",{class:"bg-yellow-600 py-4 px-6 rounded-l-lg flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",class:"fill-current text-white",width:"20",height:"20"},[e("path",{"fill-rule":"evenodd",d:"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"})])],-1),ee={class:"px-8 py-6 bg-white rounded-r-lg flex justify-between items-center w-full border border-l-transparent border-gray-200"},oe={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},se={class:"text-gray-600 body-font"},te={class:"container px-5 py-12 mx-auto"},ae={key:0,class:"flex flex-wrap -m-4"},re={class:"p-4 w-full sm:w-1/2"},ie={class:"h-full border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden"},le={class:"p-6"},ne=["onSubmit"],ce=e("h2",{class:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1"}," Formato xlsx",-1),de=e("h3",{class:"title-font text-lg font-medium text-gray-900 mb-3"},"Descargar reporte ",-1),ue=e("p",{class:"leading-relaxed mb-3"}," Este formulario permite descargar el reporte de la quincena",-1),me={class:""},pe={class:""},_e={class:"col-span-1 lg:col-span-2"},he={key:0,class:"text-gray-600 body-font"},fe={class:"container p-5 mx-auto"},ge={class:"text-center mb-1"},xe=e("h1",{class:"text-xl font-medium text-center title-font text-gray-900 mb-4"}," Recuerde",-1),ve=e("p",{class:"text-base leading-relaxed w-full mx-auto"}," Solo se descargarán, Los reportes que sean validos.",-1),be={key:0,class:"text-xl leading-relaxed w-full mx-auto"},ye={key:1,class:"text-base leading-relaxed w-full mx-auto"},we={key:2,class:"text-xl leading-relaxed w-full mx-auto"},Se={key:1,class:"text-gray-600 body-font"},Ne=e("div",{class:"container p-5 mx-auto"},[e("div",{class:"text-center mb-1"},[e("h1",{class:"text-xl font-medium text-center title-font text-gray-900 mb-4"}," Hay empleados con salario en cero")])],-1),ke=[Ne],Re={class:"p-4 w-full sm:w-1/2"},qe={class:"h-full border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden"},Fe={class:"p-6"},Ve=["onSubmit"],De=e("h2",{class:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1"}," Seleccione quincena",-1),Ee=e("h3",{class:"title-font text-lg font-medium text-gray-900 mb-3"},"Descargar siigo ",-1),Ie=e("p",{class:"leading-relaxed mb-3"}," Este formulario permite descargar el reporte de la quincena para siigo",-1),Ue={class:"flex"},je={class:"text-gray-600 body-font"},Be={class:"container p-5 mx-auto"},He={key:0,class:"text-center mb-1"},ze={key:0,class:"text-xl font-medium text-center title-font text-gray-900 mb-4"},Ce=e("p",{class:"text-base leading-relaxed w-full mx-auto"},null,-1),Me={class:"text-base leading-relaxed w-full mx-auto"},Oe={class:"p-4 w-full sm:w-1/2"},Le={class:"h-full border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden"},Ae={class:"p-6"},$e=e("h3",{class:"mx-auto text-center title-font text-xl font-medium text-gray-900 mb-2"},"Subir empleados",-1),Qe=e("h2",{class:"mb-4 tracking-widest text-center text-sm title-font font-medium text-gray-400 dark:text-gray-100"}," Formato xlsx",-1),Ze=e("p",{class:"leading-relaxed mb-3"}," Este formulario solo permite cargar empleados o administrativos",-1),Pe=["onSubmit"],Te=["value"],Xe={class:"w-full"},Ge={class:"flex items-center flex-wrap my-6"},Je={class:"text-indigo-500 inline-flex items-center md:mb-2 lg:mb-0"},Ke={class:"text-gray-600 body-font"},We={class:"container p-5 mx-auto"},Ye=e("div",{class:"text-center mb-1"},[e("h1",{class:"text-xl font-medium text-center title-font text-gray-900 mb-4"}," Formato del excel "),e("p",{class:"text-base leading-relaxed w-full mx-auto"}," Solo la primera fila debe ser la misma ")],-1),eo={class:"flex flex-wrap sm:mx-auto sm:mb-2 -mx-2"},oo={class:"px-2 w-full"},so={class:"bg-gray-50 rounded flex p-1 h-full items-center"},to=e("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",class:"text-indigo-500 w-6 h-6 flex-shrink-0 mr-4",viewBox:"0 0 24 24"},[e("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),_(),e("path",{d:"M22 4L12 14.01l-3-3"})],-1),ao={class:"title-font font-medium"},ho={__name:"uploadFromExcel",props:{title:String,breadcrumbs:Object,NumUsers:Number,NumReportes:Number,ini:Date,fin:Date,flash:String,NumReportesRecha:Number,NumReportesSinval:Number,haySinsalario:Number,NumReportesSigo:Number,NumReportesRechaSigo:Number,NumReportesSinvalSigo:Number},setup(x){const s=x,{_:S,debounce:N,pickBy:k}=L,t=C({respuesta:"",params:{fecha_ini:"",quincena:"",arrayFestivos:""},paramsSigo:{fecha_ini:"",quincena:"",arrayFestivos:"",year:"",month:""},warnn:"",tiposSiigo:[]});M(()=>{}),f(()=>S.cloneDeep(t.params),N(()=>{let n=k(t.params);q.get(route("user.uploadexcel"),n,{replace:!0,preserveState:!0,preserveScroll:!0})},30)),f(()=>S.cloneDeep(t.paramsSigo),N(()=>{let n=k(t.paramsSigo);q.get(route("user.uploadexceSigo"),n,{replace:!0,preserveState:!0,preserveScroll:!0})},30));const h=v({archivo1:null}),i=v({archivo1:null,fecha_ini:"",quincena:1,NumeroDiasFestivos:0}),a=v({archivosigo:null,quincena_sigo:1,fecha_ini_sigo:"",NumeroDiasFestivos:0});f(()=>i.fecha_ini,n=>{t.params.fecha_ini=i.fecha_ini,t.params.quincena=i.quincena,t.params.arrayFestivos=X(t.params.quincena,n.month,n.year),i.NumeroDiasFestivos=t.params.arrayFestivos.length,console.log("festivos:",t.params.arrayFestivos)}),f(()=>a.fecha_ini_sigo,n=>{t.paramsSigo.year=a.fecha_ini_sigo.year,t.paramsSigo.month=a.fecha_ini_sigo.month,t.paramsSigo.quincena=a.quincena_sigo,t.paramsSigo.arrayFestivos=-1}),O(()=>{s.flash.warning&&(t.warnn=s.flash.warning),a.fecha_ini_sigo});function j(){h.post(route("user.uploadexcelpost"),{preserveScroll:!0,onSuccess:()=>{},onError:()=>null,onFinish:()=>null})}const B=()=>{window.open("users/export/"+i.NumeroDiasFestivos+"/"+i.quincena+"/"+i.fecha_ini.month+"/"+i.fecha_ini.year,"_blank")},H=()=>{window.open("users/downloadsigo/"+a.NumeroDiasFestivos+"/"+a.quincena_sigo+"/"+a.fecha_ini_sigo.month+"/"+a.fecha_ini_sigo.year,"_blank")},R=[{value:null,label:"seleccione una quincena"},{value:1,label:1},{value:2,label:2}],z=[{value:"nombre",rule:"Obligatorio"},{value:"correo",rule:"Debe ser unico"},{value:"cedula",rule:"Debe ser un número"},{value:"telefono",rule:"Obligatorio"},{value:"celular",rule:"Obligatorio"},{value:"rol",rule:"empleado o administrativo "},{value:"cargo",rule:"Verificar que el rol exista"},{value:"fecha ingreso",rule:"fecha ingreso a la empresa"},{value:"sexo",rule:"Masculino o Femenino"},{value:"salario",rule:"Sin puntos ni comas"}];return t.tiposSiigo=["10- Horas extras diurnas 125%- Ingreso","11- Horas extras nocturnas 175%- Ingreso","08- Hora extra recargo dominical o festivo- Ingreso","06- Hora dominical o festiva nocturna- Ingreso","07- Hora extra diurna dominical o festiva- Ingreso","12- Horas extras nocturnas dominical o festiva- Ingreso","26- Recargo nocturno- Ingreso"],(n,m)=>(r(),d(b,null,[u(o(A),{title:s.title},null,8,["title"]),u($,null,{default:g(()=>[u(Q,{title:x.title,breadcrumbs:x.breadcrumbs},null,8,["title","breadcrumbs"]),e("div",G,[t.warnn?(r(),d("div",J,[e("div",K,[e("div",W,[Y,e("div",ee,[e("div",null,l(t.warnn?t.warnn:""),1)])])])])):p("",!0),e("div",oe,[e("section",se,[e("div",te,[n.can(["update user"])?(r(),d("div",ae,[e("div",re,[e("div",ie,[u(o(Z),{class:"h-24 lg:h-48 md:h-36 w-full object-cover object-center"}),e("div",le,[e("form",{onSubmit:y(B,["prevent"]),id:"downloadReporte",class:"text-center"},[ce,de,ue,e("div",me,[e("div",pe,[u(I,{modelValue:o(i).quincena,"onUpdate:modelValue":m[0]||(m[0]=c=>o(i).quincena=c),dataSet:R,class:"my-2 py-3 block w-full"},null,8,["modelValue"])]),e("div",_e,[u(o(U),{"month-picker":"","auto-apply":"",teleport:!0,id:"fecha_ini",type:"date",class:"mt-1 block w-full",modelValue:o(i).fecha_ini,"onUpdate:modelValue":m[1]||(m[1]=c=>o(i).fecha_ini=c),required:"",placeholder:n.lang().placeholder.fecha_ini,error:o(i).errors.fecha_ini},null,8,["modelValue","placeholder","error"])])]),o(i).fecha_ini&&s.NumReportes>0&&s.haySinsalario==!1?F((r(),D(w,{key:0,disabled:o(i).fecha_ini==null,class:"rounded-none my-4"},{default:g(()=>[_(" Exportar Quincena ")]),_:1},8,["disabled"])),[[V,n.can(["create user"])]]):p("",!0)],40,ne)]),s.haySinsalario===0?(r(),d("section",he,[e("div",fe,[e("div",ge,[xe,ve,s.NumReportes!=0?(r(),d("p",be,[_(" Para esta fecha, hay "),e("b",null,l(s.NumReportes),1),_(" reportes.")])):p("",!0),s.NumReportes!=0?(r(),d("p",ye,[e("small",null,l(s.ini),1),_(" - "),e("small",null,l(s.fin),1)])):p("",!0),s.NumReportes!=0?(r(),d("p",we,[_(" Existen "),e("b",null,l(s.NumReportesRecha),1),_(" rechazados y "),e("b",null,l(s.NumReportesSinval),1),_(" sin aprobar.")])):p("",!0)])])])):(r(),d("section",Se,ke))])]),e("div",Re,[e("div",qe,[u(o(P),{class:"h-24 lg:h-48 md:h-36 w-full object-cover object-center"}),e("div",Fe,[e("form",{onSubmit:y(H,["prevent"]),id:"downloadReporte",class:"text-center"},[De,Ee,Ie,e("div",Ue,[u(I,{modelValue:o(a).quincena_sigo,"onUpdate:modelValue":m[2]||(m[2]=c=>o(a).quincena_sigo=c),id:"quincena_si",dataSet:R,class:"mt-1 block w-1/3 mx-1"},null,8,["modelValue"]),u(o(U),{"month-picker":"","auto-apply":"",teleport:!0,id:"fecha_ini_sigo",type:"date",modelValue:o(a).fecha_ini_sigo,"onUpdate:modelValue":m[3]||(m[3]=c=>o(a).fecha_ini_sigo=c),required:"",placeholder:n.lang().placeholder.fecha_ini_sigo,error:o(a).errors.fecha_ini_sigo,class:"mt-1 w-1/3"},null,8,["modelValue","placeholder","error"])]),o(a).fecha_ini_sigo.year?(r(),D(w,{key:0,disabled:o(a).fecha_ini_sigo==null,class:"rounded-none my-4"},{default:g(()=>[_(" Descargar formato siigo ")]),_:1},8,["disabled"])):p("",!0)],40,Ve)]),e("section",je,[e("div",Be,[s.NumReportesSigo||s.NumReportesRechaSigo||s.NumReportesSinvalSigo?(r(),d("div",He,[e("p",null,"# Reportes validos: "+l(s.NumReportesSigo),1),e("p",null,"# Reportes rechazados: "+l(s.NumReportesRechaSigo),1),e("p",null,"# Reportes sin validar: "+l(s.NumReportesSinvalSigo),1),s.NumReportesSigo?p("",!0):(r(),d("h1",ze," Este formato incluye ")),Ce,(r(!0),d(b,null,E(t.tiposSiigo,c=>(r(),d("p",Me,[e("p",null,l(c),1)]))),256))])):p("",!0)])])])]),e("div",Oe,[e("div",Le,[u(o(T),{class:"h-24 lg:h-48 md:h-36 w-full object-cover object-center"}),e("div",Ae,[$e,Qe,Ze,e("form",{onSubmit:y(j,["prevent"]),id:"upload"},[e("input",{type:"file",onInput:m[4]||(m[4]=c=>o(h).archivo1=c.target.files[0]),accept:"application/vnd.openxmlformUpats-officedocument.spreadsheetml.sheet"},null,32),o(h).progress?(r(),d("progress",{key:0,value:o(h).progress.percentage,max:"100"},l(o(h).progress.percentage)+"% ",9,Te)):p("",!0),e("div",Xe,[F(u(w,{disabled:o(h).archivo1==null,class:"rounded-none my-4"},{default:g(()=>[_(l(n.lang().button.subir),1)]),_:1},8,["disabled"]),[[V,n.can(["create user"])]])])],40,Pe),e("div",Ge,[e("a",Je," Numero de Empleados: "+l(s.NumUsers),1),e("section",Ke,[e("div",We,[Ye,e("div",eo,[(r(),d(b,null,E(z,c=>e("div",oo,[e("div",so,[to,e("span",ao,l(c.value)+" : "+l(c.rule),1)])])),64))])])])])])])])])):p("",!0)])])])])]),_:1})],64))}};export{ho as default};
