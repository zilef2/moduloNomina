import{l as M,v as T,k as G,f as B,a as o,w as p,o as E,b as n,t as c,u as l,g as I,d as N,n as J,e as K}from"./app-6ac411c7.js";import{_ as t}from"./InputError-3cbdf420.js";import{_ as d,a as i}from"./TextInput-b199efac.js";import{_ as L,a as P}from"./SecondaryButton-6eb1d3d9.js";import{_ as Q}from"./PrimaryButton-8de5fca9.js";import{_ as g}from"./SelectInput-6bca3b72.js";const R={class:"space-y-6"},W=["onSubmit"],X={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},Y={class:"my-6 space-y-4"},Z={class:"grid grid-cols-2 gap-6"},ee={key:0},le={class:""},ae={class:""},oe={class:"flex justify-end"},me={__name:"Edit",props:{show:Boolean,title:String,user:Object,roles:Object,cargos:Object,centros:Object,sexoSelect:Object},emits:["close"],setup(x,{emit:f}){var b,V,_;const u=x,m=M({}),e=T({name:"",email:"",cedula:"",telefono:"",celular:"",fecha_de_ingreso:"",sexo:"",salario:"",role:"",cargo:"",centroid:""}),v=()=>{var a;e.put(route("user.update",(a=u.user)==null?void 0:a.id),{preserveScroll:!0,onSuccess:()=>{f("close"),e.reset()},onError:()=>{alert("Hay campos incompletos o erroneos")},onFinish:()=>{m.AutoActualizarse=!0}})};G(()=>{var a,r,s,h,w,k,y,S,U,q,C,$,A,j,z,O;u.show?(e.errors={},m.AutoActualizarse&&(e.name=(a=u.user)==null?void 0:a.name,e.email=(r=u.user)==null?void 0:r.email,e.cedula=(s=u.user)==null?void 0:s.cedula,e.telefono=(h=u.user)==null?void 0:h.telefono,e.celular=(w=u.user)==null?void 0:w.celular,e.fecha_de_ingreso=(k=u.user)==null?void 0:k.fecha_de_ingreso,e.sexo=(y=u.user)==null?void 0:y.sexo,e.sexo=((S=u.user)==null?void 0:S.sexo)=="masculino"?0:1,e.salario=(U=u.user)==null?void 0:U.salario,e.role=((q=u.user)==null?void 0:q.roles)==0?"":(C=u.user)==null?void 0:C.roles[0].name,e.cargo=(($=u.user)==null?void 0:$.cargo_id)==0?"":(A=u.user)==null?void 0:A.cargo.id,console.log("ðŸ§ˆ debu props.user?.centro_costo_id:",(j=u.user)==null?void 0:j.centro_costo_id),e.centroid=((z=u.user)==null?void 0:z.centro_costo_id)==0?0:(O=u.user)==null?void 0:O.centro_costo_id,m.AutoActualizarse=!1),e.errors={},console.log("ðŸ§ˆ debu form.role:",e.role),e.role=="supervisor"?m.mostrarCentro=!0:m.mostrarCentro=!1):m.AutoActualizarse=!0});const D=(b=u.roles)==null?void 0:b.map(a=>({label:a.name,value:a.name})),F=(V=u.cargos)==null?void 0:V.map(a=>({label:a.nombre,value:a.id})),H=(_=u.centros)==null?void 0:_.map(a=>({label:a.nombre,value:a.id}));return(a,r)=>(E(),B("section",R,[o(L,{show:u.show,onClose:r[12]||(r[12]=s=>f("close"))},{default:p(()=>[n("form",{class:"p-6",onSubmit:K(v,["prevent"])},[n("h2",X,c(a.lang().label.edit)+" "+c(u.title),1),n("div",Y,[n("div",null,[o(d,{for:"name",value:a.lang().label.name},null,8,["value"]),o(i,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:l(e).name,"onUpdate:modelValue":r[0]||(r[0]=s=>l(e).name=s),required:"",placeholder:a.lang().placeholder.name,error:l(e).errors.name},null,8,["modelValue","placeholder","error"]),o(t,{class:"mt-2",message:l(e).errors.name},null,8,["message"])]),n("div",null,[o(d,{for:"cedula",value:a.lang().label.cedula},null,8,["value"]),o(i,{id:"cedula",type:"text",class:"mt-1 block w-full",modelValue:l(e).cedula,"onUpdate:modelValue":r[1]||(r[1]=s=>l(e).cedula=s),required:"",placeholder:a.lang().placeholder.cedula,error:l(e).errors.cedula},null,8,["modelValue","placeholder","error"]),o(t,{class:"mt-2",message:l(e).errors.cedula},null,8,["message"])]),n("div",null,[o(d,{for:"email",value:a.lang().label.email},null,8,["value"]),o(i,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:l(e).email,"onUpdate:modelValue":r[2]||(r[2]=s=>l(e).email=s),placeholder:a.lang().placeholder.email,error:l(e).errors.email},null,8,["modelValue","placeholder","error"]),o(t,{class:"mt-2",message:l(e).errors.email},null,8,["message"])]),n("div",Z,[n("div",null,[o(d,{for:"role",value:a.lang().label.role},null,8,["value"]),o(g,{id:"role",class:"mt-1 block w-full",modelValue:l(e).role,"onUpdate:modelValue":r[3]||(r[3]=s=>l(e).role=s),required:"",dataSet:l(D)},null,8,["modelValue","dataSet"]),o(t,{class:"mt-2",message:l(e).errors.role},null,8,["message"])]),m.mostrarCentro?(E(),B("div",ee,[o(d,{for:"centro",value:a.lang().label.centro},null,8,["value"]),o(g,{id:"centro",class:"mt-1 block w-full",modelValue:l(e).centroid,"onUpdate:modelValue":r[4]||(r[4]=s=>l(e).centroid=s),required:"",dataSet:l(H)},null,8,["modelValue","dataSet"]),o(t,{class:"mt-2",message:l(e).errors.centro},null,8,["message"])])):I("",!0),n("div",null,[o(d,{for:"cargo",value:a.lang().label.cargo},null,8,["value"]),o(g,{id:"cargo",class:"mt-1 block w-full",modelValue:l(e).cargo,"onUpdate:modelValue":r[5]||(r[5]=s=>l(e).cargo=s),required:"",dataSet:l(F)},null,8,["modelValue","dataSet"]),o(t,{class:"mt-2",message:l(e).errors.cargo},null,8,["message"])]),n("div",le,[o(d,{for:"telefono",value:a.lang().label.telefono+" (opcional)"},null,8,["value"]),o(i,{id:"telefono",type:"text",class:"mt-1 block w-full",modelValue:l(e).telefono,"onUpdate:modelValue":r[6]||(r[6]=s=>l(e).telefono=s),required:"",placeholder:a.lang().placeholder.telefono,error:l(e).errors.telefono},null,8,["modelValue","placeholder","error"]),o(t,{class:"mt-2",message:l(e).errors.telefono},null,8,["message"])]),n("div",ae,[o(d,{for:"celular",value:a.lang().label.celular},null,8,["value"]),o(i,{id:"celular",type:"text",class:"mt-1 block w-full",modelValue:l(e).celular,"onUpdate:modelValue":r[7]||(r[7]=s=>l(e).celular=s),required:"",placeholder:a.lang().placeholder.celular,error:l(e).errors.celular},null,8,["modelValue","placeholder","error"]),o(t,{class:"mt-2",message:l(e).errors.celular},null,8,["message"])]),n("div",null,[o(d,{for:"salario",value:a.lang().label.salario},null,8,["value"]),o(i,{id:"salario",type:"number",class:"mt-1 block w-full",modelValue:l(e).salario,"onUpdate:modelValue":r[8]||(r[8]=s=>l(e).salario=s),required:"",placeholder:a.lang().placeholder.salario,error:l(e).errors.salario},null,8,["modelValue","placeholder","error"]),o(t,{class:"mt-2",message:l(e).errors.salario},null,8,["message"])]),n("div",null,[o(d,{for:"sexo",value:a.lang().label.sexo},null,8,["value"]),o(g,{modelValue:l(e).sexo,"onUpdate:modelValue":r[9]||(r[9]=s=>l(e).sexo=s),dataSet:u.sexoSelect,class:"mt-1 block w-full"},null,8,["modelValue","dataSet"]),o(t,{class:"mt-2",message:l(e).errors.sexo},null,8,["message"])])]),n("div",null,[o(d,{for:"fecha_de_ingreso",value:a.lang().label.fecha_de_ingreso},null,8,["value"]),o(i,{id:"fecha_de_ingreso",type:"date",class:"mt-1 block w-full",modelValue:l(e).fecha_de_ingreso,"onUpdate:modelValue":r[10]||(r[10]=s=>l(e).fecha_de_ingreso=s),required:"",placeholder:a.lang().placeholder.fecha_de_ingreso,error:l(e).errors.fecha_de_ingreso},null,8,["modelValue","placeholder","error"]),o(t,{class:"mt-2",message:l(e).errors.fecha_de_ingreso},null,8,["message"])])]),n("div",oe,[o(P,{disabled:l(e).processing,onClick:r[11]||(r[11]=s=>f("close"))},{default:p(()=>[N(c(a.lang().button.close),1)]),_:1},8,["disabled"]),o(Q,{class:J(["ml-3",{"opacity-25":l(e).processing}]),disabled:l(e).processing,onClick:v},{default:p(()=>[N(c(l(e).processing?a.lang().button.save+"...":a.lang().button.save),1)]),_:1},8,["class","disabled"])])],40,W)]),_:1},8,["show"])]))}};export{me as default};
