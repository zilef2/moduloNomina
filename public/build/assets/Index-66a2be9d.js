import{p as U,J as A,q as T,O as L,f as g,a as l,u as i,w as p,F as $,s as F,o as u,X as M,g as v,b as e,x as d,y as c,d as h,t as n,h as x,B as O,c as b,z as R,A as q}from"./app-7d8a88a1.js";import{_ as z}from"./AuthenticatedLayout-e41c245c.js";import{_ as H}from"./Breadcrumb-a945073b.js";import{_ as J}from"./TextInput-dde56339.js";import{_ as k}from"./PrimaryButton-5eb18248.js";import{_ as I}from"./InfoButton-baf869ec.js";import{_ as X}from"./SelectInput-9858eaa9.js";import{_ as j}from"./DangerButton-a9be7388.js";import{_ as G}from"./Pagination-d051add1.js";import{S as K,T as V,C as f,E as Q,P as W,L as Y}from"./index-af807553.js";import{n as Z}from"./global-683f42af.js";import ee from"./Create-d0c113aa.js";import se from"./Edit-59013bce.js";import te from"./EdiCentro-dc9d2666.js";import re from"./Delete-2076a627.js";import oe from"./DeleteBulk-683f5ba9.js";import{_ as le}from"./Checkbox-87104343.js";import"./app-57141eb6.js";import"./InputError-2b936d61.js";import"./InputLabel-5c98cac6.js";import"./SecondaryButton-5abc3bad.js";const ae={key:0,class:"text-lg mt-2 mb-5 text-red-600"},ne={class:"space-y-4"},ie={class:"px-4 sm:px-0"},de={class:"rounded-lg overflow-hidden w-fit gap-8"},ce={class:"rounded-lg overflow-hidden w-fit gap-8 my-2"},pe={class:"mx-4 pt-1 pb-3 inline-flex"},ue=e("label",{for:"onlySupervis",class:"mx-2"},"Mostrar solo supervisores",-1),me={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},fe={class:"flex justify-between p-2"},ye={class:"flex space-x-2"},ge={class:"overflow-x-auto scrollbar-table"},he={class:"w-full"},be={class:"uppercase text-sm border-t border-gray-200 dark:border-gray-700"},_e={class:"dark:bg-gray-900/50 text-left"},we={class:"px-2 py-4 text-center"},ve={class:"px-2 py-4 text-center"},xe={class:"flex justify-between items-center"},ke={class:"flex justify-between items-center"},Ce=e("span",null," Identificacion ",-1),Se={class:"flex justify-between items-center"},$e=e("span",null," Numero de contrato ",-1),Oe={class:"flex justify-between items-center"},Ie={class:"px-2 py-4"},je={class:"flex justify-between items-center"},Ve={class:"flex justify-between items-center"},Ne={class:"flex w-20 justify-between items-center"},Be={class:"flex justify-between items-center"},Ee={class:"flex justify-between items-center"},Pe={class:"px-2 py-4 cursor-not-allowed"},De={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},Ue=["value"],Ae={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Te={class:"flex justify-start items-center"},Le={class:"text-sm"},Fe={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Me={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Re={class:"whitespace-nowrap py-4 px-2 sm:py-3 font-bold"},qe={class:"whitespace-nowrap py-4 px-2 sm:py-3"},ze={class:"whitespace-nowrap py-4 px-2 sm:py-3"},He={key:0},Je={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Xe={class:"w-2 py-4 px-2 sm:py-3 truncate"},Ge={class:"min-w-[20px] max-w-[300px] py-4 px-2 sm:py-3 truncate"},Ke={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Qe={class:"whitespace-nowrap py-4 px-2 sm:py-3"},We={class:"whitespace-nowrap p-4 sm:p-3"},Ye={class:"flex justify-center"},Ze={class:"rounded-md overflow-hidden"},es={class:"flex justify-between items-center p-2 border-t border-gray-200 dark:border-gray-700"},xs={__name:"Index",props:{title:String,filters:Object,users:Object,roles:Object,cargos:Object,centros:Object,breadcrumbs:Object,perPage:Number,sexoSelect:Object,onlySupervis:Number,superviNullCentro:Number},setup(_){const a=_,{_:N,debounce:B,pickBy:E}=F,s=U({params:{search:a.filters.search,field:a.filters.field,order:a.filters.order,perPage:a.perPage,onlySupervis:a.onlySupervis},selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,EdiCentroOpen:!1,deleteOpen:!1,deleteBulkOpen:!1,user:null,dataSet:A().props.app.perpage,columsVisible:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0,14:!0,15:!0}}),m=o=>{s.params.field=o,s.params.order=s.params.order==="asc"?"desc":"asc",console.log(s.params.order),console.log(s.params.field)};T(()=>N.cloneDeep(s.params),B(()=>{let o=E(s.params);console.log("🧈 debu params:",o),L.get(route("user.index"),o,{replace:!0,preserveState:!0,preserveScroll:!0})},15));const P=o=>{var r;o.target.checked===!1?s.selectedId=[]:(r=a.users)==null||r.data.forEach(y=>{s.selectedId.push(y.id)})},D=()=>{var o;((o=a.users)==null?void 0:o.data.length)==s.selectedId.length?s.multipleSelect=!0:s.multipleSelect=!1};return s.params.onlySupervis=s.params.onlySupervis===null?!1:s.params.onlySupervis,(o,r)=>{const y=q("tooltip");return u(),g($,null,[l(i(M),{title:a.title},null,8,["title"]),l(z,null,{default:p(()=>[l(H,{title:_.title,breadcrumbs:_.breadcrumbs},null,8,["title","breadcrumbs"]),a.superviNullCentro?v("",!0):(u(),g("p",ae," Hay supervisores sin centro")),e("div",ne,[e("div",ie,[e("div",de,[d(l(k,{class:"rounded-md mx-2",onClick:r[0]||(r[0]=t=>s.createOpen=!0)},{default:p(()=>[h(n(o.lang().button.add),1)]),_:1},512),[[c,o.can(["create user"])]]),d(l(i(x),{href:o.route("IndexTrashed"),class:"mx-1 bg-gray-700/40 dark:bg-gray-800/40 text-white rounded-lg hover:bg-primary dark:hover:bg-primary"},{default:p(()=>[d(l(k,{class:"flex items-center px-4"},{default:p(()=>[h(" Desvinculados ")]),_:1},512),[[c,o.can(["create user"])]])]),_:1},8,["href"]),[[c,o.can(["update user"])]]),d(l(i(x),{href:o.route("user.uploadexcel"),class:"mx-2 bg-gray-700/40 dark:bg-gray-800/40 text-white rounded-lg hover:bg-primary dark:hover:bg-primary"},{default:p(()=>[d(l(k,{class:"flex items-center px-4"},{default:p(()=>[h(" Exportar e Importar "),l(i(K),{class:"w-3 h-3 ml-2 mb-1"})]),_:1},512),[[c,o.can(["update user"])&&a.superviNullCentro]])]),_:1},8,["href"]),[[c,o.can(["update user"])]]),l(ee,{show:s.createOpen,onClose:r[1]||(r[1]=t=>s.createOpen=!1),roles:a.roles,cargos:a.cargos,centros:a.centros,sexoSelect:a.sexoSelect,title:a.title},null,8,["show","roles","cargos","centros","sexoSelect","title"]),l(se,{show:s.editOpen,onClose:r[2]||(r[2]=t=>s.editOpen=!1),user:s.user,roles:a.roles,cargos:a.cargos,centros:a.centros,sexoSelect:a.sexoSelect,title:a.title},null,8,["show","user","roles","cargos","centros","sexoSelect","title"]),l(te,{show:s.EdiCentroOpen,onClose:r[3]||(r[3]=t=>s.EdiCentroOpen=!1),user:s.user,centros:a.centros,title:a.title},null,8,["show","user","centros","title"]),l(re,{show:s.deleteOpen,onClose:r[4]||(r[4]=t=>s.deleteOpen=!1),user:s.user,title:a.title},null,8,["show","user","title"]),l(oe,{show:s.deleteBulkOpen,onClose:r[5]||(r[5]=t=>(s.deleteBulkOpen=!1,s.multipleSelect=!1,s.selectedId=[])),selectedId:s.selectedId,title:a.title},null,8,["show","selectedId","title"])]),e("div",ce,[e("div",pe,[h("‎ "),d(e("input",{id:"onlySupervis",type:"checkbox","onUpdate:modelValue":r[6]||(r[6]=t=>s.params.onlySupervis=t),class:"inline-flex items-center p-3 border-2 border-sky-500 rounded-md font-semibold hover:bg-primary/80 dark:hover:bg-primary/90 focus:bg-primary/80 dark:focus:bg-primary/80 active:bg-primary dark:active:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-primary transition ease-in-out duration-150 disabled:bg-primary/80"},null,512),[[O,s.params.onlySupervis]]),ue])])]),e("div",me,[e("div",fe,[e("div",ye,[l(X,{modelValue:s.params.perPage,"onUpdate:modelValue":r[7]||(r[7]=t=>s.params.perPage=t),dataSet:s.dataSet},null,8,["modelValue","dataSet"]),d((u(),b(j,{onClick:r[8]||(r[8]=t=>s.deleteBulkOpen=!0),class:"px-3 py-1.5"},{default:p(()=>[l(i(V),{class:"w-5 h-5"})]),_:1})),[[c,s.selectedId.length!=0&&o.can(["delete user"])],[y,o.lang().tooltip.delete_selected]])]),l(J,{modelValue:s.params.search,"onUpdate:modelValue":r[9]||(r[9]=t=>s.params.search=t),type:"text",class:"block w-3/6 md:w-2/6 lg:w-1/6 rounded-lg",placeholder:"Buscar por nombre o correo"},null,8,["modelValue"])]),e("div",ge,[e("table",he,[e("thead",be,[e("tr",_e,[e("th",we,[l(le,{checked:s.multipleSelect,"onUpdate:checked":r[10]||(r[10]=t=>s.multipleSelect=t),onChange:P},null,8,["checked"])]),d(e("th",ve,"#",512),[[c,s.columsVisible[0]]]),d(e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[11]||(r[11]=t=>m("name"))},[e("div",xe,[e("span",null,n(o.lang().label.name),1),l(i(f),{class:"w-4 h-4"})])],512),[[c,s.columsVisible[1]]]),d(e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[12]||(r[12]=t=>m("cedula"))},[e("div",ke,[Ce,l(i(f),{class:"w-4 h-4"})])],512),[[c,s.columsVisible[2]]]),d(e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[13]||(r[13]=t=>m("numero_contrato"))},[e("div",Se,[$e,l(i(f),{class:"w-4 h-4"})])],512),[[c,s.columsVisible[3]]]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[14]||(r[14]=t=>m("cargo_id"))},[e("div",Oe,[e("span",null,n(o.lang().label.cargo),1),l(i(f),{class:"w-4 h-4"})])]),e("th",Ie,n(o.lang().label.role),1),e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[15]||(r[15]=t=>m("celular"))},[e("div",je,[e("span",null,n(o.lang().label.celular),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[16]||(r[16]=t=>m("fecha_de_ingreso"))},[e("div",Ve,[e("span",null,n(o.lang().label.fecha_de_ingreso),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 w-20 cursor-pointer",onClick:r[17]||(r[17]=t=>m("centro_costo_id"))},[e("div",Ne,[e("span",null,n(o.lang().label.centro_costo),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[18]||(r[18]=t=>m("salario"))},[e("div",Be,[e("span",null,n(o.lang().label.salario),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:r[19]||(r[19]=t=>m("updated_at"))},[e("div",Ee,[e("span",null,n(o.lang().label.updated),1),l(i(f),{class:"w-4 h-4"})])]),e("th",Pe,n(o.lang().label.Action),1)])]),e("tbody",null,[(u(!0),g($,null,R(_.users.data,(t,C)=>{var S;return u(),g("tr",{key:C,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[e("td",De,[d(e("input",{class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:D,value:t.id,"onUpdate:modelValue":r[20]||(r[20]=w=>s.selectedId=w)},null,40,Ue),[[O,s.selectedId]])]),d(e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},n(++C),513),[[c,s.columsVisible[0]]]),d(e("td",Ae,[e("span",Te,n(t.name),1),e("small",Le,n(t.email),1)],512),[[c,s.columsVisible[1]]]),e("td",Fe,n(t.cedula),1),e("td",Me,n(t.numero_contrato),1),e("td",Re,n(t.cargo.length===0?"No tiene cargo":t.cargo.nombre),1),e("td",qe,n(t.roles.length===0?"No tiene rol":t.roles[0].name),1),e("td",ze,[h(n(t.celular)+" ",1),t.telefono&&t.telefono!==t.celular?(u(),g("span",He," / "+n(t.telefono),1)):v("",!0)]),e("td",Je,n(t.fecha_de_ingreso),1),e("td",Xe,[e("div",Ge,n(t.cc),1)]),e("td",Ke,n(i(Z)(t.salario,0,1)),1),e("td",Qe,n(t.updated_at),1),e("td",We,[e("div",Ye,[d((u(),b(i(x),{href:o.route("user.showReporte",t.id),type:"button",class:"inline-flex items-center p-1.5 bg-gray-600 border border-transparent rounded-l-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-500 active:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-250"},{default:p(()=>[l(i(Q),{class:"w-4 h-4"})]),_:2},1032,["href"])),[[c,o.can(["update centroCostos"])],[y,o.lang().tooltip.seeReport]]),e("div",Ze,[d((u(),b(I,{type:"button",onClick:w=>(s.editOpen=!0,s.user=t),class:"px-2 py-1.5 rounded-sm mx-0.5"},{default:p(()=>[l(i(W),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[c,o.can(["update user"])],[y,o.lang().tooltip.edit]]),t.roles[0]?d((u(),b(I,{key:0,type:"button",onClick:w=>(s.EdiCentroOpen=!0,s.user=t),class:"px-2 py-1.5 rounded-sm mx-0.5"},{default:p(()=>[l(i(Y),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[c,o.can(["update user"])&&((S=t.roles[0])==null?void 0:S.name)==="supervisor"],[y,"Asignar"]]):v("",!0),d((u(),b(j,{type:"button",onClick:w=>(s.deleteOpen=!0,s.user=t),class:"px-2 py-1.5 rounded-none"},{default:p(()=>[l(i(V),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[c,o.can(["delete user"])],[y,o.lang().tooltip.delete]])])])])])}),128))])])]),e("div",es,[l(G,{links:a.users,filters:s.params},null,8,["links","filters"])])])])]),_:1})],64)}}};export{xs as default};
