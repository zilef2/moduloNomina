import{l as Q,z as Y,m as Z,O as P,v as y,k as T,f as _,a as c,u as t,w as x,F as k,p as X,o as n,X as G,b as e,t as l,g as p,e as N,q as F,s as V,d,x as E,c as I}from"./app-a4b1e5fd.js";import{_ as J}from"./AuthenticatedLayout-54b418e1.js";import{_ as K}from"./Breadcrumb-b8d7b821.js";import{_ as S}from"./PrimaryButton-aa9a6133.js";import{_ as U}from"./SelectInput-d42bf996.js";import{m as W,n as ee,o as te}from"./index-820fe086.js";import{Z as j}from"./main-c4a3bbcd.js";import{a as oe}from"./app-57141eb6.js";const se={class:"space-y-4"},ae={key:0,class:"px-4 sm:px-0"},ie={class:"rounded-lg overflow-hidden w-fit"},le={class:"flex max-w-screen-xl shadow-lg rounded-lg"},re=e("div",{class:"bg-yellow-600 py-4 px-6 rounded-l-lg flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",class:"fill-current text-white",width:"20",height:"20"},[e("path",{"fill-rule":"evenodd",d:"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z"})])],-1),ne={class:"px-8 py-6 bg-white rounded-r-lg flex justify-between items-center w-full border border-l-transparent border-gray-200"},ce={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},de={class:"text-gray-600 body-font"},ue={class:"container px-5 py-12 mx-auto"},me={key:0,class:"flex flex-wrap -m-4"},_e={class:"p-4 w-full sm:w-1/2"},pe={class:"h-full border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden"},he={class:"p-6"},fe=e("h3",{class:"mx-auto text-center title-font text-xl font-medium text-gray-900 mb-2"},"Subir empleados",-1),ge=e("h2",{class:"mb-4 tracking-widest text-center text-sm title-font font-medium text-gray-400 dark:text-gray-100"}," Formato xlsx",-1),xe=e("p",{class:"leading-relaxed mb-3"}," Este formulario solo permite cargar empleados o administrativos",-1),be=["onSubmit"],ve=["value"],we={class:"w-full"},ye={class:"flex items-center flex-wrap my-6"},ke={class:"text-indigo-500 inline-flex items-center md:mb-2 lg:mb-0"},Ne={class:"text-gray-600 body-font"},Se={class:"container p-5 mx-auto"},qe=e("div",{class:"text-center mb-1"},[e("h1",{class:"text-xl font-medium text-center title-font text-gray-900 mb-4"}," Formato del excel "),e("p",{class:"text-base leading-relaxed w-full mx-auto"}," Solo la primera fila debe ser la misma ")],-1),De={class:"flex flex-wrap sm:mx-auto sm:mb-2 -mx-2"},Re={class:"px-2 w-full"},Fe={class:"bg-gray-50 rounded flex p-1 h-full items-center"},Ve=e("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",class:"text-indigo-500 w-6 h-6 flex-shrink-0 mr-4",viewBox:"0 0 24 24"},[e("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),d(),e("path",{d:"M22 4L12 14.01l-3-3"})],-1),Ee={class:"title-font font-medium"},Ie={class:"p-4 w-full sm:w-1/2"},Ue={class:"h-full border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden"},je={class:"p-6"},Be=["onSubmit"],He=e("h2",{class:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1"}," Formato xlsx",-1),Me=e("h3",{class:"title-font text-lg font-medium text-gray-900 mb-3"},"Descargar reporte ",-1),Le=e("p",{class:"leading-relaxed mb-3"}," Este formulario permite descargar el reporte de la quincena",-1),Oe={class:""},ze={class:""},Ce={class:"col-span-1 lg:col-span-2"},Ae={class:"text-gray-600 body-font"},$e={class:"container p-5 mx-auto"},Qe={class:"text-center mb-1"},Ye=e("h1",{class:"text-xl font-medium text-center title-font text-gray-900 mb-4"}," Recuerde",-1),Ze=e("p",{class:"text-base leading-relaxed w-full mx-auto"}," Solo se descargarÃ¡n, Los reportes que sean validos.",-1),Pe={key:0,class:"text-xl leading-relaxed w-full mx-auto"},Te={key:1,class:"text-base leading-relaxed w-full mx-auto"},Xe={key:2,class:"text-xl leading-relaxed w-full mx-auto"},Ge={class:"p-4 w-full sm:w-1/2"},Je={class:"h-full border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden"},Ke={class:"p-6"},We=["onSubmit"],et=e("h2",{class:"tracking-widest text-xs title-font font-medium text-gray-400 mb-1"}," Seleccione quincena",-1),tt=e("h3",{class:"title-font text-lg font-medium text-gray-900 mb-3"},"Descargar siigo ",-1),ot=e("p",{class:"leading-relaxed mb-3"}," Este formulario permite descargar el reporte de la quincena para siigo",-1),st={class:"flex"},at={class:"text-gray-600 body-font"},it={class:"container p-5 mx-auto"},lt={class:"text-center mb-1"},rt=e("h1",{class:"text-xl font-medium text-center title-font text-gray-900 mb-4"}," Este formato incluye ",-1),nt=e("p",{class:"text-base leading-relaxed w-full mx-auto"},null,-1),ct={class:"text-base leading-relaxed w-full mx-auto"},xt={__name:"uploadFromExcel",props:{title:String,breadcrumbs:Object,NumUsers:Number,NumReportes:Number,ini:Date,fin:Date,flash:String,NumReportesRecha:Number,NumReportesSinval:Number},setup(b){const a=b,{_:B,debounce:H,pickBy:M}=X;new Date().getFullYear();const u=Q({respuesta:"",params:{fecha_ini:"",quincena:""},warnn:"",tiposSiigo:[]});Y(()=>{}),Z(()=>B.cloneDeep(u.params),H(()=>{let m=M(u.params);P.get(route("user.uploadexcel"),m,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const h=y({archivo1:null}),o=y({archivo1:null,fecha_ini:"",quincena:1,NumeroDiasFestivos:0}),s=y({archivosigo:null,quincena_sigo:1,fecha_ini_sigo:"",NumeroDiasFestivos:0});T(()=>{console.log("ðŸ§ˆ debu form2.quincena_sigo:",s.quincena_sigo),a.flash.warning&&(u.warnn=a.flash.warning),u.params.fecha_ini=o.fecha_ini,u.params.quincena=o.quincena,s.fecha_ini_sigo&&(s.NumeroDiasFestivos=q(s.quincena_sigo,s.fecha_ini_sigo.month,s.fecha_ini_sigo.year)),o.fecha_ini&&(o.NumeroDiasFestivos=q(o.quincena,o.fecha_ini.month,o.fecha_ini.year))});function q(m,r,i){let A=oe.getHolidaysByYear(i),f,g,R,v=0,w=m==1?14:31;return A.forEach($=>{if(g=$.date.split("/"),f=new Date(g[2],g[1]-1,g[0]),R=f.getMonth(),R==r)w==14?w>f.getDate()&&v++:f.getDate()>14&&w>f.getDate()&&v++;else return}),v}function L(){h.post(route("user.uploadexcelpost"),{preserveScroll:!0,onSuccess:()=>{},onError:()=>null,onFinish:()=>null})}const O=()=>{window.open("users/export/"+o.NumeroDiasFestivos+"/"+o.quincena+"/"+o.fecha_ini.month+"/"+o.fecha_ini.year,"_blank")},z=()=>{window.open("users/downloadsigo/"+s.NumeroDiasFestivos+"/"+s.quincena_sigo+"/"+s.fecha_ini_sigo.month+"/"+s.fecha_ini_sigo.year,"_blank")},D=[{value:null,label:"seleccione una quincena"},{value:1,label:1},{value:2,label:2}],C=[{value:"nombre",rule:"Obligatorio"},{value:"correo",rule:"Debe ser unico"},{value:"cedula",rule:"Debe ser un nÃºmero"},{value:"telefono",rule:"Obligatorio"},{value:"celular",rule:"Obligatorio"},{value:"rol",rule:"empleado o administrativo "},{value:"cargo",rule:"Verificar que el rol exista"},{value:"fecha ingreso",rule:"fecha ingreso a la empresa"},{value:"sexo",rule:"Masculino o Femenino"},{value:"salario",rule:"Sin puntos ni comas"}];return u.tiposSiigo=["10- Horas extras diurnas 125%- Ingreso","11- Horas extras nocturnas 175%- Ingreso","08- Hora extra recargo dominical o festivo- Ingreso","06- Hora dominical o festiva nocturna- Ingreso","07- Hora extra diurna dominical o festiva- Ingreso","12- Horas extras nocturnas dominical o festiva- Ingreso","26- Recargo nocturno- Ingreso"],(m,r)=>(n(),_(k,null,[c(t(G),{title:a.title},null,8,["title"]),c(J,null,{default:x(()=>[c(K,{title:b.title,breadcrumbs:b.breadcrumbs},null,8,["title","breadcrumbs"]),e("div",se,[u.warnn?(n(),_("div",ae,[e("div",ie,[e("div",le,[re,e("div",ne,[e("div",null,l(u.warnn?u.warnn:""),1)])])])])):p("",!0),e("div",ce,[e("section",de,[e("div",ue,[m.can(["update user"])?(n(),_("div",me,[e("div",_e,[e("div",pe,[c(t(W),{class:"h-24 lg:h-48 md:h-36 w-full object-cover object-center"}),e("div",he,[fe,ge,xe,e("form",{onSubmit:N(L,["prevent"]),id:"upload"},[e("input",{type:"file",onInput:r[0]||(r[0]=i=>t(h).archivo1=i.target.files[0]),accept:"application/vnd.openxmlformUpats-officedocument.spreadsheetml.sheet"},null,32),t(h).progress?(n(),_("progress",{key:0,value:t(h).progress.percentage,max:"100"},l(t(h).progress.percentage)+"% ",9,ve)):p("",!0),e("div",we,[F(c(S,{disabled:t(h).archivo1==null,class:"rounded-none my-4"},{default:x(()=>[d(l(m.lang().button.subir),1)]),_:1},8,["disabled"]),[[V,m.can(["create user"])]])])],40,be),e("div",ye,[e("a",ke," Numero de Usuarios: "+l(a.NumUsers),1),e("section",Ne,[e("div",Se,[qe,e("div",De,[(n(),_(k,null,E(C,i=>e("div",Re,[e("div",Fe,[Ve,e("span",Ee,l(i.value)+" : "+l(i.rule),1)])])),64))])])])])])])]),e("div",Ie,[e("div",Ue,[c(t(ee),{class:"h-24 lg:h-48 md:h-36 w-full object-cover object-center"}),e("div",je,[e("form",{onSubmit:N(O,["prevent"]),id:"downloadReporte",class:"text-center"},[He,Me,Le,e("div",Oe,[e("div",ze,[c(U,{modelValue:t(o).quincena,"onUpdate:modelValue":r[1]||(r[1]=i=>t(o).quincena=i),dataSet:D,class:"my-2 py-3 block w-full"},null,8,["modelValue"])]),e("div",Ce,[c(t(j),{"month-picker":"","auto-apply":"",teleport:!0,id:"fecha_ini",type:"date",class:"mt-1 block w-full",modelValue:t(o).fecha_ini,"onUpdate:modelValue":r[2]||(r[2]=i=>t(o).fecha_ini=i),required:"",placeholder:m.lang().placeholder.fecha_ini,error:t(o).errors.fecha_ini},null,8,["modelValue","placeholder","error"])])]),t(o).fecha_ini&&a.NumReportes>0?F((n(),I(S,{key:0,disabled:t(o).fecha_ini==null,class:"rounded-none my-4"},{default:x(()=>[d(" Exportar Quincena ")]),_:1},8,["disabled"])),[[V,m.can(["create user"])]]):p("",!0)],40,Be)]),e("section",Ae,[e("div",$e,[e("div",Qe,[Ye,Ze,a.NumReportes!=0?(n(),_("p",Pe,[d(" Para esta fecha, hay "),e("b",null,l(a.NumReportes),1),d(" reportes.")])):p("",!0),a.NumReportes!=0?(n(),_("p",Te,[e("small",null,l(a.ini),1),d(" - "),e("small",null,l(a.fin),1)])):p("",!0),a.NumReportes!=0?(n(),_("p",Xe,[d(" Existen "),e("b",null,l(a.NumReportesRecha),1),d(" rechazados y "),e("b",null,l(a.NumReportesSinval),1),d(" sin aprobar.")])):p("",!0)]),d(" bla "+l(a.NumReportes)+" a 1 bla "+l(a.NumReportesRecha)+" a2 bla "+l(a.NumReportesSinval)+" a sin ",1)])])])]),e("div",Ge,[e("div",Je,[c(t(te),{class:"h-24 lg:h-48 md:h-36 w-full object-cover object-center"}),e("div",Ke,[e("form",{onSubmit:N(z,["prevent"]),id:"downloadReporte",class:"text-center"},[et,tt,ot,e("div",st,[c(U,{modelValue:t(s).quincena_sigo,"onUpdate:modelValue":r[3]||(r[3]=i=>t(s).quincena_sigo=i),id:"quincena_si",dataSet:D,class:"mt-1 block w-1/3 mx-1"},null,8,["modelValue"]),c(t(j),{"month-picker":"","auto-apply":"",teleport:!0,id:"fecha_ini_sigo",type:"date",modelValue:t(s).fecha_ini_sigo,"onUpdate:modelValue":r[4]||(r[4]=i=>t(s).fecha_ini_sigo=i),required:"",placeholder:m.lang().placeholder.fecha_ini_sigo,error:t(s).errors.fecha_ini_sigo,class:"mt-1 w-1/3"},null,8,["modelValue","placeholder","error"])]),t(s).fecha_ini_sigo.year?(n(),I(S,{key:0,disabled:t(s).fecha_ini_sigo==null,class:"rounded-none my-4"},{default:x(()=>[d(" Descargar formato siigo ")]),_:1},8,["disabled"])):p("",!0)],40,We)]),e("section",at,[e("div",it,[e("div",lt,[rt,nt,(n(!0),_(k,null,E(u.tiposSiigo,i=>(n(),_("p",ct,[e("p",null,l(i),1)]))),256))])])])])])])):p("",!0)])])])])]),_:1})],64))}};export{xt as default};
