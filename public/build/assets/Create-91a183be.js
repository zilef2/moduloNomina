import{o as S,f as D,b as f,k as le,p as de,l as ue,T as ce,m as he,q as C,a as m,w as R,t as V,u as l,g as w,G as me,d as L,n as pe,D as fe,e as ge}from"./app-c790f4bd.js";import{_ as _e,a as be}from"./SecondaryButton-2843ee84.js";import{_ as N}from"./InputError-ac81a49a.js";import{_ as O}from"./InputLabel-2a5bfa3f.js";import{_ as ye}from"./PrimaryButton-f3c0a7f8.js";import{_ as T}from"./TextInput-987096fc.js";import{_ as Se}from"./SelectInput-f37c7ff6.js";import{X as q}from"./main-fae2f0ff.js";import{a as De}from"./app-57141eb6.js";import{T as J,w as ve}from"./global-683f42af.js";var xe=Object.defineProperty,we=Object.defineProperties,Oe=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable,Q=(a,o,t)=>o in a?xe(a,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[o]=t,k=(a,o)=>{for(var t in o||(o={}))Ae.call(o,t)&&Q(a,t,o[t]);if(X)for(var t of X(o))Ve.call(o,t)&&Q(a,t,o[t]);return a},W=(a,o)=>we(a,Oe(o));const Te={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer(){this.autoscroll&&this.maybeAdjustScroll()},open(a){this.autoscroll&&a&&this.$nextTick(()=>this.maybeAdjustScroll())}},methods:{maybeAdjustScroll(){var a;const o=((a=this.$refs.dropdownMenu)==null?void 0:a.children[this.typeAheadPointer])||!1;if(o){const t=this.getDropdownViewport(),{top:g,bottom:_,height:H}=o.getBoundingClientRect();if(g<t.top)return this.$refs.dropdownMenu.scrollTop=o.offsetTop;if(_>t.bottom)return this.$refs.dropdownMenu.scrollTop=o.offsetTop-(t.height-H)}},getDropdownViewport(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},He={data(){return{typeAheadPointer:-1}},watch:{filteredOptions(){for(let a=0;a<this.filteredOptions.length;a++)if(this.selectable(this.filteredOptions[a])){this.typeAheadPointer=a;break}},open(a){a&&this.typeAheadToLastSelected()},selectedValue(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp(){for(let a=this.typeAheadPointer-1;a>=0;a--)if(this.selectable(this.filteredOptions[a])){this.typeAheadPointer=a;break}},typeAheadDown(){for(let a=this.typeAheadPointer+1;a<this.filteredOptions.length;a++)if(this.selectable(this.filteredOptions[a])){this.typeAheadPointer=a;break}},typeAheadSelect(){const a=this.filteredOptions[this.typeAheadPointer];a&&this.selectable(a)&&this.select(a)},typeAheadToLastSelected(){this.typeAheadPointer=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1}}},je={props:{loading:{type:Boolean,default:!1}},data(){return{mutableLoading:!1}},watch:{search(){this.$emit("search",this.search,this.toggleLoading)},loading(a){this.mutableLoading=a}},methods:{toggleLoading(a=null){return a==null?this.mutableLoading=!this.mutableLoading:this.mutableLoading=a}}},ee=(a,o)=>{const t=a.__vccOpts||a;for(const[g,_]of o)t[g]=_;return t},Me={},ke={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},Ce=f("path",{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"},null,-1),Fe=[Ce];function Ie(a,o){return S(),D("svg",ke,Fe)}const Le=ee(Me,[["render",Ie]]),Ne={},$e={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"},Be=f("path",{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"},null,-1),Re=[Be];function Pe(a,o){return S(),D("svg",$e,Re)}const Ee=ee(Ne,[["render",Pe]]),G={Deselect:Le,OpenIndicator:Ee},Ue={mounted(a,{instance:o}){if(o.appendToBody){const{height:t,top:g,left:_,width:H}=o.$refs.toggle.getBoundingClientRect();let F=window.scrollX||window.pageXOffset,I=window.scrollY||window.pageYOffset;a.unbindPosition=o.calculatePosition(a,o,{width:H+"px",left:F+_+"px",top:I+g+t+"px"}),document.body.appendChild(a)}},unmounted(a,{instance:o}){o.appendToBody&&(a.unbindPosition&&typeof a.unbindPosition=="function"&&a.unbindPosition(),a.parentNode&&a.parentNode.removeChild(a))}};function ze(a){const o={};return Object.keys(a).sort().forEach(t=>{o[t]=a[t]}),JSON.stringify(o)}let Ke=0;function Ye(){return++Ke}k({},G);const qe={class:"space-y-6"},Je={class:"flex space-x-4"},Xe={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},Qe={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},We={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},Ge={class:"my-6 grid grid-cols-1 md:grid-cols-2 gap-6"},Ze={class:"mt-4 grid grid-cols-2 gap-6"},ea={key:0,class:"mt-4 grid grid-cols-2 gap-6"},aa={key:1,class:"grid grid-cols-2 gap-6"},ta={key:2,class:"grid grid-cols-2 gap-6"},ra={class:"mt-4"},oa={key:3,class:"mt-4"},sa=f("label",{class:"dark:text-white"},"Horario",-1),na={class:"flex justify-end"},ia={class:"flex justify-end my-3"},la={key:0,class:"mx-2"},da={key:1,class:"mx-2"},ua={key:2,class:"mx-2"},ca={key:3,class:"mx-2 text-red-600 text-lg"},ha={key:4,class:"mx-2 text-amber-700 bg-amber-400/10 rounded-2xl"},ma={key:0},pa={key:5,class:"mx-2 text-amber-700 bg-amber-400/10 rounded-2xl"},fa={key:0},ga={key:6,class:"mx-2 text-amber-700 bg-amber-400/10 rounded-2xl"},_a={key:0},Z=23,Ta={__name:"Create",props:{show:Boolean,title:String,valoresSelect:Object,IntegerDefectoSelect:Number,horasemana:Number,startDateMostrar:String,endDateMostrar:String,numberPermissions:Number,ArrayOrdinarias:Array,horasTrabajadasHoy:Array,HorasDeCadaSemana:Array,ArrayHorasSemanales:Array},emits:["close"],setup(a,{emit:o}){const t=a;let g=le(null);const _=t.ArrayHorasSemanales.HORAS_ORDINARIAS,H=t.ArrayHorasSemanales.MAXIMO_HORAS_SEMANALES-_;let F=8,I=0;const $=o,s=de({respuestaSeguro:"",startTime:{hours:7,minutes:0},estado2359:!1,TrabajadasHooy:0,TrabajadasSemana:0,diaini:1,MensajeError:"",MostrarConsole:{watchEffect:!1,CuandoEiezaExtra:!0,dia:!1,noche:!1,extradia:!1,extranoche:!1,dominicales:!1,terminaDomingo:!1,terminaLunes:!1,EsFestivo:!1,MostrarTrabajadaSemConso:!1,TrabajadasSemaConsole:!1},const:{HORAS_SEMANALES_MENOS_ESTANDAR:t.ArrayHorasSemanales.MAXIMO_HORAS_SEMANALES-t.ArrayHorasSemanales.HORAS_ORDINARIAS},Horas1159:t.ArrayOrdinarias.length>1,diaSelected:0,TemporalDiaAnterior:0});ue(()=>{s.TrabajadasSemana=t.HorasDeCadaSemana[t.HorasDeCadaSemana[0]]>H?t.HorasDeCadaSemana[t.HorasDeCadaSemana[0]]-H:0,console.log("=>(Create.vue:72) array.HorasDeCadaSemana",t.HorasDeCadaSemana),console.log("=>(Create.vue:72) props.HorasDeCadaSemana[0]",t.HorasDeCadaSemana[0]),s.TrabajadasSemana=s.TrabajadasSemana>_?_:s.TrabajadasSemana,localStorage.getItem("centroCostoId")&&(e.centro_costo_id=localStorage.getItem("centroCostoId")),s.MostrarConsole.TrabajadasSemaConsole&&(console.log("=>(Create.vue:77) data.TrabajadasSemana",s.TrabajadasSemana),console.log("=>(Create.vue:78) props.HorasDeCadaSemana[props.HorasDeCadaSemana[0]]",t.HorasDeCadaSemana[t.HorasDeCadaSemana[0]]))});const e=ce({fecha_ini:"",fecha_fin:"",centro_costo_id:t.IntegerDefectoSelect,observaciones:"",horas_trabajadas:"",almuerzo:"0",diurnas:0,nocturnas:0,extra_diurnas:0,extra_nocturnas:0,dominicales:"no",extra:"no",esFestivo:!1,dominical_diurnas:0,dominical_nocturnas:0,dominical_extra_diurnas:0,dominical_extra_nocturnas:0});let P=new Date;P.getHours(),P.get;let ae=J(7),te=J(16);t.numberPermissions>8?(e.fecha_ini="2024-05-19T07:00",e.fecha_fin="2024-05-19T16:00"):(e.fecha_ini=ae,e.fecha_fin=te);function E(i){let n,r,u,d,p=!1;var M={};let y=Math.floor(i.getDate()),h=i.getMonth();s.MostrarConsole.EsFestivo&&(console.log("MonthEvaluado",h),console.log("dayEvaluado",y),console.log("PARAMETER: fecha",i));try{De.getHolidaysByYear(i.getFullYear()).forEach(x=>{if(r=x.date.split("/"),n=new Date(r[2],r[1]-1,r[0]),u=Math.floor(n.getDate()),d=n.getMonth(),u===y&&d===h)throw p=!0,M})}catch{}return p}let j="",b,v;function re(i,n,r){e.dominical_diurnas=e.diurnas,e.dominical_extra_diurnas=e.extra_diurnas;const u=parseInt(i.getHours());if(u<=6)e.diurnas=0,e.extra_diurnas=0,e.nocturnas===0?(e.dominical_nocturnas=e.nocturnas-u,e.nocturnas=u):(e.dominical_extra_nocturnas=e.extra_nocturnas-u,e.extra_nocturnas=u);else{e.nocturnas===0?(e.dominical_extra_nocturnas=v,e.extra_nocturnas=b):(e.dominical_nocturnas=v,e.nocturnas=b-e.extra_nocturnas);const d=Math.abs(u-6);e.diurnas==0?(e.dominical_extra_diurnas=e.extra_diurnas-d,e.extra_diurnas=d):(e.dominical_diurnas=e.diurnas-d,e.diurnas=d)}}function oe(i,n,r,u){const d=parseInt(i.getHours()),p=parseInt(n.getHours());r!==null?r<6?(e.dominical_extra_nocturnas=b-r,e.extra_nocturnas-=e.dominical_extra_nocturnas,e.dominical_nocturnas=r,e.nocturnas-=r,e.dominical_diurnas=0,e.dominical_extra_diurnas=p>6?p-6:0,e.extra_diurnas-=e.dominical_extra_diurnas):u?(e.dominical_nocturnas=b,e.nocturnas=v,e.dominical_diurnas=r-6,e.dominical_extra_diurnas=p-r,e.diurnas=0,e.extra_diurnas=0):(e.dominical_extra_nocturnas=b,e.extra_nocturnas-=b,e.dominical_nocturnas=0,e.dominical_diurnas=0,p>6&&(e.dominical_extra_diurnas=p-6,e.extra_diurnas-=e.dominical_extra_diurnas)):(e.dominical_nocturnas=b,e.nocturnas-=b,d>=21?(e.dominical_diurnas=parseInt(e.diurnas),e.diurnas=0):(e.diurnas=21-d,e.dominical_diurnas=p>6?p-6:0))}function se(i,n,r,u){var d=E(new Date(i)),p=E(new Date(n));i.getDay()===0||n.getDay()===0?(e.dominicales="si",j="Dominical",(d||p)&&(j+=" y festivo")):d||p?(e.dominicales="si",j="Festivo"):e.dominicales="no",i.getDay()===0&&n.getDay()===0||d||p?(e.dominical_diurnas=e.diurnas,e.diurnas=0,e.dominical_nocturnas=e.nocturnas,e.nocturnas=0,e.dominical_extra_diurnas=e.extra_diurnas,e.extra_diurnas=0,e.dominical_extra_nocturnas=e.extra_nocturnas,e.extra_nocturnas=0):((i.getDay()===0||d)&&re(n),(n.getDay()===0||p)&&oe(i,n,r,u)),ne()}function ne(){var i=new Date(e.fecha_ini),n=i.getDay();if(n===6&&F--,e.horas_trabajadas>F){if(e.horas_trabajadas-=1,console.log("(F=>RestarAlm) nocturnas",e.nocturnas),console.log("(F=>RestarAlm) diurnas",e.diurnas),console.log("(F=>RestarAlm) extra_diurnas",e.extra_diurnas),console.log("(F=>RestarAlm) extra_nocturnas",e.extra_nocturnas),console.log("=>(Create.vue: F=>RestarAlmuarzo) ",e),console.log("=>(Create.vue: F=>RestarAlmuarzo) ",e),e.diurnas>0&&e.nocturnas<=e.diurnas)return e.diurnas-=1,e.almuerzo=" diurno",!0;if(e.nocturnas>0&&e.nocturnas>e.diurnas)return e.nocturnas-=1,e.almuerzo=" nocturno",!0;if(e.extra_diurnas>0&&e.extra_diurnas<=e.extra_nocturnas)return e.extra_diurnas-=1,e.almuerzo=" diurno",!0;if(e.extra_nocturnas>0&&e.extra_nocturnas>e.extra_diurnas)return e.extra_nocturnas-=1,e.almuerzo=" nocturno",!0;if(e.dominical_diurnas>0&&e.dominical_nocturnas<=e.dominical_diurnas)return e.dominical_diurnas-=1,e.almuerzo=" dominical",!0;if(e.dominical_nocturnas>0&&e.dominical_nocturnas>e.dominical_diurnas)return e.dominical_nocturnas-=1,e.almuerzo=" dominical nocturno",!0;if(e.dominical_extra_diurnas>0&&e.dominical_extra_nocturnas<=e.dominical_extra_diurnas)return e.dominical_extra_diurnas-=1,e.almuerzo=" dominical extra diurno",!0;if(e.dominical_extra_nocturnas>0&&e.dominical_extra_nocturnas>e.dominical_extra_diurnas)return e.dominical_extra_nocturnas-=1,e.almuerzo=" dominical extra nocturno",!0}e.almuerzo="No"}function ie(i,n){let r=new Date(i),u=new Date(n),d=!1;s.TemporalDiaAnterior=s.HorasDelDiaAnterior59?s.HorasDelDiaAnterior59:0,console.log("=>(Create.vue:328) data.HorasDelDiaAnterior59",s.HorasDelDiaAnterior59),console.log("=>(Create.vue:328) props.ArrayOrdinarias",t.ArrayOrdinarias);let p=_;if((Date.parse(e.fecha_ini)??!1)&&Date.parse(e.fecha_fin)){let y=parseInt(new Date(e.fecha_ini).getHours()),h=parseInt(new Date(e.fecha_fin).getHours()),c=y;if(p-=s.TrabajadasSemana-1,r.getDay()===6&&(c-=1),p-=s.TrabajadasHooy,p=p<0?0:p,c+=p,c=c<y?y:c,s.MostrarConsole.CuandoEiezaExtra&&(console.log("%cPRIMERO: CuandoEmpiezaExtra","color:red;font-family:system-ui;font-size:1rem;-webkit-text-stroke: 0.5px black;font-weight:bold"),console.log("CuandoEmpiezaExtra",c),console.log("extras?",c<h),console.log("ExtrasPrematuras",p),console.log("=>(Create.vue:358) props.HorasDeCadaSemana[props.HorasDeCadaSemana[0]]",t.HorasDeCadaSemana[t.HorasDeCadaSemana[0]]),console.log("data.TrabajadasSemana",s.TrabajadasSemana),console.log("data.TrabajadasHooy",s.TrabajadasHooy),console.log("TemporalDiaAnterior",s.TemporalDiaAnterior),console.log("%cFIN: CuandoEmpiezaExtra","color:blue;font-family:system-ui;font-size:15px;-webkit-text-stroke: 0.5px black;font-weight:bold")),c>=h)s.MostrarConsole.dia&&console.log(c,h),e.almuerzo="No",e.diurnas=Math.abs(U(e.fecha_ini,e.fecha_fin,c)[1]),e.nocturnas=Math.abs(z(e.fecha_ini,e.fecha_fin,c)[1]);else{e.almuerzo=e.horas_trabajadas+s.TemporalDiaAnterior>8?1:0,e.almuerzo=e.horas_trabajadas+s.TemporalDiaAnterior>16?2:e.almuerzo,I=e.almuerzo,e.almuerzo+=" horas",c>=24&&(c=24,d=!0);let A=U(e.fecha_ini,e.fecha_fin,c);e.extra_diurnas=A[0],e.diurnas=A[1];let Y=z(e.fecha_ini,e.fecha_fin,c);e.extra_nocturnas=Y[0],e.nocturnas=Y[1]}se(r,u,c,d),s.estado2359&&(e.extra_nocturnas>0?e.extra_nocturnas++:e.dominical_nocturnas>0?e.dominical_nocturnas++:e.dominical_extra_nocturnas>0?e.dominical_extra_nocturnas++:e.nocturnas++)}}function U(i,n,r){const u=new Date(i).getHours(),d=new Date(n).getHours(),p=new Date(i).getDate(),M=new Date(n).getDate();let y=u>=6?u:6;if(p===M){let h=0;const c=d>=21?21:d;let x=c-y;if(x=x<0?0:x,s.MostrarConsole.dia&&(console.log("BaseFinal",c),console.log("HorasDiurnas",x)),r!==null&&r<21){let A=r-y;A=A<0?0:A,s.MostrarConsole.dia&&(console.log("HorasDiurnas",x),console.log("horasNormales",A)),x>=A?(h=x-A,x=A):(console.log("HorasDiurnas",x),console.log("horasNormales",A))}return s.MostrarConsole.dia&&(console.log("HorasExtra & ordinarias, su suma",h,x,h+x),console.log("CuandoEmpiezaExtra",r)),[h,x]}else{let h=0,c=0;return d<=6?(h=y<=21?21-y:0,r!==null&&r<21&&r>6&&(y<=r,h=r-y,c=21-r)):(u<=21?h=21-u:r!==null?h=r-6:h=u==23?1:0,r!==null&&(r<=6?c=d>6?d-6:0:d>=r?c=d-r:(c=r<=21?21-r:0,c+=d>=6?d-6:0))),s.MostrarConsole.dia&&console.log("ğŸ§ˆğŸ§ˆğŸ§ˆ DIA HorasExtra & ordinarias",c,h),[c,h]}}function z(i,n,r){const u=new Date(i).getHours(),d=new Date(n).getHours(),p=new Date(i).getDate(),M=new Date(n).getDate();b=0,v=0,p===M?(u<6&&d<=6?b=d-u:u<6&&(b=6-u),u>=21&&d>=21?v=d-u:d>21&&(v=d-21,console.log("=>(Create.vue:512) Tarde",v))):(u<6&&d<=6&&u<d?b=d-u:(u<6&&(b=6-u),d<=6?b+=d:b+=6),u>=21&&d>=21?v=d-u:(d>21&&(v+=d-21),u>21?v+=24-u:v+=24-21));let y=b+v;s.MostrarConsole.noche&&(console.log("PRIMERO NOCHE ğŸš€"),console.log("Madrugada & tardeğŸš€",b,v+" = "+y),console.log("horasInicioğŸš€",u),console.log("horasFinğŸš€",d));let h=0,c=0;return r===null||typeof r>"u"||r>23?[0,y]:(r>=21?d>=21?(h=d>=r?d-r:0,c=y-h):(h=24-r,h+=b,c=y-h):r<=6?(c=b+v,h=b>=r?b-r:0,s.MostrarConsole.noche&&console.log("â€ğŸ˜¶â€ğŸŒ«ï¸1 : extra & noche",h,c)):d>21?(h=v,c=b,s.MostrarConsole.noche&&console.log("ğŸ˜¶â€ğŸŒ«ï¸2  extra  ordinarias",h,c)):p==M?(h=0,c=y,s.MostrarConsole.noche&&console.log("ğŸ˜¶â€ğŸŒ«ï¸1  extra  ordinarias",h,c)):(c=u<6?6-u:0,h=y-c,s.MostrarConsole.noche&&console.log("imposible ğŸ˜¶â€ğŸŒ«ï¸0  extra  ordinarias",h,c)),s.MostrarConsole.noche&&(console.log("extrağŸš€",h),console.log("ordinariasğŸš€",c)),[h,c])}he(()=>{if(t.show&&(s.diaSelected&&(s.HorasDelDiaAnterior59=t.ArrayOrdinarias[s.diaSelected],console.log("=>(Create.vue:664) data.diaSelected",s.diaSelected),console.log("=>(Create.vue:664) props.ArrayOrdinarias",t.ArrayOrdinarias)),e.errors={},Date.parse(e.fecha_ini)&&Date.parse(e.fecha_fin))){s.diaini=parseInt(new Date(e.fecha_ini).getDate()),s.TrabajadasHooy=t.horasTrabajadasHoy[s.diaini]??0,s.TrabajadasHooy=parseInt(s.TrabajadasHooy)??0;let n=Date.parse(e.fecha_ini),r=Date.parse(e.fecha_fin),u=ve(new Date(e.fecha_ini));if(s.TrabajadasSemana=t.HorasDeCadaSemana[u]>H?t.HorasDeCadaSemana[u]-H:0,s.TrabajadasSemana=s.TrabajadasSemana>_?_:s.TrabajadasSemana,s.MostrarTrabajadaSemConso&&console.log(s.TrabajadasSemana),e.horas_trabajadas=0,e.almuerzo=0,e.diurnas=0,e.nocturnas=0,e.extra_diurnas=0,e.extra_nocturnas=0,e.dominical_diurnas=0,e.dominical_nocturnas=0,e.dominical_extra_diurnas=0,e.dominical_extra_nocturnas=0,e.horas_trabajadas=parseInt((r-n)/(3600*1e3)),s.estado2359&&(e.horas_trabajadas++,e.nocturnas<8&&e.nocturnas>=0?e.nocturnas++:e.extra_nocturnas++),n>r)e.errors.horas_trabajadas="La fecha inicial no debe ser posterior a la final";else if(e.horas_trabajadas>=Z)e.errors.horas_trabajadas="Las horas trabajadas son demasiadas",e.horas_trabajadas="0",e.diurnas="0",e.nocturnas="0",e.almuerzo="0";else{const d=new Date(n).getDate(),p=new Date(r).getDate();d!==p?(e.errors.horas_trabajadas="Debe realizar dos reportes",e.horas_trabajadas="0",e.diurnas="0",e.nocturnas="0",e.almuerzo="0"):ie(n,r)}}}),C(()=>e.centro_costo_id,i=>{localStorage.setItem("centroCostoId",i)}),C(()=>e.diurnas,i=>{s.ordinariasCalculadas=i+e.nocturnas}),C(()=>e.nocturnas,i=>{s.ordinariasCalculadas=i+e.diurnas}),C(()=>e.fecha_ini,i=>{if(i){e.fecha_fin=i;let n=new Date(i.getTime());n.setDate(n.getDate()-1);let r=n.getFullYear(),u=n.getMonth()+1,d=n.getDate();s.diaSelected=r+"-"+u.toString().padStart(2,"0")+"-"+d.toString().padStart(2,"0")}}),C(()=>e.fecha_fin,i=>{let n=new Date(i);n.getHours()+":"+n.getMinutes()==="23:59"?(s.estado2359=!0,s.estado2359&&(e.horas_trabajadas++,e.nocturnas<8&&e.nocturnas>=0?e.nocturnas++:e.extra_nocturnas++)):s.estado2359&&(s.estado2359=!1)});const B=()=>{s.MensajeError="",s.respuestaSeguro=!0,e.horas_trabajadas<=Z&&e.horas_trabajadas!==0?Object.keys(e.errors).length===0?(t.numberPermissions<9&&(s.respuestaSeguro=confirm("Â¿EstÃ¡s seguro de enviar el formulario?")),s.respuestaSeguro&&(e.almuerzo=I,e.post(route("Reportes.store"),{preserveScroll:!0,onSuccess:()=>{$("close"),e.reset()},onError:()=>{alert(JSON.stringify(e.errors,null,4))},onFinish:()=>{location.reload()}}))):s.MensajeError="Verifique de nuevo":s.MensajeError="Horas invalidas"},K=["Lun","Mar","Mie","Jue","Vie","Sab","Dom"];return(i,n)=>(S(),D("section",qe,[m(_e,{show:t.show,onClose:n[15]||(n[15]=r=>$("close")),maxWidth:"4xl"},{default:R(()=>[f("form",{onSubmit:ge(B,["prevent"]),class:"p-6 mb-12"},[f("div",Je,[f("h2",Xe,[f("b",null,V(t.title),1)]),f("h2",Qe," Horas semana: "+V(t==null?void 0:t.horasemana),1),f("h2",We,V(t==null?void 0:t.startDateMostrar)+" - "+V(t==null?void 0:t.endDateMostrar),1)]),f("div",Ge,[f("div",null,[m(O,{for:"fecha_ini",value:i.lang().label.fecha_ini},null,8,["value"]),m(l(q),{"start-time":s.startTime,"is-24":!1,"day-names":K,"auto-apply":"","enable-time-picker":!0,id:"fecha_ini",type:"date",class:"mt-1 block w-full",modelValue:l(e).fecha_ini,"onUpdate:modelValue":n[0]||(n[0]=r=>l(e).fecha_ini=r),required:"",placeholder:i.lang().placeholder.fecha_ini,error:l(e).errors.fecha_ini},null,8,["start-time","modelValue","placeholder","error"]),m(N,{class:"mt-2",message:l(e).errors.fecha_ini},null,8,["message"])]),f("div",null,[m(O,{for:"fecha_fin",value:i.lang().label.fecha_fin},null,8,["value"]),m(l(q),{"is-24":!1,"day-names":K,"auto-apply":"",flow:["calendar","time"],"enable-time-picker":!0,teleport:!0,id:"fecha_fin",type:"date",class:"mt-1 block w-full",modelValue:l(e).fecha_fin,"onUpdate:modelValue":n[1]||(n[1]=r=>l(e).fecha_fin=r),required:"",placeholder:i.lang().placeholder.fecha_fin,error:l(e).errors.fecha_fin},null,8,["modelValue","placeholder","error"]),m(N,{class:"mt-2",message:l(e).errors.fecha_fin},null,8,["message"])]),f("div",null,[m(O,{for:"horas_trabajadas",value:i.lang().label.horas_trabajadas},null,8,["value"]),m(T,{id:"horas_trabajadas",type:"number",class:"bg-gray-100 dark:bg-gray-700 mt-1 block w-full",modelValue:l(e).horas_trabajadas,"onUpdate:modelValue":n[2]||(n[2]=r=>l(e).horas_trabajadas=r),disabled:"",placeholder:i.lang().placeholder.horas_trabajadas,error:l(e).errors.horas_trabajadas},null,8,["modelValue","placeholder","error"]),m(N,{class:"bg-gray-100 dark:bg-gray-700 mt-2",message:l(e).errors.horas_trabajadas},null,8,["message"])]),f("div",null,[m(O,{for:"almuerzo",value:i.lang().label.horacomida+" (+9 horas)"},null,8,["value"]),m(T,{id:"almuerzo",type:"text",class:"bg-gray-100 dark:bg-gray-700 mt-1 w-full",modelValue:l(e).almuerzo,"onUpdate:modelValue":n[3]||(n[3]=r=>l(e).almuerzo=r),disabled:"",placeholder:i.lang().placeholder.almuerzo,error:l(e).errors.almuerzo},null,8,["modelValue","placeholder","error"])]),f("div",Ze,[f("div",null,[m(O,{ref_key:"label_diurnas",ref:g,for:"diurnas",value:i.lang().label.diurnas},null,8,["value"]),m(T,{id:"diurnas",type:"number",class:"bg-gray-100 dark:bg-gray-700 mt-1 w-full",modelValue:l(e).diurnas,"onUpdate:modelValue":n[4]||(n[4]=r=>l(e).diurnas=r),disabled:"",placeholder:i.lang().placeholder.diurnas,error:l(e).errors.diurnas},null,8,["modelValue","placeholder","error"])]),f("div",null,[m(O,{ref:"label_nocturnas",for:"nocturnas",value:i.lang().label.nocturnas},null,8,["value"]),m(T,{id:"nocturnas",type:"number",class:"bg-gray-100 dark:bg-gray-700 mt-1 w-full",modelValue:l(e).nocturnas,"onUpdate:modelValue":n[5]||(n[5]=r=>l(e).nocturnas=r),disabled:"",placeholder:i.lang().placeholder.nocturnas,error:l(e).errors.nocturnas},null,8,["modelValue","placeholder","error"])])]),l(e).extra_diurnas||l(e).extra_nocturnas||l(e).dominicales=="si"?(S(),D("div",ea,[f("div",null,[m(O,{ref:"label_extra_diurnas",for:"extra_diurnas",value:i.lang().label.extra_diurnas},null,8,["value"]),m(T,{id:"extra_diurnas",type:"number",class:"bg-gray-100 dark:bg-gray-700 mt-1 w-full",modelValue:l(e).extra_diurnas,"onUpdate:modelValue":n[6]||(n[6]=r=>l(e).extra_diurnas=r),disabled:"",placeholder:i.lang().placeholder.extra_diurnas,error:l(e).errors.extra_diurnas},null,8,["modelValue","placeholder","error"])]),f("div",null,[m(O,{ref:"label_extra_nocturnas",for:"extra_nocturnas",value:i.lang().label.extra_nocturnas},null,8,["value"]),m(T,{id:"extra_nocturnas",type:"number",class:"bg-gray-100 dark:bg-gray-700 mt-1 w-full",modelValue:l(e).extra_nocturnas,"onUpdate:modelValue":n[7]||(n[7]=r=>l(e).extra_nocturnas=r),disabled:"",placeholder:i.lang().placeholder.extra_nocturnas,error:l(e).errors.extra_nocturnas},null,8,["modelValue","placeholder","error"])])])):w("",!0),l(e).dominicales=="si"?(S(),D("div",aa,[f("div",null,[m(O,{ref_key:"label_diurnas",ref:g,for:"dominical_diurnas",value:i.lang().label.dominical_diurnas},null,8,["value"]),m(T,{id:"dominical_diurnas",type:"number",class:"bg-gray-100 dark:bg-gray-700 mt-1 w-full",modelValue:l(e).dominical_diurnas,"onUpdate:modelValue":n[8]||(n[8]=r=>l(e).dominical_diurnas=r),disabled:"",placeholder:i.lang().placeholder.dominical_diurnas,error:l(e).errors.dominical_diurnas},null,8,["modelValue","placeholder","error"])]),f("div",null,[m(O,{ref:"label_nocturnas",for:"dominical_nocturnas",value:i.lang().label.dominical_nocturnas},null,8,["value"]),m(T,{id:"dominical_nocturnas",type:"number",class:"bg-gray-100 dark:bg-gray-700 mt-1 w-full",modelValue:l(e).dominical_nocturnas,"onUpdate:modelValue":n[9]||(n[9]=r=>l(e).dominical_nocturnas=r),disabled:"",placeholder:i.lang().placeholder.dominical_nocturnas,error:l(e).errors.dominical_nocturnas},null,8,["modelValue","placeholder","error"])])])):w("",!0),l(e).dominicales=="si"?(S(),D("div",ta,[f("div",null,[m(O,{ref:"label_extra_diurnas",for:"dominical_extra_diurnas",value:i.lang().label.dominical_extra_diurnas},null,8,["value"]),m(T,{id:"dominical_extra_diurnas",type:"number",class:"bg-gray-100 dark:bg-gray-700 mt-1 w-full",modelValue:l(e).dominical_extra_diurnas,"onUpdate:modelValue":n[10]||(n[10]=r=>l(e).dominical_extra_diurnas=r),disabled:"",placeholder:i.lang().placeholder.dominical_extra_diurnas,error:l(e).errors.dominical_extra_diurnas},null,8,["modelValue","placeholder","error"])]),f("div",null,[m(O,{ref:"label_extra_nocturnas",for:"dominical_extra_nocturnas",value:i.lang().label.dominical_extra_nocturnas},null,8,["value"]),m(T,{id:"dominical_extra_nocturnas",type:"number",class:"bg-gray-100 dark:bg-gray-700 mt-1 w-full",modelValue:l(e).dominical_extra_nocturnas,"onUpdate:modelValue":n[11]||(n[11]=r=>l(e).dominical_extra_nocturnas=r),disabled:"",placeholder:i.lang().placeholder.dominical_extra_nocturnas,error:l(e).errors.dominical_extra_nocturnas},null,8,["modelValue","placeholder","error"])])])):w("",!0),f("div",ra,[m(O,{for:"centro_costo_id",value:i.lang().label.centro_costo_id},null,8,["value"]),m(Se,{modelValue:l(e).centro_costo_id,"onUpdate:modelValue":n[12]||(n[12]=r=>l(e).centro_costo_id=r),dataSet:t.valoresSelect,class:"mt-1 block w-full"},null,8,["modelValue","dataSet"]),m(N,{class:"mt-2",message:l(e).errors.centro_costo_id},null,8,["message"])]),l(e).dominicales==="si"?(S(),D("div",oa,[sa,m(T,{id:"dominicales",type:"text",class:"bg-gray-100 dark:bg-gray-700 block w-full",modelValue:l(j),"onUpdate:modelValue":n[13]||(n[13]=r=>me(j)?j.value=r:j=r),disabled:""},null,8,["modelValue"])])):w("",!0)]),f("div",na,[m(be,{disabled:l(e).processing,onClick:n[14]||(n[14]=r=>$("close"))},{default:R(()=>[L(V(i.lang().button.close),1)]),_:1},8,["disabled"]),m(ye,{class:pe(["ml-3",{"opacity-25":l(e).processing}]),disabled:l(e).processing,onMouseup:B,onKeyup:fe(B,["enter"])},{default:R(()=>[L(V(l(e).processing?i.lang().button.add+"...":i.lang().button.add),1)]),_:1},8,["class","disabled"])]),f("div",ia,[t.ArrayOrdinarias[t.ArrayOrdinarias.length]>8?(S(),D("p",la,"Hay pendientes "+V(t.ArrayOrdinarias[t.ArrayOrdinarias.length])+" horas (11:59pm)",1)):w("",!0),t.ArrayOrdinarias[0]>s.const.HORAS_SEMANALES_MENOS_ESTANDAR&&l(e).diurnas+l(e).nocturnas>8?(S(),D("p",da,"Horas extra de la semana")):w("",!0),s.HorasDelDiaAnterior59?(S(),D("p",ua,"Dia anterior (11:59 p.m.)")):w("",!0),s.MensajeError!==""?(S(),D("p",ca,V(s.MensajeError),1)):w("",!0),s.TrabajadasSemana?(S(),D("p",ha,[a.numberPermissions>8?(S(),D("small",ma,V(s.TrabajadasSemana-1),1)):w("",!0),L(" | Se completÃ³ las horas de la semana ")])):w("",!0),s.TrabajadasHooy?(S(),D("p",pa,[a.numberPermissions>8?(S(),D("small",fa,V(s.TrabajadasHooy),1)):w("",!0),L(" | Ya hay un reporte hoy ")])):w("",!0),s.TemporalDiaAnterior?(S(),D("p",ga,[a.numberPermissions>8?(S(),D("small",_a,V(s.TemporalDiaAnterior),1)):w("",!0)])):w("",!0)])],32)]),_:1},8,["show"])]))}};export{Ta as default};
