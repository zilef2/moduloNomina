import{o as a,f as l,r as X,l as z,J as H,m as J,O as G,v as K,a as c,u as m,w as g,F as x,p as Q,X as W,b as e,c as _,d as Y,t as d,g as u,q as h,s as f,B as N,x as v,y as Z,e as ee,n as se}from"./app-a4b1e5fd.js";import{_ as te}from"./AuthenticatedLayout-54b418e1.js";import{_ as re}from"./Breadcrumb-b8d7b821.js";import{_ as oe}from"./TextInput-48e89789.js";import{_ as ae}from"./PrimaryButton-aa9a6133.js";import{_ as V}from"./SelectInput-d42bf996.js";import{_ as I}from"./DangerButton-6975d935.js";import{_ as ne}from"./Pagination-cad07cb9.js";import{T as U,C as le,P as ie,a as j,X as de}from"./index-820fe086.js";import{_ as ce}from"./Checkbox-182012b5.js";import{_ as pe}from"./InfoButton-6bce7f59.js";import me from"./Create-ee1d3a74.js";import ue from"./Edit-6c5a4663.js";import he from"./Delete-78a0faca.js";import{f as P,n as R}from"./global-0469810b.js";import{C as _e,p as fe,a as ye,b as be,B as we,c as ge,L as xe,d as ve}from"./index-18079d11.js";import{_ as ke}from"./InputError-a4ccc10f.js";import{_ as Se}from"./InputLabel-bd12e9ee.js";import"./SecondaryButton-3b1d7e86.js";import"./main-c4a3bbcd.js";import"./app-57141eb6.js";const Ce=["type"],Oe={__name:"SuccessButton",props:{type:{type:String,default:"submit"}},setup(p){return(s,k)=>(a(),l("button",{type:p.type,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 active:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150"},[X(s.$slots,"default")],8,Ce))}},$e={class:"space-y-4"},De={class:"px-4 sm:px-0"},Ne={class:"rounded-lg overflow-hidden w-fit"},Ve={class:"mt-4 inline-flex"},Ie={key:1,class:"mx-4"},Ue={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},je={class:"flex justify-between p-2"},Pe={class:"flex space-x-2"},Re={key:0,class:"flex"},Be=e("label",{for:"soloval",class:"mx-3"},"Solo validos",-1),Fe={class:"overflow-x-auto scrollbar-table"},Te={class:"w-full"},Me={class:"uppercase text-sm border-t border-gray-200 dark:border-gray-700"},Ee={class:"dark:bg-gray-900 text-left"},Ae={class:"px-2 py-4 text-center"},qe=["onClick"],Le={class:"flex justify-between items-center"},Xe={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},ze=["value"],He={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Je={class:"flex justify-start items-center"},Ge={class:"flex rounded-md overflow-hidden"},Ke=["onSubmit"],Qe={class:"whitespace-nowrap py-4 px-2 sm:py-3"},We={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ye={key:0},Ze={key:1},es={key:2},ss={key:3},ts={key:0},rs={key:1},os={key:2},as={key:4},ns={key:5},ls={class:"my-2 py-4 border-t border-gray-200 dark:border-gray-900 hover:bg-sky-200 hover:dark:bg-gray-900/20"},is=e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),ds={class:"whitespace-nowrap py-4 px-2 sm:py-3"},cs=e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"}," Totales ",-1),ps=e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),ms={key:0,class:"whitespace-nowrap py-4 px-2 sm:py-3"},us=e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),hs=e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),_s=e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),fs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},ys={class:"whitespace-nowrap py-4 px-2 sm:py-3"},bs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},ws={class:"whitespace-nowrap py-4 px-2 sm:py-3"},gs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},xs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},vs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},ks={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ss={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Cs=e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),Os=e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),$s={class:"flex justify-betwween items-center p-2 border-t border-gray-200 dark:border-gray-700"},Ds={key:0,class:"text-gray-600 body-font overflow-hidden"},Ns={class:"container px-5 py-4 mx-auto"},Vs={class:"flex flex-wrap m-2"},Is={class:"p-1 md:w-1/2 flex flex-col items-start"},Us=e("span",{class:"inline-block py-1 px-2 rounded bg-indigo-50 text-indigo-500 text-xs font-medium tracking-widest"}," Este mes",-1),js={class:"sm:text-3xl text-2xl title-font font-medium text-gray-900 mt-4 mb-4"},Ps={class:"m-1 p-1 w-full"},tt={__name:"Index",props:{title:String,filters:Object,fromController:Object,breadcrumbs:Object,perPage:Number,nombresTabla:Array,valoresSelect:Object,showSelect:Object,showUsers:Object,userFiltro:Object,IntegerDefectoSelect:Number,horasemana:Number,startDateMostrar:String,endDateMostrar:String,sumhoras_trabajadas:Number,quincena:Object,nombrePersona:String,numberPermissions:Number,ultimoReporte:Number,sumdiurnas:Number,sumnocturnas:Number,sumextra_diurnas:Number,sumextra_nocturnas:Number,sumdominical_diurno:Number,sumdominical_nocturno:Number,sumdominical_extra_diurno:Number,sumdominical_extra_nocturno:Number},setup(p){var C,O,$,D;const s=p;_e.register(fe,ye,be,we,ge,xe);const{_:k,debounce:B,pickBy:F}=Q;typeof s.ultimoReporte<"u";const T={responsive:!0,maintainAspectRatio:!1,color:"#000",darkcolor:"#fff"},M={name:"Numero de reportes",datasets:[{label:"Numero de Reportes",data:s.quincena,backgroundColor:"#f87979"}]},t=z({params:{soloValidos:(C=s.filters)==null?void 0:C.soloValidos,search:(O=s.filters)==null?void 0:O.search,field:($=s.filters)==null?void 0:$.field,order:(D=s.filters)==null?void 0:D.order,perPage:s.perPage,FiltroUser:s.FiltroUser},selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,editCorregirOpen:!1,deleteOpen:!1,deleteBulkOpen:!1,generico:null,nope:null,dataSet:H().props.app.perpage}),E=r=>{r!=null&&s.userFiltro?(r=r.substr(2),t.params.field=r.replace(/ /g,"_"),t.params.order=t.params.order==="asc"?"desc":"asc"):alert("No esta permitido organizar la tabla en esta vista")};J(()=>k.cloneDeep(t.params),B(()=>{let r=F(t.params);G.get(route("Reportes.index"),r,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const A=r=>{var n;r.target.checked===!1?t.selectedId=[]:(n=s.fromController)==null||n.data.forEach(b=>{t.selectedId.push(b.id)})},q=()=>{var r;((r=s.fromController)==null?void 0:r.data.length)==t.selectedId.length?t.multipleSelect=!0:t.multipleSelect=!1},y=K({valido:!1}),S=r=>{var n;y.valido=r,y.put(route("Reportes.update",(n=t.generico)==null?void 0:n.id),{preserveScroll:!0,onSuccess:()=>{y.reset()},onError:()=>null,onFinish:()=>null})};return(r,n)=>{const b=Z("tooltip");return a(),l(x,null,[c(m(W),{title:s.title},null,8,["title"]),c(te,null,{default:g(()=>[c(re,{title:p.title,breadcrumbs:p.breadcrumbs},null,8,["title","breadcrumbs"]),e("div",$e,[e("div",De,[e("div",Ne,[e("div",Ve,[r.can(["create reporte"])?(a(),_(ae,{key:0,class:"rounded-md mx-2",onClick:n[0]||(n[0]=o=>t.createOpen=!0)},{default:g(()=>[Y(d(r.lang().button.add),1)]),_:1})):u("",!0),r.can(["update reporte"])&&s.userFiltro?(a(),l("div",Ie,[c(Se,{for:"centro_costo_id",value:"Filtrar"}),c(V,{modelValue:t.params.FiltroUser,"onUpdate:modelValue":n[1]||(n[1]=o=>t.params.FiltroUser=o),dataSet:s.userFiltro,class:"mt-1 block w-full"},null,8,["modelValue","dataSet"]),c(ke,{class:"mt-2",message:m(y).errors.centro_costo_id},null,8,["message"])])):u("",!0)]),c(me,{show:t.createOpen,onClose:n[2]||(n[2]=o=>t.createOpen=!1),title:s.title,valoresSelect:s.valoresSelect,IntegerDefectoSelect:s.IntegerDefectoSelect,horasemana:s.horasemana,startDateMostrar:s.startDateMostrar,endDateMostrar:s.endDateMostrar,numberPermissions:s.numberPermissions,ultimoReporte:s.ultimoReporte},null,8,["show","title","valoresSelect","IntegerDefectoSelect","horasemana","startDateMostrar","endDateMostrar","numberPermissions","ultimoReporte"]),c(ue,{show:t.editOpen,onClose:n[3]||(n[3]=o=>t.editOpen=!1),Reporte:t.generico,title:s.title,valoresSelect:s.valoresSelect,showUsers:s.showUsers,correccionUsuario:!1},null,8,["show","Reporte","title","valoresSelect","showUsers"]),h(c(he,{show:t.deleteOpen,onClose:n[4]||(n[4]=o=>t.deleteOpen=!1),Reporte:t.generico,title:s.title},null,8,["show","Reporte","title"]),[[f,r.can(["delete reporte"])]])])]),e("div",Ue,[e("div",je,[e("div",Pe,[p.filters!==null?(a(),_(V,{key:0,modelValue:t.params.perPage,"onUpdate:modelValue":n[5]||(n[5]=o=>t.params.perPage=o),dataSet:t.dataSet},null,8,["modelValue","dataSet"])):u("",!0),h((a(),_(I,{onClick:n[6]||(n[6]=o=>t.deleteBulkOpen=!0),class:"px-3 py-1.5"},{default:g(()=>[c(m(U),{class:"w-5 h-5"})]),_:1})),[[f,t.selectedId.length!=0&&r.can(["delete reporte"])],[b,r.lang().tooltip.delete_selected]])]),p.filters!==null?(a(),l("div",Re,[p.filters!==null?h((a(),_(oe,{key:0,modelValue:t.params.search,"onUpdate:modelValue":n[7]||(n[7]=o=>t.params.search=o),type:"text",class:"block w-full rounded-lg",placeholder:r.lang().placeholder.searchDates},null,8,["modelValue","placeholder"])),[[f,r.can(["update reporte"])]]):u("",!0),Be,h(e("input",{"onUpdate:modelValue":n[8]||(n[8]=o=>t.params.soloValidos=o),id:"soloval",type:"checkbox",class:"bg-black h-7 w-7"},null,512),[[N,t.params.soloValidos]])])):u("",!0)]),e("div",Fe,[e("table",Te,[e("thead",Me,[e("tr",Ee,[e("th",Ae,[c(ce,{checked:t.multipleSelect,"onUpdate:checked":n[9]||(n[9]=o=>t.multipleSelect=o),onChange:A},null,8,["checked"])]),(a(!0),l(x,null,v(p.nombresTabla[0],(o,w)=>(a(),l("th",{key:w,onClick:i=>E(p.nombresTabla[2][w]),class:"px-2 py-4 cursor-pointer hover:bg-sky-50 dark:hover:bg-sky-800"},[e("div",Le,[e("span",null,d(o),1),p.nombresTabla[2][w]!==null?(a(),_(m(le),{key:0,class:"w-4 h-4"})):u("",!0)])],8,qe))),128))])]),e("tbody",null,[(a(!0),l(x,null,v(p.fromController.data,(o,w)=>(a(),l("tr",{key:w,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[e("td",Xe,[h(e("input",{type:"checkbox",onChange:q,value:o.id,"onUpdate:modelValue":n[10]||(n[10]=i=>t.selectedId=i),class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary"},null,40,ze),[[N,t.selectedId]])]),e("td",He,[e("div",Je,[e("div",Ge,[e("form",{onSubmit:ee(S,["prevent"])},[r.can(["update reporte"])?h((a(),_(pe,{key:0,type:"button",onClick:i=>(t.editOpen=!0,t.generico=o),class:"px-2 py-1.5 rounded-sm"},{default:g(()=>[c(m(ie),{class:"w-6 h-6"})]),_:2},1032,["onClick"])),[[b,r.lang().tooltip.edit]]):u("",!0),r.can(["update reporte"])?h((a(),_(Oe,{key:1,type:"button",class:se(["mx-1 w-12 h-10",{"opacity-25":m(y).processing}]),disabled:m(y).processing,onClick:i=>(t.generico=o,S(!0))},{default:g(()=>[c(m(j),{class:"w-6 h-6"})]),_:2},1032,["class","disabled","onClick"])),[[b,"Aprobar"]]):u("",!0)],40,Ke),r.can(["delete reporte"])?h((a(),_(I,{key:0,type:"button",onClick:i=>(t.deleteOpen=!0,t.generico=o),class:"px-2 py-1.5 rounded-sm"},{default:g(()=>[c(m(U),{class:"w-6 h-6"})]),_:2},1032,["onClick"])),[[b,r.lang().tooltip.delete]]):u("",!0)])])]),e("td",Qe,d(w+1),1),e("td",We,d(p.showSelect[o.centro_costo_id]),1),h(e("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},d(p.showUsers[o.user_id]),513),[[f,r.can(["updateCorregido reporte"])]]),(a(!0),l(x,null,v(p.nombresTabla[1],(i,L)=>(a(),l("td",{key:L,class:"whitespace-nowrap py-4 px-2 sm:py-3"},[i.substr(0,1)==="s"?(a(),l("div",Ye,d(o[i.substr(2)]),1)):i.substr(0,1)==="d"?(a(),l("div",Ze,d(m(P)(o[i.substr(2)])),1)):i.substr(0,1)==="t"?(a(),l("div",es,d(m(P)(o[i.substr(2)],"conLaHora")),1)):i.substr(0,1)==="b"?(a(),l("div",ss,[o[i.substr(2)]===0?(a(),l("div",ts," Aun no validada")):o[i.substr(2)]===1?(a(),l("div",rs,[c(m(j),{class:"w-8 h-8 text-green-600"})])):o[i.substr(2)]===2?(a(),l("div",os,[c(m(de),{class:"w-8 h-8 text-red-600"})])):u("",!0)])):i.substr(0,1)=="i"?(a(),l("div",as,d(m(R)(o[i.substr(2)])),1)):i.substr(0,1)=="m"?(a(),l("div",ns,d(m(R)(o[i.substr(2)],0,1)),1)):u("",!0)]))),128))]))),128)),h(e("tr",ls,[is,h(e("td",ds,null,512),[[f,r.can(["updateCorregido reporte"])]]),cs,ps,p.numberPermissions>1?(a(),l("td",ms)):u("",!0),us,hs,_s,e("td",fs," Trabajadas: "+d(s.sumhoras_trabajadas),1),e("td",ys,d(s.sumdiurnas?"Diurnas: "+s.sumdiurnas:""),1),e("td",bs,d(s.sumnocturnas?"Nocturnas: "+s.sumnocturnas:""),1),e("td",ws,d(s.sumextra_diurnas?"Extra diurnas: "+s.sumextra_diurnas:""),1),e("td",gs,d(s.sumextra_nocturnas?"Extra nocturnas: "+s.sumextra_nocturnas:""),1),e("td",xs,d(s.sumdominical_diurno?"Dominical diurno: "+s.sumdominical_diurno:""),1),e("td",vs,d(s.sumdominical_nocturno?"Dominical nocturno: "+s.sumdominical_nocturno:""),1),e("td",ks,d(s.sumdominical_extra_diurno?"Dominical extra diurno: "+s.sumdominical_extra_diurno:""),1),e("td",Ss,d(s.sumdominical_extra_nocturno?"Dominical extra nocturno: "+s.sumdominical_extra_nocturno:""),1),Cs,Os],512),[[f,s.sumhoras_trabajadas!=0]])])])]),e("div",$s,[c(ne,{links:s.fromController,filters:t.params},null,8,["links","filters"])])]),s.quincena!=null?h((a(),l("section",Ds,[e("div",Ns,[e("div",Vs,[e("div",Is,[Us,e("h2",js,"Numero de reportes de "+d(s.nombrePersona),1),e("div",Ps,[c(m(ve),{id:"my-chart-id",options:T,data:M})])])])])],512)),[[f,r.can(["updateCorregido reporte"])||r.can(["isAdmin"])||r.can(["isadministrativo"])]]):u("",!0)])]),_:1})],64)}}};export{tt as default};
