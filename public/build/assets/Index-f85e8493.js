import{l as P,J as D,m as U,O as T,f as v,a as l,u as i,w as p,F as C,p as A,o as u,X as L,g as F,b as e,q as d,s as c,d as y,t as n,h as w,B as S,c as h,x as M,y as R}from"./app-a4b1e5fd.js";import{_ as q}from"./AuthenticatedLayout-54b418e1.js";import{_ as H}from"./Breadcrumb-b8d7b821.js";import{_ as J}from"./TextInput-48e89789.js";import{_ as k}from"./PrimaryButton-aa9a6133.js";import{_ as $}from"./InfoButton-6bce7f59.js";import{_ as X}from"./SelectInput-d42bf996.js";import{_ as O}from"./DangerButton-6975d935.js";import{_ as z}from"./Pagination-cad07cb9.js";import{S as G,T as I,C as f,E as K,P as Q,L as W}from"./index-820fe086.js";import{n as Y}from"./global-0469810b.js";import Z from"./Create-5d14215e.js";import ee from"./Edit-3b4ab443.js";import se from"./EdiCentro-0d9d0282.js";import te from"./Delete-7fc7394f.js";import re from"./DeleteBulk-f69b6b57.js";import{_ as oe}from"./Checkbox-182012b5.js";import"./InputError-a4ccc10f.js";import"./InputLabel-bd12e9ee.js";import"./SecondaryButton-3b1d7e86.js";const le={key:0,class:"text-lg mt-2 mb-5 text-red-600"},ae={class:"space-y-4"},ne={class:"px-4 sm:px-0"},ie={class:"rounded-lg overflow-hidden w-fit gap-8"},de={class:"rounded-lg overflow-hidden w-fit gap-8 my-2"},pe={class:"mx-4 pt-1 pb-3 inline-flex"},ce=e("label",{for:"onlySupervis",class:"mx-2"},"Mostrar solo supervisores",-1),ue={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},me={class:"flex justify-between p-2"},fe={class:"flex space-x-2"},ge={class:"overflow-x-auto scrollbar-table"},ye={class:"w-full"},he={class:"uppercase text-sm border-t border-gray-200 dark:border-gray-700"},be={class:"dark:bg-gray-900/50 text-left"},_e={class:"px-2 py-4 text-center"},ve=e("th",{class:"px-2 py-4 text-center"},"#",-1),we={class:"flex justify-between items-center"},ke={class:"flex justify-between items-center"},xe=e("span",null," Identificacion ",-1),Ce={class:"flex justify-between items-center"},Se={class:"px-2 py-4"},$e={class:"flex justify-between items-center"},Oe={class:"flex justify-between items-center"},Ie={class:"flex justify-between items-center"},je={class:"flex justify-between items-center"},Ne={class:"flex justify-between items-center"},Ve={class:"px-2 py-4 cursor-not-allowed"},Be={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},Ee=["value"],Pe={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},De={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ue={class:"flex justify-start items-center"},Te={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ae={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Le={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Fe={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Me={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Re={class:"whitespace-nowrap py-4 px-2 sm:py-3"},qe={class:"whitespace-nowrap py-4 px-2 sm:py-3"},He={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Je={class:"whitespace-nowrap p-4 sm:p-3"},Xe={class:"flex justify-center"},ze={class:"rounded-md overflow-hidden"},Ge={class:"flex justify-between items-center p-2 border-t border-gray-200 dark:border-gray-700"},gs={__name:"Index",props:{title:String,filters:Object,users:Object,roles:Object,cargos:Object,centros:Object,breadcrumbs:Object,perPage:Number,sexoSelect:Object,onlySupervis:Number,superviNullCentro:Number},setup(b){const a=b,{_:j,debounce:N,pickBy:V}=A,s=P({params:{search:a.filters.search,field:a.filters.field,order:a.filters.order,perPage:a.perPage,onlySupervis:a.onlySupervis},selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,EdiCentroOpen:!1,deleteOpen:!1,deleteBulkOpen:!1,user:null,dataSet:D().props.app.perpage}),m=o=>{s.params.field=o,s.params.order=s.params.order==="asc"?"desc":"asc",console.log(s.params.order),console.log(s.params.field)};U(()=>j.cloneDeep(s.params),N(()=>{let o=V(s.params);console.log("ðŸ§ˆ debu params:",o),T.get(route("user.index"),o,{replace:!0,preserveState:!0,preserveScroll:!0})},15));const B=o=>{var t;o.target.checked===!1?s.selectedId=[]:(t=a.users)==null||t.data.forEach(g=>{s.selectedId.push(g.id)})},E=()=>{var o;((o=a.users)==null?void 0:o.data.length)==s.selectedId.length?s.multipleSelect=!0:s.multipleSelect=!1};return s.params.onlySupervis=s.params.onlySupervis===null?!1:s.params.onlySupervis,(o,t)=>{const g=R("tooltip");return u(),v(C,null,[l(i(L),{title:a.title},null,8,["title"]),l(q,null,{default:p(()=>[l(H,{title:b.title,breadcrumbs:b.breadcrumbs},null,8,["title","breadcrumbs"]),a.superviNullCentro?F("",!0):(u(),v("p",le," Hay supervisores sin centro")),e("div",ae,[e("div",ne,[e("div",ie,[d(l(k,{class:"rounded-md mx-2",onClick:t[0]||(t[0]=r=>s.createOpen=!0)},{default:p(()=>[y(n(o.lang().button.add),1)]),_:1},512),[[c,o.can(["create user"])]]),d(l(i(w),{href:o.route("IndexTrashed"),class:"mx-1 bg-gray-700/40 dark:bg-gray-800/40 text-white rounded-lg hover:bg-primary dark:hover:bg-primary"},{default:p(()=>[d(l(k,{class:"flex items-center px-4"},{default:p(()=>[y(" Desvinculados ")]),_:1},512),[[c,o.can(["create user"])]])]),_:1},8,["href"]),[[c,o.can(["update user"])]]),d(l(i(w),{href:o.route("user.uploadexcel"),class:"bg-gray-700/40 dark:bg-gray-800/40 text-white rounded-lg hover:bg-primary dark:hover:bg-primary"},{default:p(()=>[d(l(k,{class:"flex items-center px-4"},{default:p(()=>[y(" Exportar e Importar "),l(i(G),{class:"w-3 h-3 ml-2 mb-1"})]),_:1},512),[[c,o.can(["update user"])&&a.superviNullCentro]])]),_:1},8,["href"]),[[c,o.can(["update user"])]]),l(Z,{show:s.createOpen,onClose:t[1]||(t[1]=r=>s.createOpen=!1),roles:a.roles,cargos:a.cargos,centros:a.centros,sexoSelect:a.sexoSelect,title:a.title},null,8,["show","roles","cargos","centros","sexoSelect","title"]),l(ee,{show:s.editOpen,onClose:t[2]||(t[2]=r=>s.editOpen=!1),user:s.user,roles:a.roles,cargos:a.cargos,centros:a.centros,sexoSelect:a.sexoSelect,title:a.title},null,8,["show","user","roles","cargos","centros","sexoSelect","title"]),l(se,{show:s.EdiCentroOpen,onClose:t[3]||(t[3]=r=>s.EdiCentroOpen=!1),user:s.user,centros:a.centros,title:a.title},null,8,["show","user","centros","title"]),l(te,{show:s.deleteOpen,onClose:t[4]||(t[4]=r=>s.deleteOpen=!1),user:s.user,title:a.title},null,8,["show","user","title"]),l(re,{show:s.deleteBulkOpen,onClose:t[5]||(t[5]=r=>(s.deleteBulkOpen=!1,s.multipleSelect=!1,s.selectedId=[])),selectedId:s.selectedId,title:a.title},null,8,["show","selectedId","title"])]),e("div",de,[e("div",pe,[y("â€Ž "),d(e("input",{id:"onlySupervis",type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=r=>s.params.onlySupervis=r),class:"inline-flex items-center p-3 border-2 border-sky-500 rounded-md font-semibold hover:bg-primary/80 dark:hover:bg-primary/90 focus:bg-primary/80 dark:focus:bg-primary/80 active:bg-primary dark:active:bg-primary/80 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-primary transition ease-in-out duration-150 disabled:bg-primary/80"},null,512),[[S,s.params.onlySupervis]]),ce])])]),e("div",ue,[e("div",me,[e("div",fe,[l(X,{modelValue:s.params.perPage,"onUpdate:modelValue":t[7]||(t[7]=r=>s.params.perPage=r),dataSet:s.dataSet},null,8,["modelValue","dataSet"]),d((u(),h(O,{onClick:t[8]||(t[8]=r=>s.deleteBulkOpen=!0),class:"px-3 py-1.5"},{default:p(()=>[l(i(I),{class:"w-5 h-5"})]),_:1})),[[c,s.selectedId.length!=0&&o.can(["delete user"])],[g,o.lang().tooltip.delete_selected]])]),l(J,{modelValue:s.params.search,"onUpdate:modelValue":t[9]||(t[9]=r=>s.params.search=r),type:"text",class:"block w-3/6 md:w-2/6 lg:w-1/6 rounded-lg",placeholder:"Buscar por nombre o correo"},null,8,["modelValue"])]),e("div",ge,[e("table",ye,[e("thead",he,[e("tr",be,[e("th",_e,[l(oe,{checked:s.multipleSelect,"onUpdate:checked":t[10]||(t[10]=r=>s.multipleSelect=r),onChange:B},null,8,["checked"])]),ve,e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[11]||(t[11]=r=>m("name"))},[e("div",we,[e("span",null,n(o.lang().label.name),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[12]||(t[12]=r=>m("cedula"))},[e("div",ke,[xe,l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[13]||(t[13]=r=>m("cargo_id"))},[e("div",Ce,[e("span",null,n(o.lang().label.cargo),1),l(i(f),{class:"w-4 h-4"})])]),e("th",Se,n(o.lang().label.role),1),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[14]||(t[14]=r=>m("celular"))},[e("div",$e,[e("span",null,n(o.lang().label.celular),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[15]||(t[15]=r=>m("fecha_de_ingreso"))},[e("div",Oe,[e("span",null,n(o.lang().label.fecha_de_ingreso),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[16]||(t[16]=r=>m("centro_costo_id"))},[e("div",Ie,[e("span",null,n(o.lang().label.centro_costo),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[17]||(t[17]=r=>m("salario"))},[e("div",je,[e("span",null,n(o.lang().label.salario),1),l(i(f),{class:"w-4 h-4"})])]),e("th",{class:"px-2 py-4 cursor-pointer",onClick:t[18]||(t[18]=r=>m("updated_at"))},[e("div",Ne,[e("span",null,n(o.lang().label.updated),1),l(i(f),{class:"w-4 h-4"})])]),e("th",Ve,n(o.lang().label.Action),1)])]),e("tbody",null,[(u(!0),v(C,null,M(b.users.data,(r,x)=>(u(),v("tr",{key:x,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[e("td",Be,[d(e("input",{class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:E,value:r.id,"onUpdate:modelValue":t[19]||(t[19]=_=>s.selectedId=_)},null,40,Ee),[[S,s.selectedId]])]),e("td",Pe,n(++x),1),e("td",De,[e("span",Ue,n(r.name),1),e("small",null,n(r.email),1)]),e("td",Te,n(r.cedula),1),e("td",Ae,n(r.cargo.length===0?"No tiene cargo":r.cargo.nombre),1),e("td",Le,n(r.roles.length===0?"No tiene rol":r.roles[0].name),1),e("td",Fe,[y(n(r.celular)+" ",1),e("span",null,n(r.telefono),1)]),e("td",Me,n(r.fecha_de_ingreso),1),e("td",Re,n(r.cc),1),e("td",qe,n(i(Y)(r.salario,0,1)),1),e("td",He,n(r.updated_at),1),e("td",Je,[e("div",Xe,[d((u(),h(i(w),{href:o.route("user.showReporte",r.id),type:"button",class:"inline-flex items-center p-1.5 bg-gray-600 border border-transparent rounded-l-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-500 active:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-250"},{default:p(()=>[l(i(K),{class:"w-4 h-4"})]),_:2},1032,["href"])),[[c,o.can(["update centroCostos"])],[g,o.lang().tooltip.seeReport]]),e("div",ze,[d((u(),h($,{type:"button",onClick:_=>(s.editOpen=!0,s.user=r),class:"px-2 py-1.5 rounded-sm mx-0.5"},{default:p(()=>[l(i(Q),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[c,o.can(["update user"])],[g,o.lang().tooltip.edit]]),d((u(),h($,{type:"button",onClick:_=>(s.EdiCentroOpen=!0,s.user=r),class:"px-2 py-1.5 rounded-sm mx-0.5"},{default:p(()=>[l(i(W),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[c,o.can(["update user"])&&r.roles[0].name==="supervisor"],[g,"Asignar"]]),d((u(),h(O,{type:"button",onClick:_=>(s.deleteOpen=!0,s.user=r),class:"px-2 py-1.5 rounded-none"},{default:p(()=>[l(i(I),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[c,o.can(["delete user"])],[g,o.lang().tooltip.delete]])])])])]))),128))])])]),e("div",Ge,[l(z,{links:a.users,filters:s.params},null,8,["links","filters"])])])])]),_:1})],64)}}};export{gs as default};
