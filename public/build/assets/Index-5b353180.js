import{o as n,f as i,r as re,p as ae,J as oe,q as ne,O as le,v as ie,k as de,a as l,u as p,w as y,F as g,s as ce,X as pe,b as t,c as b,d as x,t as c,g as m,x as h,y as f,z as S,A as me,B as ue,e as he,n as be}from"./app-437dd817.js";import{_ as ye}from"./AuthenticatedLayout-f475806a.js";import{_ as fe}from"./Breadcrumb-0c832bf7.js";import{_ as k}from"./TextInput-3bf86c3b.js";import{_ as H}from"./PrimaryButton-5df207d0.js";import{_ as P}from"./SelectInput-efd26cf7.js";import{_ as F}from"./DangerButton-139c636c.js";import{_ as _e}from"./Pagination-d99953bd.js";import{T,C as we,P as B,a as E,X as ve}from"./index-4b37ae43.js";import{_ as ge}from"./Checkbox-bb077b2f.js";import{_ as Q}from"./InfoButton-38d1f057.js";import ke from"./Create-95885612.js";import xe from"./CreateMassive-b8710d3c.js";import L from"./Edit-163700ac.js";import Se from"./Delete-d4cb0a2f.js";import De from"./DeleteBulk-116f3d26.js";import{a as q,n as z}from"./global-683f42af.js";import{C as Ce,p as Oe,a as $e,b as Ue,B as Ie,c as Ve,L as Ae,d as Me}from"./index-c99954e4.js";import{_ as je}from"./InputLabel-50ce7875.js";import{_ as Re}from"./FilterButtons-f7561a10.js";import Ne from"./Reporte_Super_Edit-079f2c4d.js";import"./SecondaryButton-85f89ebb.js";import"./InputError-6712e8fa.js";import"./main-21db5990.js";import"./app-57141eb6.js";const He=["type"],Pe={__name:"SuccessButton",props:{type:{type:String,default:"submit"}},setup(u){return(e,D)=>(n(),i("button",{type:u.type,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 active:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150"},[re(e.$slots,"default")],8,He))}},Fe={class:"space-y-1"},Te={class:"px-4 sm:px-0"},Be={class:"rounded-lg overflow-hidden w-fit"},Ee={class:"mt-2 inline-flex"},Qe={key:2,class:"mx-4 -mt-3"},Le={key:3,class:"mx-4"},qe=t("p",{class:"pt-1 mt-6 font-extrabold"},"Sin reportes",-1),ze=[qe],Je={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},Xe={class:"flex justify-between p-2"},Ge={class:"flex space-x-2"},Ke=t("span",{class:"my-auto hidden xl:block"},"Registros por página",-1),We=t("span",{class:"my-auto hidden md:block lg:block xl:hidden"},"Reg/página",-1),Ye=t("span",{class:"my-auto md:hidden"},"R/pag",-1),Ze={class:"flex gap-3"},es={class:"overflow-x-auto scrollbar-table"},ss={class:"w-full"},ts={class:"uppercase sticky text-sm border-t border-gray-200 dark:border-gray-700"},rs={class:"dark:bg-gray-900 text-left"},as={class:"px-2 py-4 text-center"},os=["onClick"],ns={class:"flex justify-between items-center"},ls={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},is=["value"],ds={class:"whitespace-nowrap py-4 px-2 sm:py-3"},cs={class:"flex justify-start items-center"},ps={class:"flex rounded-md overflow-hidden"},ms=["onSubmit"],us={class:"whitespace-nowrap py-4 px-2 sm:py-3"},hs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},bs={key:0},ys={key:1},fs={key:2},_s={key:3},ws={key:0},vs={key:1},gs={key:2},ks={key:4},xs={key:0},Ss={key:1},Ds={key:2},Cs={key:5},Os={key:6},$s={class:"my-2 py-4 border-t border-gray-200 dark:border-gray-900 hover:bg-sky-200 hover:dark:bg-gray-900/20"},Us=t("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),Is={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Vs=t("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),As={key:0,class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ms=t("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),js=t("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),Rs=t("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),Ns=t("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"}," Total Mes ",-1),Hs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ps={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Fs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ts={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Bs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Es={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Qs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ls={class:"whitespace-nowrap py-4 px-2 sm:py-3"},qs={class:"whitespace-nowrap py-4 px-2 sm:py-3"},zs=t("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),Js=t("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),Xs={class:"flex justify-betwween items-center p-2 border-t border-gray-200 dark:border-gray-700"},Gs={key:0,class:"text-gray-600 body-font overflow-hidden"},Ks={class:"container px-5 py-4 mx-auto"},Ws={class:"flex flex-wrap m-2"},Ys={class:"p-1 md:w-1/2 flex flex-col items-start"},Zs=t("span",{class:"inline-block py-1 px-2 rounded bg-indigo-50 text-indigo-500 text-xs font-medium tracking-widest"}," Este mes ",-1),et={key:0,class:"sm:text-3xl text-2xl title-font font-medium text-gray-900 mt-4 mb-4"},st={class:"m-1 p-1 w-full"},Ot={__name:"Index",props:{title:String,filters:Object,fromController:Object,breadcrumbs:Object,perPage:Number,nombresTabla:Array,valoresSelect:Object,showSelect:Object,showUsers:Object,userFiltro:Object,IntegerDefectoSelect:Number,horasemana:Number,startDateMostrar:String,endDateMostrar:String,sumhoras_trabajadas:Number,quincena:Object,nombrePersona:String,numberPermissions:Number,ArrayOrdinarias:Array,sumdiurnas:Number,sumnocturnas:Number,sumextra_diurnas:Number,sumextra_nocturnas:Number,sumdominical_diurno:Number,sumdominical_nocturno:Number,sumdominical_extra_diurno:Number,sumdominical_extra_nocturno:Number,horasTrabajadasHoy:Array,HorasDeCadaSemana:Array,ArrayHorasSemanales:Array},setup(u){var O,$,U,I,V,A,M,j,R,N;const e=u;Ce.register(Oe,$e,Ue,Ie,Ve,Ae);const{_:D,debounce:J,pickBy:X}=ce,G={responsive:!0,maintainAspectRatio:!0,color:"#000",darkcolor:"#fff"},K={name:"Numero de reportes",datasets:[{label:"Numero de Reportes",data:e.quincena,backgroundColor:"#f87979"}]},s=ae({params:{searchQuincena:(O=e.filters)==null?void 0:O.searchQuincena,searchIncongruencias:($=e.filters)==null?void 0:$.searchIncongruencias,searchHorasD:(U=e.filters)==null?void 0:U.searchHorasD,soloValidos:(I=e.filters)==null?void 0:I.soloValidos,soloQuincena:(V=e.filters)==null?void 0:V.soloQuincena,FiltroUser:(A=e.filters)==null?void 0:A.FiltroUser,search:(M=e.filters)==null?void 0:M.search,searchDDay:(j=e.filters)==null?void 0:j.searchDDay,field:(R=e.filters)==null?void 0:R.field,order:(N=e.filters)==null?void 0:N.order,perPage:e.perPage},selectedId:[],multipleSelect:!1,createOpen:!1,createMassOpen:!1,editOpen:!1,editCorregirOpen:!1,deleteOpen:!1,deleteBulkOpen:!1,generico:null,nope:null,dataSet:oe().props.app.perpage,DiasDeLaSemana:[{value:1,label:"Enero"},{label:"Febrero",value:2},{label:"Marzo",value:3},{label:"Abril",value:4},{label:"Mayo",value:5},{label:"Junio",value:6},{label:"Julio",value:7},{label:"Agosto",value:8},{label:"Septiembre",value:9},{label:"Octubre",value:10},{label:"Noviembre",value:11},{label:"Diciembre",value:12}],Reporte_Super_EditOpen:!1}),W=r=>{r!=null&&e.userFiltro?(r=r.substr(2),s.params.field=r.replace(/ /g,"_"),s.params.order=s.params.order==="asc"?"desc":"asc"):alert("No esta permitido organizar la tabla en esta vista")};ne(()=>D.cloneDeep(s.params),J(()=>{let r=X(s.params);le.get(route("Reportes.index"),r,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const Y=r=>{var o;r.target.checked===!1?s.selectedId=[]:(o=e.fromController)==null||o.data.forEach(_=>{s.selectedId.push(_.id)})},Z=()=>{var r;((r=e.fromController)==null?void 0:r.data.length)==s.selectedId.length?s.multipleSelect=!0:s.multipleSelect=!1},v=ie({valido:!1}),C=r=>{var o;v.valido=r,v.put(route("Reportes.update",(o=s.generico)==null?void 0:o.id),{preserveScroll:!0,onSuccess:()=>{v.reset()},onError:()=>null,onFinish:()=>null})},ee=de([]),se=r=>{ee.value=r,s.params.soloValidos=r[0],s.params.soloQuincena=r[1],s.params.searchIncongruencias=r[2],s.params.searchQuincena=r[3]};return(r,o)=>{const _=me("tooltip");return n(),i(g,null,[l(p(pe),{title:e.title},null,8,["title"]),l(ye,null,{default:y(()=>[l(fe,{title:u.title,breadcrumbs:u.breadcrumbs},null,8,["title","breadcrumbs"]),t("div",Fe,[t("div",Te,[t("div",Be,[t("div",Ee,[r.can(["create reporte"])?(n(),b(H,{key:0,class:"rounded-md mx-2 h-8 mt-2",onClick:o[0]||(o[0]=a=>s.createOpen=!0)},{default:y(()=>[x(c(r.lang().button.add),1)]),_:1})):m("",!0),r.can(["isAdmin"])?(n(),b(H,{key:1,class:"rounded-md mx-2 h-8 mt-2",onClick:o[1]||(o[1]=a=>s.createMassOpen=!0)},{default:y(()=>[x(c(r.lang().button.add)+" Masivamente ",1)]),_:1})):m("",!0),e.userFiltro&&e.userFiltro.length>0?h((n(),i("div",Qe,[l(je,{for:"centro_costo_id",value:"Filtrar por trabajador"}),l(P,{modelValue:s.params.FiltroUser,"onUpdate:modelValue":o[2]||(o[2]=a=>s.params.FiltroUser=a),dataSet:e.userFiltro,class:"mt-1 block w-full"},null,8,["modelValue","dataSet"])],512)),[[f,r.can(["isingeniero","isadmin","isadministrativo","issupervisor"])&&e.userFiltro]]):h((n(),i("div",Le,ze,512)),[[f,r.can(["isingeniero","isadmin","isadministrativo","issupervisor"])&&e.userFiltro]])]),l(ke,{show:s.createOpen,onClose:o[3]||(o[3]=a=>s.createOpen=!1),title:e.title,valoresSelect:e.valoresSelect,IntegerDefectoSelect:e.IntegerDefectoSelect,horasemana:e.horasemana,startDateMostrar:e.startDateMostrar,endDateMostrar:e.endDateMostrar,numberPermissions:e.numberPermissions,ArrayOrdinarias:e.ArrayOrdinarias,horasTrabajadasHoy:e.horasTrabajadasHoy,HorasDeCadaSemana:e.HorasDeCadaSemana,ArrayHorasSemanales:e.ArrayHorasSemanales},null,8,["show","title","valoresSelect","IntegerDefectoSelect","horasemana","startDateMostrar","endDateMostrar","numberPermissions","ArrayOrdinarias","horasTrabajadasHoy","HorasDeCadaSemana","ArrayHorasSemanales"]),l(xe,{show:s.createMassOpen,onClose:o[4]||(o[4]=a=>s.createMassOpen=!1),title:e.title,valoresSelect:e.valoresSelect,IntegerDefectoSelect:e.IntegerDefectoSelect,horasemana:e.horasemana,startDateMostrar:e.startDateMostrar,endDateMostrar:e.endDateMostrar,numberPermissions:e.numberPermissions,ArrayOrdinarias:e.ArrayOrdinarias},null,8,["show","title","valoresSelect","IntegerDefectoSelect","horasemana","startDateMostrar","endDateMostrar","numberPermissions","ArrayOrdinarias"]),l(L,{show:s.editOpen,onClose:o[5]||(o[5]=a=>s.editOpen=!1),Reporte:s.generico,title:e.title,valoresSelect:e.valoresSelect,showUsers:e.showUsers,correccionUsuario:!1},null,8,["show","Reporte","title","valoresSelect","showUsers"]),l(L,{show:s.editCorregirOpen,onClose:o[6]||(o[6]=a=>s.editCorregirOpen=!1),Reporte:s.generico,title:e.title,valoresSelect:e.valoresSelect,showUsers:e.showUsers,correccionUsuario:!0},null,8,["show","Reporte","title","valoresSelect","showUsers"]),l(Ne,{show:s.Reporte_Super_EditOpen,onClose:o[7]||(o[7]=a=>s.Reporte_Super_EditOpen=!1),Reporte:s.generico,title:e.title,valoresSelect:e.valoresSelect,showUsers:e.showUsers,correccionUsuario:!1},null,8,["show","Reporte","title","valoresSelect","showUsers"]),h(l(Se,{show:s.deleteOpen,onClose:o[8]||(o[8]=a=>s.deleteOpen=!1),Reporte:s.generico,title:e.title},null,8,["show","Reporte","title"]),[[f,r.can(["delete reporte"])]]),r.can(["delete reporte"])&&r.can(["updateCorregido reporte"])?(n(),b(De,{key:0,show:s.deleteBulkOpen,onClose:o[9]||(o[9]=a=>(s.deleteBulkOpen=!1,s.multipleSelect=!1,s.selectedId=[])),selectedId:s.selectedId,title:e.title},null,8,["show","selectedId","title"])):m("",!0)])]),t("div",Je,[t("div",Xe,[t("div",Ge,[Ke,We,Ye,u.filters!==null?(n(),b(P,{key:0,modelValue:s.params.perPage,"onUpdate:modelValue":o[10]||(o[10]=a=>s.params.perPage=a),dataSet:s.dataSet},null,8,["modelValue","dataSet"])):m("",!0),h((n(),b(F,{onClick:o[11]||(o[11]=a=>s.deleteBulkOpen=!0),class:"px-3 py-1.5"},{default:y(()=>[l(p(T),{class:"w-5 h-5"})]),_:1})),[[f,s.selectedId.length!=0&&r.can(["delete reporte"])],[_,r.lang().tooltip.delete_selected]])]),t("div",Ze,[l(k,{modelValue:s.params.searchHorasD,"onUpdate:modelValue":o[12]||(o[12]=a=>s.params.searchHorasD=a),type:"number",min:"0",class:"block w-2/3 md:w-full rounded-lg",placeholder:r.lang().placeholder.searchHorasD},null,8,["modelValue","placeholder"]),l(k,{modelValue:s.params.search,"onUpdate:modelValue":o[13]||(o[13]=a=>s.params.search=a),type:"number",min:"0",max:"12",class:"block w-2/3 md:w-full rounded-lg",placeholder:r.lang().placeholder.searchDates},null,8,["modelValue","placeholder"]),l(k,{modelValue:s.params.searchDDay,"onUpdate:modelValue":o[14]||(o[14]=a=>s.params.searchDDay=a),type:"number",min:"0",max:"31",class:"block w-2/3 md:w-full rounded-lg",placeholder:r.lang().placeholder.searchDDay},null,8,["modelValue","placeholder"]),l(k,{modelValue:s.params.searchQuincena,"onUpdate:modelValue":o[15]||(o[15]=a=>s.params.searchQuincena=a),type:"number",min:"0",max:"31",class:"block w-2/3 md:w-full rounded-lg",placeholder:r.lang().placeholder.searchQuincena},null,8,["modelValue","placeholder"]),l(Re,{"onUpdate:checked":se})])]),t("div",es,[t("table",ss,[t("thead",ts,[t("tr",rs,[t("th",as,[l(ge,{checked:s.multipleSelect,"onUpdate:checked":o[16]||(o[16]=a=>s.multipleSelect=a),onChange:Y},null,8,["checked"])]),(n(!0),i(g,null,S(u.nombresTabla[0],(a,w)=>(n(),i("th",{key:w,onClick:d=>W(u.nombresTabla[2][w]),class:"px-2 py-4 cursor-pointer hover:bg-sky-50 dark:hover:bg-sky-800"},[t("div",ns,[t("span",null,c(a),1),u.nombresTabla[2][w]!==null?(n(),b(p(we),{key:0,class:"w-4 h-4"})):m("",!0)])],8,os))),128))])]),t("tbody",null,[(n(!0),i(g,null,S(u.fromController.data,(a,w)=>(n(),i("tr",{key:w,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[t("td",ls,[h(t("input",{type:"checkbox",onChange:Z,value:a.id,"onUpdate:modelValue":o[17]||(o[17]=d=>s.selectedId=d),class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary"},null,40,is),[[ue,s.selectedId]])]),t("td",ds,[t("div",cs,[t("div",ps,[t("form",{onSubmit:he(C,["prevent"])},[r.can(["update reporte"])?h((n(),b(Q,{key:0,type:"button",onClick:d=>(s.editOpen=!0,s.generico=a),class:"px-2 py-1.5 rounded-sm"},{default:y(()=>[l(p(B),{class:"w-6 h-6"})]),_:2},1032,["onClick"])),[[_,r.lang().tooltip.edit]]):m("",!0),r.can(["update reporte"])?h((n(),b(Pe,{key:1,type:"button",class:be(["mx-1 w-12 h-10 rounded-lg-r",{"opacity-25":p(v).processing}]),disabled:p(v).processing,onClick:d=>(s.generico=a,C(!0))},{default:y(()=>[l(p(E),{class:"w-6 h-6"})]),_:2},1032,["class","disabled","onClick"])),[[_,"Aprobar"]]):m("",!0)],40,ms),r.can(["isSuper"])?h((n(),b(Q,{key:0,type:"button",onClick:d=>(s.Reporte_Super_EditOpen=!0,s.generico=a),class:"px-2 py-1.5 rounded-sm"},{default:y(()=>[l(p(B),{class:"w-5 h-5"})]),_:2},1032,["onClick"])),[[_,r.Solosuper]]):m("",!0),r.can(["delete reporte"])?h((n(),b(F,{key:1,type:"button",onClick:d=>(s.deleteOpen=!0,s.generico=a),class:"px-2 py-1.5 rounded-sm"},{default:y(()=>[l(p(T),{class:"w-6 h-6"})]),_:2},1032,["onClick"])),[[_,r.lang().tooltip.delete]]):m("",!0)])])]),t("td",us,c(w+1),1),t("td",hs,c(u.showSelect[a.centro_costo_id]),1),h(t("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},c(u.showUsers[a.user_id]),513),[[f,r.can(["updateCorregido reporte"])]]),(n(!0),i(g,null,S(u.nombresTabla[1],(d,te)=>(n(),i("td",{key:te,class:"whitespace-nowrap py-4 px-2 sm:py-3"},[d.substr(0,1)==="s"?(n(),i("div",bs,c(a[d.substr(2)]),1)):d.substr(0,1)==="d"?(n(),i("div",ys,c(p(q)(a[d.substr(2)])),1)):d.substr(0,1)==="t"?(n(),i("div",fs,c(p(q)(a[d.substr(2)],"conLaHora")),1)):d.substr(0,1)==="v"?(n(),i("div",_s,[a[d.substr(2)]===0?(n(),i("div",ws)):a[d.substr(2)]===1?(n(),i("div",vs," Si ")):a[d.substr(2)]===2?(n(),i("div",gs," 2 ")):m("",!0)])):d.substr(0,1)==="b"?(n(),i("div",ks,[a[d.substr(2)]===0?(n(),i("div",xs," Aun no validada")):a[d.substr(2)]===1?(n(),i("div",Ss,[l(p(E),{class:"w-8 h-8 text-green-600"})])):a[d.substr(2)]===2?(n(),i("div",Ds,[l(p(ve),{class:"w-8 h-8 text-red-600"})])):m("",!0)])):d.substr(0,1)=="i"?(n(),i("div",Cs,c(p(z)(a[d.substr(2)])),1)):d.substr(0,1)=="m"?(n(),i("div",Os,c(p(z)(a[d.substr(2)],0,1)),1)):m("",!0)]))),128))]))),128)),h(t("tr",$s,[Us,h(t("td",Is,null,512),[[f,r.can(["updateCorregido reporte"])]]),Vs,u.numberPermissions>1?(n(),i("td",As)):m("",!0),Ms,js,Rs,Ns,t("td",Hs," Trabajadas: "+c(e.sumhoras_trabajadas),1),t("td",Ps,c(e.sumdiurnas?"Diurnas: "+e.sumdiurnas:""),1),t("td",Fs,c(e.sumnocturnas?"Nocturnas: "+e.sumnocturnas:""),1),t("td",Ts,c(e.sumextra_diurnas?"Extra diurnas: "+e.sumextra_diurnas:""),1),t("td",Bs,c(e.sumextra_nocturnas?"Extra nocturnas: "+e.sumextra_nocturnas:""),1),t("td",Es,c(e.sumdominical_diurno?"Dominical diurno: "+e.sumdominical_diurno:""),1),t("td",Qs,c(e.sumdominical_nocturno?"Dominical nocturno: "+e.sumdominical_nocturno:""),1),t("td",Ls,c(e.sumdominical_extra_diurno?"Dominical extra diurno: "+e.sumdominical_extra_diurno:""),1),t("td",qs,c(e.sumdominical_extra_nocturno?"Dominical extra nocturno: "+e.sumdominical_extra_nocturno:""),1),zs,Js],512),[[f,e.sumhoras_trabajadas!=0]])])])]),t("div",Xs,[l(_e,{links:e.fromController,filters:s.params},null,8,["links","filters"])])]),e.quincena!=null?h((n(),i("section",Gs,[t("div",Ks,[t("div",Ws,[t("div",Ys,[Zs,e.nombrePersona?(n(),i("h2",et,[x(" Reportes de este mes: "),t("b",null,c(e.nombrePersona),1)])):m("",!0),t("div",st,[l(p(Me),{id:"my-chart-id",options:G,data:K})])])])])],512)),[[f,r.can(["updateCorregido reporte"])||r.can(["isAdmin"])||r.can(["isadministrativo"])]]):m("",!0)])]),_:1})],64)}}};export{Ot as default};
