import{p as U,v as $,m as E,q as x,f as m,a as i,w as v,o as g,b as n,t as d,u as r,F as B,z as j,x as S,B as y,d as b,n as N,e as O,k as T}from"./app-437dd817.js";import{_ as F}from"./InputError-6712e8fa.js";import{_ as u}from"./InputLabel-50ce7875.js";import{_ as I,a as z}from"./SecondaryButton-85f89ebb.js";import{_ as D}from"./PrimaryButton-5df207d0.js";import{_ as C}from"./TextInput-3bf86c3b.js";const M={class:"space-y-6"},q=["onSubmit"],J={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},L={class:"my-6 grid grid-cols-2 gap-6"},A={class:"col-span-2 w-full"},G=["for"],H=["id","value","onUpdate:modelValue","checked"],K={class:"inline-flex col-span-2 mt-6"},P={class:"flex justify-end"},ee={__name:"Edit",props:{show:Boolean,title:String,CentroCosto:Object,listaSupervisores:Object},emits:["close"],setup(k,{emit:f}){const a=k,c=U({multipleSelect:!1,SelecSupervisores:[]}),e=$({nombre:"",descripcion:"",clasificacion:"",activo:!0,selectedUsers:[],listaSupervisores:[]});function w(s){for(const[o,l]of Object.entries(a.CentroCosto.todos))if(l==s)return o;return null}const _=()=>{var o,l;c.SelecSupervisores=(o=a.listaSupervisores)==null?void 0:o.map(t=>({label:t.name,value:t.id}));let s;(l=a.CentroCosto)!=null&&l.cuantoshijos&&c.SelecSupervisores&&(console.log("=>(todos",a.CentroCosto.todos),c.SelecSupervisores.forEach(t=>{console.log("=>(Edit.vue:58) idsupervisor",t),s=w(t.value),console.log("=>(Edit.vue:59) indexTrue",s),s&&(e.selectedUsers[s]=!0)}))};E(()=>{var s,o,l,t,p;a.show&&(e.errors={},e.nombre=(s=a.CentroCosto)==null?void 0:s.nombre,e.descripcion=(o=a.CentroCosto)==null?void 0:o.descripcion,e.clasificacion=(l=a.CentroCosto)==null?void 0:l.clasificacion,e.activo=(t=a.CentroCosto)==null?void 0:t.activo,e.activo=T(!!((p=a.CentroCosto)!=null&&p.activo)))}),x(()=>a.show,(s,o)=>{s&&!o&&(e.selectedUsers=c.SelecSupervisores.map(()=>!1),setTimeout(()=>_(),30))},{deep:!0});function V(s,o){if(e.selectedUsers&&e.selectedUsers.length)return e.selectedUsers.includes(o)}const h=()=>{var s;e.listaSupervisores=a.listaSupervisores,e.put(route("CentroCostos.update",(s=a.CentroCosto)==null?void 0:s.id),{preserveScroll:!0,onSuccess:()=>{f("close"),e.reset(),c.multipleSelect=!1},onError:()=>alert(JSON.stringify(e.errors,null,4)),onFinish:()=>null})};return(s,o)=>(g(),m("section",M,[i(I,{show:a.show,onClose:o[6]||(o[6]=l=>f("close"))},{default:v(()=>[n("form",{class:"p-6",onSubmit:O(h,["prevent"])},[n("h2",J,d(s.lang().label.edit)+" "+d(a.title),1),n("div",L,[n("div",null,[i(u,{ref:"nombre",for:"nombre",value:s.lang().label.name},null,8,["value"]),i(C,{id:"nombre",type:"text",class:"bg-gray-100 dark:bg-gray-700 mt-1 w-full",modelValue:r(e).nombre,"onUpdate:modelValue":o[0]||(o[0]=l=>r(e).nombre=l),placeholder:s.lang().placeholder.diurnas,error:r(e).errors.diurnas},null,8,["modelValue","placeholder","error"])]),n("div",null,[i(u,{ref:"descripcion",for:"descripcion",value:s.lang().label.descripcion},null,8,["value"]),i(C,{id:"descripcion",type:"text",class:"bg-gray-100 dark:bg-gray-700 mt-1 w-full",modelValue:r(e).descripcion,"onUpdate:modelValue":o[1]||(o[1]=l=>r(e).descripcion=l),placeholder:s.lang().placeholder.diurnas,error:r(e).errors.diurnas},null,8,["modelValue","placeholder","error"])]),n("div",null,[i(u,{ref:"clasificacion",for:"clasificacion",value:s.lang().label.clasificacion},null,8,["value"]),i(C,{id:"clasificacion",type:"text",class:"bg-gray-100 dark:bg-gray-700 mt-1 w-full",modelValue:r(e).clasificacion,"onUpdate:modelValue":o[2]||(o[2]=l=>r(e).clasificacion=l),placeholder:s.lang().placeholder.diurnas,error:r(e).errors.diurnas},null,8,["modelValue","placeholder","error"])]),n("div",A,[i(u,{for:"users",value:s.lang().label.supervisores},null,8,["value"]),(g(!0),m(B,null,j(c.SelecSupervisores,(l,t)=>(g(),m("div",{key:t,class:"mt-1 block w-full"},[n("label",{for:"user"+t},[S(n("input",{type:"checkbox",id:"user"+t,value:l.value,"onUpdate:modelValue":p=>r(e).selectedUsers[t]=p,checked:V(l.id,t)},null,8,H),[[y,r(e).selectedUsers[t]]]),b(" "+d(l.label),1)],8,G)]))),128)),i(F,{class:"mt-2",message:r(e).errors.users},null,8,["message"])]),n("div",K,[S(n("input",{onClick:o[3]||(o[3]=(...l)=>s.toggleCheckbox&&s.toggleCheckbox(...l)),"onUpdate:modelValue":o[4]||(o[4]=l=>r(e).activo=l),type:"checkbox",id:"activo",class:"bg-gray-50 dark:bg-gray-600 mt-1 w-7 h-7 p-2 my-auto rounded-xl"},null,512),[[y,r(e).activo]]),i(u,{ref:"activo",for:"activo",value:s.lang().label.activo,class:"mx-3 my-auto"},null,8,["value"])])]),n("div",P,[i(z,{disabled:r(e).processing,onClick:o[5]||(o[5]=l=>f("close"))},{default:v(()=>[b(d(s.lang().button.close),1)]),_:1},8,["disabled"]),i(D,{class:N(["ml-3",{"opacity-25":r(e).processing}]),disabled:r(e).processing,onClick:h},{default:v(()=>[b(d(r(e).processing?s.lang().button.save+"...":s.lang().button.save),1)]),_:1},8,["class","disabled"])])],40,q)]),_:1},8,["show"])]))}};export{ee as default};
